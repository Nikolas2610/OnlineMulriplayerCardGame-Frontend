import{d as L,u as I,e as i,b as $,o as c,c as m,h as e,i as b,k as d,l as g,H as k,I as D,C as n,G as P,E as f,J as E,N as R,O as j,D as B}from"./index.e533216c.js";import{M as S}from"./Modal.e27e3e69.js";import{M as F}from"./MyTitle.9ce631a7.js";import{a as C}from"./axiosUser.ac2f0c84.js";import"./_plugin-vue_export-helper.cdc0426e.js";const z={class:"w-full overflow-x-auto px-4"},G={class:"mx-auto mt-4"},H={class:"flex flex-col"},J={class:"overflow-x-auto shadow-md sm:rounded-lg"},Y={class:"inline-block min-w-full align-middle"},q={class:"overflow-hidden"},K={class:"min-w-full divide-y table-fixed divide-gray-700"},Q={class:"bg-gray-700"},W=e("th",{scope:"col",class:"p-4"},[e("span",{class:"sr-only"},"Edit")],-1),X={class:"divide-y bg-dark divide-gray-700"},Z={class:"py-4 px-6 text-sm font-medium whitespace-nowrap text-white"},ee={class:"py-4 px-6 text-sm font-medium whitespace-nowrap text-white"},te={class:"py-4 px-6 text-sm font-medium whitespace-nowrap text-white"},se={class:"py-4 px-6 text-sm font-medium whitespace-nowrap text-white"},oe={class:"py-4 px-6 text-sm font-medium whitespace-nowrap text-white"},ae={class:"py-4 px-6 text-sm font-medium whitespace-nowrap text-white"},le={class:"py-4 px-6 text-sm font-medium text-right whitespace-nowrap"},ne=["onClick"],de=["onClick"],re={key:0,class:""},ie={class:"mb-3"},ce=e("label",{for:"username",class:"block text-sm font-medium"},"Username",-1),me={class:"mt-1"},ue={class:"mb-3"},pe=e("label",{for:"email",class:"block text-sm font-medium"},"Email",-1),he={class:"mt-1"},xe={class:"mb-3"},fe=e("label",{for:"role",class:"block text-sm font-medium"},"Role",-1),_e=e("option",{value:"admin"},"Admin",-1),ve=e("option",{value:"user"},"User",-1),ye=[_e,ve],we={class:"mt-1 flex"},be=e("label",{for:"dealer",class:"block text-sm font-medium mr-2"},"Email Confirmed",-1),ge=e("div",null," Do you really want to delete this user? This process cannot be undone. ",-1),Se=L({__name:"UsersView",setup(ke){const r=I(),u=i([]),_=i(!1),v=i(!1),s=i(),y=i(null),O=i(["ID","USERNAME","EMAIL","ROLE","EMAIL CONFIRM","CREATED AT","UPDATED AT"]);$(()=>{w()});const p=()=>{_.value=!1},h=()=>{v.value=!1},T=o=>{s.value={...u.value[o]},y.value=u.value[o].id,_.value=!0},V=o=>{y.value=u.value[o].id,v.value=!0},w=async()=>{const o=await C.get("admin/users");u.value=o.data},M=o=>{const a=new Date(o),t=a.toLocaleDateString();return`${a.toLocaleTimeString()} - ${t}`},A=async()=>{try{if((await C.delete("admin/user/delete",{data:{id:y.value}})).data.affected===1){r.success("User deleted successfully"),h(),w();return}r.error("Something went wrong. Please try again later")}catch(o){r.error(`Something went wrong. Please try again later. 
${o.response.data.message}`),h()}},N=async()=>{var o,a,t,l,x;try{if((await C.patch("admin/user/edit",{id:(o=s.value)==null?void 0:o.id,username:(a=s.value)==null?void 0:a.username,email:(t=s.value)==null?void 0:t.email,email_confirmed:(l=s.value)==null?void 0:l.email_confirmed,role:(x=s.value)==null?void 0:x.role})).data.affected===1){r.success("User updated successfully"),p(),w();return}r.error("Something went wrong. Please try again later")}catch(U){r.error("Something went wrong. Please try again later",U),p()}};return(o,a)=>(c(),m(k,null,[e("div",z,[b(F,null,{default:d(()=>[g("Users")]),_:1}),e("div",G,[e("div",H,[e("div",J,[e("div",Y,[e("div",q,[e("table",K,[e("thead",Q,[e("tr",null,[(c(!0),m(k,null,D(O.value,(t,l)=>(c(),m("th",{scope:"col",key:l,class:"py-3 px-6 text-xs font-medium tracking-wider text-left uppercase text-gray-400"},n(t),1))),128)),W])]),e("tbody",X,[(c(!0),m(k,null,D(u.value,(t,l)=>(c(),m("tr",{class:"hover:bg-gray-700",key:`gamme_${t.id}`},[e("td",Z,n(t.id),1),e("td",ee,n(t.username),1),e("td",te,n(t.email),1),e("td",se,n(t.role),1),e("td",{class:P(["py-4 px-6 text-sm font-medium whitespace-nowrap",t.email_confirmed?"text-primary":"text-red-500"])},n(t.email_confirmed?"YES":"NO"),3),e("td",oe,n(M(t.created_at)),1),e("td",ae,n(M(t.updated_at)),1),e("td",le,[e("button",{class:"text-blue-500 hover:underline",onClick:x=>T(l)}," View Details ",8,ne),e("button",{class:"text-red-500 hover:underline ml-2",onClick:x=>V(l)}," Delete ",8,de)])]))),128))])])])])])])])]),b(S,{modalOpen:_.value,onCloseModal:p},{modal_header:d(()=>[g(" Edit User ")]),body:d(()=>[s.value?(c(),m("div",re,[e("div",ie,[ce,e("div",me,[f(e("input",{id:"username",type:"text","onUpdate:modelValue":a[0]||(a[0]=t=>s.value.username=t),class:"block w-full appearance-none rounded-md border border-gray-300 px-3 py-2 placeholder-gray-400 shadow-sm focus:border-secondary focus:outline-none sm:text-sm"},null,512),[[E,s.value.username]])])]),e("div",ue,[pe,e("div",he,[f(e("input",{id:"email",type:"email","onUpdate:modelValue":a[1]||(a[1]=t=>s.value.email=t),class:"block w-full appearance-none rounded-md border border-gray-300 px-3 py-2 placeholder-gray-400 shadow-sm focus:border-secondary focus:outline-none sm:text-sm"},null,512),[[E,s.value.email]])])]),e("div",xe,[fe,f(e("select",{id:"role","onUpdate:modelValue":a[2]||(a[2]=t=>s.value.role=t),class:"block w-full appearance-none rounded-md border border-gray-300 px-3 py-2 placeholder-gray-400 shadow-sm focus:border-secondary focus:outline-none sm:text-sm"},ye,512),[[R,s.value.role]])]),e("div",we,[be,f(e("input",{id:"dealer",type:"checkbox","onUpdate:modelValue":a[3]||(a[3]=t=>s.value.email_confirmed=t),class:""},null,512),[[j,s.value.email_confirmed]])])])):B("",!0)]),modal_footer:d(()=>[e("button",{onClick:N,class:"flex w-full items-center justify-center rounded-md border border-transparent bg-primary text-white px-8 py-3 text-base font-medium hover:bg-secondary hover:text-white md:py-3 md:px-10 md:text-lg"}," Save Changes "),e("button",{class:"flex w-full items-center justify-center rounded-md border border-transparent bg-gray-400 px-8 py-3 text-base font-medium text-white hover:bg-secondary hover:text-white md:py-3 md:px-10 md:text-lg ml-2",onClick:p}," Close ")]),_:1},8,["modalOpen"]),b(S,{modalOpen:v.value,onCloseModal:h},{modal_header:d(()=>[g(" Are you sure? ")]),body:d(()=>[ge]),modal_footer:d(()=>[e("button",{onClick:A,class:"flex w-full items-center justify-center rounded-md border border-transparent bg-red-500 text-white px-8 py-3 text-base font-medium hover:bg-red-600 hover:text-white md:py-3 md:px-10 md:text-lg"}," Delete "),e("button",{onClick:h,class:"flex w-full items-center justify-center rounded-md border border-transparent bg-gray-400 px-8 font-medium text-white hover:bg-gray-600 hover:text-white md:py-3 md:px-10 md:text-lg ml-2"}," Cancel ")]),_:1},8,["modalOpen"])],64))}});export{Se as default};
