import{M as y}from"./MyTitle.afc7dae6.js";import{M as D}from"./Modal.91a465e1.js";import{d as E,a4 as S,a as R,r as u,b as N,o,c as a,i as t,k as p,j as n,l as d,m,H as _,I as w,C as l,L as O}from"./index.6223a65c.js";import{u as V}from"./GameStore.104a959c.js";import{P as A}from"./PreLoader.e3fb3ec5.js";import{_ as B}from"./GameForm.vue_vue_type_script_setup_true_lang.346a0ddc.js";import{_ as j}from"./CheckBoxField.vue_vue_type_script_setup_true_lang.c7674399.js";import{_ as I}from"./BackButton.vue_vue_type_script_setup_true_lang.afe87207.js";const L={class:"w-full overflow-x-auto px-4"},P={key:0},T={key:0,class:"mx-auto mt-4"},U={class:"flex flex-col"},X={class:"overflow-x-auto shadow-md sm:rounded-lg"},Y={class:"inline-block min-w-full align-middle"},H={class:"overflow-hidden"},q={class:"min-w-full divide-y table-fixed divide-gray-700"},z={class:"bg-gray-700"},J=t("th",{scope:"col",class:"p-4"},[t("span",{class:"sr-only"},"Edit")],-1),K={class:"divide-y bg-dark divide-gray-700"},Q={class:"py-4 px-6 text-sm font-medium whitespace-nowrap text-white"},W={class:"py-4 px-6 text-sm font-medium whitespace-nowrap text-white"},Z={class:"py-4 px-6 text-sm font-medium whitespace-nowrap text-white"},ee={class:"py-4 px-6 text-sm font-medium whitespace-nowrap text-white"},te=t("span",{class:"text-primary"},"X",-1),se={class:"py-4 px-6 text-sm font-medium whitespace-nowrap text-white"},oe={class:"py-4 px-6 text-sm font-medium text-right whitespace-nowrap"},ae=["onClick"],le=["onClick"],ie={key:1},ne=t("div",null," Do you really want to delete this game? This process cannot be undone ",-1),xe=E({__name:"GamesView",setup(de){const e=V(),f=S(),g=R(),b=u("user"),c=u(!1),h=u(null),k=u(["No","NAME","MAX PLAYERS","GRID","PRIVATE"]);f.meta.admin?e.setUserRole("admin"):e.setUserRole("user"),N(async()=>{f.meta.admin&&(b.value=g.$state.user.role,e.setUserRole("admin")),e.fetchGames(),e.editGame=!1,e.stepForm.value=1});const x=()=>{c.value=!1},G=v=>{h.value=e.games[v].id,c.value=!0},C=async()=>{e._delete(h.value).finally(()=>{c.value=!1})},F=async()=>{e.stepForm.submitted.indexOf(!0)!==-1&&await e.fetchGames(),e.editGame=!1,e.stepForm.value=1},M=async()=>{e.stepForm.change[e.stepForm.value-1]?e._update():e.stepForm.value===e.stepForm.change.length?(e.stepForm.submitted.indexOf(!0)!==-1&&await e.fetchGames(),e.stepForm.value=1,e.editGame=!1):e.stepForm.value++};return(v,i)=>(o(),a(_,null,[t("div",L,[p(e).editGame?(o(),a("div",ie,[n(j,{justify:"between"},{default:d(()=>[n(y,null,{default:d(()=>[m("Edit Game")]),_:1}),n(I,{title:"Back to Games",onClick:i[0]||(i[0]=s=>F())})]),_:1}),n(B,{onSubmit:i[1]||(i[1]=s=>M())})])):(o(),a("div",P,[n(y,null,{default:d(()=>[m("My Games")]),_:1}),p(e).loading?(o(),O(A,{key:1})):(o(),a("div",T,[t("div",U,[t("div",X,[t("div",Y,[t("div",H,[t("table",q,[t("thead",z,[t("tr",null,[(o(!0),a(_,null,w(k.value,(s,r)=>(o(),a("th",{scope:"col",key:r,class:"py-3 px-6 text-xs font-medium tracking-wider text-left uppercase text-gray-400"},l(s),1))),128)),J])]),t("tbody",K,[(o(!0),a(_,null,w(p(e).games,(s,r)=>(o(),a("tr",{class:"hover:bg-gray-700",key:`game_${s.id}`},[t("td",Q,l(r+1),1),t("td",W,l(s.name),1),t("td",Z,l(s.max_players),1),t("td",ee,[m(l(s.grid_rows)+" ",1),te,m(" "+l(s.grid_cols),1)]),t("td",se,l(s.private?"YES":"NO"),1),t("td",oe,[t("button",{class:"text-blue-500 hover:underline",onClick:$=>p(e).toggleEditGame(r)}," View Details ",8,ae),t("button",{class:"text-red-500 hover:underline ml-2",onClick:$=>G(r)}," Delete ",8,le)])]))),128))])])])])])])]))]))]),n(D,{modalOpen:c.value,onCloseModal:x},{modal_header:d(()=>[m(" Are you sure? ")]),body:d(()=>[ne]),modal_footer:d(()=>[t("button",{onClick:i[2]||(i[2]=s=>C()),class:"flex w-full items-center justify-center rounded-md border border-transparent bg-red-500 text-white px-8 py-3 text-base font-medium hover:bg-red-600 hover:text-white md:py-3 md:px-10 md:text-lg"}," Delete "),t("button",{onClick:x,class:"flex w-full items-center justify-center rounded-md border border-transparent bg-gray-400 px-8 font-medium text-white hover:bg-gray-600 hover:text-white md:py-3 md:px-10 md:text-lg ml-2"}," Cancel ")]),_:1},8,["modalOpen"])],64))}});export{xe as _};
