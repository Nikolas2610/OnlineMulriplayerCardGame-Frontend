import{_ as B}from"./DeckForm.vue_vue_type_script_setup_true_lang.53bb9b32.js";import{M as b}from"./MyTitle.f241421f.js";import{a as y}from"./axiosUser.fe64fb1c.js";import{M as O}from"./Modal.97e016a9.js";import{d as P,a as A,a3 as j,u as F,e as s,b as I,o as a,c as o,h as e,i as h,w as i,k as x,G as w,H as D,B as v}from"./index.afe561d7.js";const L={class:"w-full overflow-x-auto px-4"},R={key:0},U={class:"mx-auto mt-4"},G={class:"flex flex-col"},H={class:"overflow-x-auto shadow-md sm:rounded-lg"},Y={class:"inline-block min-w-full align-middle"},q={class:"overflow-hidden"},z={class:"min-w-full divide-y table-fixed divide-gray-700"},J={class:"bg-gray-700"},K=e("th",{scope:"col",class:"p-4"},[e("span",{class:"sr-only"},"Edit")],-1),Q={class:"divide-y bg-dark divide-gray-700"},W={class:"py-4 px-6 text-sm font-medium whitespace-nowrap text-white"},X={class:"py-4 px-6 text-sm font-medium whitespace-nowrap text-white"},Z={class:"py-4 px-6 text-sm font-medium whitespace-nowrap text-white"},ee={class:"py-4 px-6 text-sm font-medium text-right whitespace-nowrap"},te=["onClick"],se=["onClick"],ae={key:1},oe=e("div",null," Do you really want to delete this Deck? This process cannot be undone ",-1),ue=P({__name:"DecksView",setup(le){const M=A(),C=j(),l=F(),u=s(!1),r=s([]),g=s(),m=s(null),p=s(!1),_=s("user"),S=s(["No","NAME","PRIVATE"]);I(async()=>{C.meta.admin&&(_.value=M.$state.user.role),f()});const k=()=>{u.value=!1},f=async()=>{try{const t=await y.get(`${_.value}/decks`);r.value=t.data}catch(t){console.log(t)}},E=t=>{g.value={...r.value[t]},m.value=r.value[t].id,p.value=!0},$=t=>{m.value=r.value[t].id,u.value=!0},N=async()=>{try{if(m.value){if((await y.delete(_.value==="admin"?"admin/deck":"deck",{data:{deck_id:m.value}})).data.affected===1){l.success("Deck deleted successfully"),u.value=!1,f();return}l.error("Something went wrong. Please try again later")}}catch(t){l.error(t.response.data.message)}},V=async t=>{try{if((await y.patch(_.value==="admin"?"admin/deck":"deck",t)).status===200){l.success("Deck updated successfully"),p.value=!1,f();return}l.error("Something went wrong. Please try again later")}catch(d){l.error("Something went wrong. Please try again later",d)}};return(t,d)=>(a(),o(w,null,[e("div",L,[p.value?(a(),o("div",ae,[h(b,null,{default:i(()=>[x("Edit Deck")]),_:1}),h(B,{onSendData:V,deckData:g.value,edit:!0,onCloseEditMode:d[0]||(d[0]=n=>p.value=!1)},null,8,["deckData"])])):(a(),o("div",R,[h(b,null,{default:i(()=>[x("My Decks")]),_:1}),e("div",U,[e("div",G,[e("div",H,[e("div",Y,[e("div",q,[e("table",z,[e("thead",J,[e("tr",null,[(a(!0),o(w,null,D(S.value,(n,c)=>(a(),o("th",{scope:"col",key:c,class:"py-3 px-6 text-xs font-medium tracking-wider text-left uppercase text-gray-400"},v(n),1))),128)),K])]),e("tbody",Q,[(a(!0),o(w,null,D(r.value,(n,c)=>(a(),o("tr",{class:"hover:bg-gray-700",key:`gamme_${n.id}`},[e("td",W,v(c+1),1),e("td",X,v(n.name),1),e("td",Z,v(n.private?"YES":"NO"),1),e("td",ee,[e("button",{class:"text-blue-500 hover:underline",onClick:T=>E(c)}," View Details ",8,te),e("button",{class:"text-red-500 hover:underline ml-2",onClick:T=>$(c)}," Delete ",8,se)])]))),128))])])])])])])])]))]),h(O,{modalOpen:u.value,onCloseModal:k},{modal_header:i(()=>[x(" Are you sure? ")]),body:i(()=>[oe]),modal_footer:i(()=>[e("button",{onClick:N,class:"flex w-full items-center justify-center rounded-md border border-transparent bg-red-500 text-white px-8 py-3 text-base font-medium hover:bg-red-600 hover:text-white md:py-3 md:px-10 md:text-lg"}," Delete "),e("button",{onClick:k,class:"flex w-full items-center justify-center rounded-md border border-transparent bg-gray-400 px-8 py-3 text-base font-medium text-white hover:bg-gray-600 hover:text-white md:py-3 md:px-10 md:text-lg ml-2"}," Cancel ")]),_:1},8,["modalOpen"])],64))}});export{ue as _};
