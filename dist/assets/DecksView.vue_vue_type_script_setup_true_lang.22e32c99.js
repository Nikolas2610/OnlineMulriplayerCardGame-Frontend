import{_ as T}from"./DeckForm.vue_vue_type_script_setup_true_lang.0945f798.js";import{M as D}from"./MyTitle.99ada904.js";import{a as k}from"./axiosUser.5ea6112f.js";import{a as O,M as P}from"./ModalSecondaryButton.1ba37829.js";import{d as A,a as I,a4 as j,u as F,r as o,b as L,o as l,c as n,i as e,j as s,l as a,m as _,H as w,I as b,C as h}from"./index.5fcca771.js";import{_ as R}from"./Flex.vue_vue_type_script_setup_true_lang.cc6ea895.js";import{_ as U}from"./BackButton.vue_vue_type_script_setup_true_lang.f2c1a87c.js";import{_ as H}from"./ModalPrimaryButton.vue_vue_type_script_setup_true_lang.0bb71771.js";const Y={class:"w-full overflow-x-auto px-4"},q={key:0},z={class:"mx-auto mt-4"},G={class:"flex flex-col"},J={class:"overflow-x-auto shadow-md sm:rounded-lg"},K={class:"inline-block min-w-full align-middle"},Q={class:"overflow-hidden"},W={class:"min-w-full divide-y table-fixed divide-gray-700"},X={class:"bg-gray-700"},Z=e("th",{scope:"col",class:"p-4"},[e("span",{class:"sr-only"},"Edit")],-1),ee={class:"divide-y bg-dark divide-gray-700"},te={class:"py-4 px-6 text-sm font-medium whitespace-nowrap text-white"},se={class:"py-4 px-6 text-sm font-medium whitespace-nowrap text-white"},ae={class:"py-4 px-6 text-sm font-medium whitespace-nowrap text-white"},oe={class:"py-4 px-6 text-sm font-medium text-right whitespace-nowrap"},le=["onClick"],ne=["onClick"],ce={key:1},re=e("div",null," Do you really want to delete this Deck? This process cannot be undone ",-1),ye=A({__name:"DecksView",setup(de){const M=I(),C=j(),c=F(),m=o(!1),d=o([]),x=o(),p=o(null),f=o(!1),v=o("user"),$=o(["No","NAME","PRIVATE"]);L(async()=>{C.meta.admin&&(v.value=M.$state.user.role),y()});const g=()=>{m.value=!1},y=async()=>{try{const t=await k.get(`${v.value}/decks`);d.value=t.data}catch{}},S=t=>{x.value={...d.value[t]},p.value=d.value[t].id,f.value=!0},B=t=>{p.value=d.value[t].id,m.value=!0},E=async()=>{try{if(p.value){if((await k.delete(v.value==="admin"?"admin/deck":"deck",{data:{deck_id:p.value}})).data.affected===1){c.success("Deck deleted successfully"),m.value=!1,y();return}c.error("Something went wrong. Please try again later")}}catch(t){c.error(t.response.data.message)}},N=async t=>{try{if((await k.patch(v.value==="admin"?"admin/deck":"deck",t)).status===200){c.success("Deck updated successfully"),f.value=!1,y();return}c.error("Something went wrong. Please try again later")}catch(i){c.error("Something went wrong. Please try again later",i)}};return(t,i)=>(l(),n(w,null,[e("div",Y,[f.value?(l(),n("div",ce,[s(R,{justify:"between"},{default:a(()=>[s(D,null,{default:a(()=>[_("Edit Deck")]),_:1}),s(U,{title:"Back to Decks",onClick:i[0]||(i[0]=r=>f.value=!1)})]),_:1}),s(T,{onSendData:N,deckData:x.value,edit:!0},null,8,["deckData"])])):(l(),n("div",q,[s(D,null,{default:a(()=>[_("My Decks")]),_:1}),e("div",z,[e("div",G,[e("div",J,[e("div",K,[e("div",Q,[e("table",W,[e("thead",X,[e("tr",null,[(l(!0),n(w,null,b($.value,(r,u)=>(l(),n("th",{scope:"col",key:u,class:"py-3 px-6 text-xs font-medium tracking-wider text-left uppercase text-gray-400"},h(r),1))),128)),Z])]),e("tbody",ee,[(l(!0),n(w,null,b(d.value,(r,u)=>(l(),n("tr",{class:"hover:bg-gray-700",key:`gamme_${r.id}`},[e("td",te,h(u+1),1),e("td",se,h(r.name),1),e("td",ae,h(r.private?"YES":"NO"),1),e("td",oe,[e("button",{class:"text-blue-500 hover:underline",onClick:V=>S(u)}," View Details ",8,le),e("button",{class:"text-red-500 hover:underline ml-2",onClick:V=>B(u)}," Delete ",8,ne)])]))),128))])])])])])])])]))]),s(P,{modalOpen:m.value,onCloseModal:g},{modal_header:a(()=>[_(" Are you sure? ")]),body:a(()=>[re]),modal_footer:a(()=>[s(O,{onClick:g},{default:a(()=>[_(" Close ")]),_:1}),s(H,{onClick:E,deleteButton:!0},{default:a(()=>[_(" Delete ")]),_:1})]),_:1},8,["modalOpen"])],64))}});export{ye as _};
