import{M as y}from"./MyTitle.a9f64cba.js";import{M as D}from"./Modal.e69d8fa5.js";import{d as E,a3 as S,a as B,e as u,b as N,o,c as a,h as t,j as p,i as n,w as d,k as m,G as _,H as v,B as l,K as O}from"./index.7f897f5c.js";import{u as V}from"./GameStore.e979d389.js";import{P as R}from"./PreLoader.8530dddc.js";import{_ as j}from"./GameForm.vue_vue_type_script_setup_true_lang.07e75675.js";import{_ as A}from"./CheckBoxField.vue_vue_type_script_setup_true_lang.93815fae.js";import{_ as P}from"./BackButton.vue_vue_type_script_setup_true_lang.a1af613e.js";const T={class:"w-full overflow-x-auto px-4"},I={key:0},L={key:0,class:"mx-auto mt-4"},U={class:"flex flex-col"},Y={class:"overflow-x-auto shadow-md sm:rounded-lg"},H={class:"inline-block min-w-full align-middle"},K={class:"overflow-hidden"},X={class:"min-w-full divide-y table-fixed divide-gray-700"},q={class:"bg-gray-700"},z=t("th",{scope:"col",class:"p-4"},[t("span",{class:"sr-only"},"Edit")],-1),J={class:"divide-y bg-dark divide-gray-700"},Q={class:"py-4 px-6 text-sm font-medium whitespace-nowrap text-white"},W={class:"py-4 px-6 text-sm font-medium whitespace-nowrap text-white"},Z={class:"py-4 px-6 text-sm font-medium whitespace-nowrap text-white"},ee={class:"py-4 px-6 text-sm font-medium whitespace-nowrap text-white"},te=t("span",{class:"text-primary"},"X",-1),se={class:"py-4 px-6 text-sm font-medium whitespace-nowrap text-white"},oe={class:"py-4 px-6 text-sm font-medium text-right whitespace-nowrap"},ae=["onClick"],le=["onClick"],ie={key:1},ne=t("div",null," Do you really want to delete this game? This process cannot be undone ",-1),xe=E({__name:"GamesView",setup(de){const e=V(),w=S(),b=B(),g=u("user"),c=u(!1),f=u(null),k=u(["No","NAME","PLAYERS","GRID","PRIVATE"]);N(async()=>{w.meta.admin&&(g.value=b.$state.user.role,e.setUserRole("admin")),e.fetchGames(),e.editGame=!1,e.stepForm.value=1});const h=()=>{c.value=!1},G=x=>{f.value=e.games[x].id,c.value=!0},F=async()=>{e._delete(f.value).finally(()=>{c.value=!1})},C=async()=>{e.stepForm.submitted.indexOf(!0)!==-1&&await e.fetchGames(),e.editGame=!1,e.stepForm.value=1},M=async()=>{e.stepForm.change[e.stepForm.value-1]?e._update():e.stepForm.value===e.stepForm.change.length?(e.stepForm.submitted.indexOf(!0)!==-1&&await e.fetchGames(),e.stepForm.value=1,e.editGame=!1):e.stepForm.value++};return(x,i)=>(o(),a(_,null,[t("div",T,[p(e).editGame?(o(),a("div",ie,[n(A,{justify:"between"},{default:d(()=>[n(y,null,{default:d(()=>[m("Edit Game")]),_:1}),n(P,{title:"Back to Games",onClick:i[0]||(i[0]=s=>C())})]),_:1}),n(j,{onSubmit:i[1]||(i[1]=s=>M())})])):(o(),a("div",I,[n(y,null,{default:d(()=>[m("My Games")]),_:1}),p(e).loading?(o(),O(R,{key:1})):(o(),a("div",L,[t("div",U,[t("div",Y,[t("div",H,[t("div",K,[t("table",X,[t("thead",q,[t("tr",null,[(o(!0),a(_,null,v(k.value,(s,r)=>(o(),a("th",{scope:"col",key:r,class:"py-3 px-6 text-xs font-medium tracking-wider text-left uppercase text-gray-400"},l(s),1))),128)),z])]),t("tbody",J,[(o(!0),a(_,null,v(p(e).games,(s,r)=>(o(),a("tr",{class:"hover:bg-gray-700",key:`game_${s.id}`},[t("td",Q,l(r+1),1),t("td",W,l(s.name),1),t("td",Z,l(s.min_players)+" - "+l(s.max_players),1),t("td",ee,[m(l(s.grid_rows)+" ",1),te,m(" "+l(s.grid_cols),1)]),t("td",se,l(s.private?"YES":"NO"),1),t("td",oe,[t("button",{class:"text-blue-500 hover:underline",onClick:$=>p(e).toggleEditGame(r)}," View Details ",8,ae),t("button",{class:"text-red-500 hover:underline ml-2",onClick:$=>G(r)}," Delete ",8,le)])]))),128))])])])])])])]))]))]),n(D,{modalOpen:c.value,onCloseModal:h},{modal_header:d(()=>[m(" Are you sure? ")]),body:d(()=>[ne]),modal_footer:d(()=>[t("button",{onClick:i[2]||(i[2]=s=>F()),class:"flex w-full items-center justify-center rounded-md border border-transparent bg-red-500 text-white px-8 py-3 text-base font-medium hover:bg-red-600 hover:text-white md:py-3 md:px-10 md:text-lg"}," Delete "),t("button",{onClick:h,class:"flex w-full items-center justify-center rounded-md border border-transparent bg-gray-400 px-8 font-medium text-white hover:bg-gray-600 hover:text-white md:py-3 md:px-10 md:text-lg ml-2"}," Cancel ")]),_:1},8,["modalOpen"])],64))}});export{xe as _};
