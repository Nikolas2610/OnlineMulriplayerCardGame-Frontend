import{d as V,o as l,c as n,H as h,m as _,C as b,G as g,i as t,r as c,u as z,p as F,q as M,w as I,E as y,J as O,Z as P,j as u,l as m,I as D,k as S,D as $,Y as T,e as q}from"./index.0569243c.js";import{a as A,M as H}from"./ModalSecondaryButton.402126a7.js";import{a as L}from"./axiosUser.404ec7b4.js";import{l as B}from"./helpers.2772eae0.js";import{_ as G}from"./PrimaryButton.vue_vue_type_script_setup_true_lang.cc8355cb.js";import{_ as J}from"./Flex.vue_vue_type_script_setup_true_lang.9a23ffe6.js";const Y=["type","disabled"],Z={key:0,class:"animate-spin -ml-1 h-7 w-7 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},K=t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),Q=t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),W=[K,Q],X=V({__name:"SecondaryButton",props:{type:{type:String,default:"button"},width:{type:String,default:"52"},title:{type:String,required:!0},loading:{type:Boolean,default:!1},disable:{type:Boolean,default:!1}},setup(r){return(x,i)=>(l(),n("button",{class:g(["flex items-center justify-center rounded-md border border-transparent bg-black text-white px-8 py-2 text-base font-medium hover:bg-opacity-80 hover:text-white md:px-10 md:text-base transition duration-150",[`w-${r.width}`,r.disable?"cursor-not-allowed bg-opacity-50":"cursor-pointer"]]),type:r.type==="button"?"button":"submit",disabled:r.disable},[r.loading?(l(),n("svg",Z,W)):(l(),n(h,{key:1},[_(b(r.title),1)],64))],10,Y))}}),ee=["onSubmit"],te=t("label",{for:"name",class:"block text-lg font-medium"},"Name",-1),se={class:"mt-1"},ae={class:"mt-4 flex"},oe=t("label",{for:"private",class:"block text-lg font-medium mr-2"},"Private",-1),le=t("h1",{class:"mt-4 text-lg font-medium"},"Card List:",-1),ne={class:"mt-4 grid grid-cols-8 gap-2 px-4 py-8 border rounded-lg shadow-lg"},re=["src"],de=t("label",{for:"role",class:"block text-sm font-medium"},"Role",-1),ie=t("option",{value:"user"},"User",-1),ce=t("option",{value:"public"},"Public",-1),ue=[ie,ce],me={key:0,class:"grid grid-cols-4 mt-4 gap-2 max-h-96 overflow-y-scroll"},pe=["onClick"],ve=["src"],ke=V({__name:"DeckForm",props:["successResponse","deckData","edit"],emits:["sendData"],setup(r,{emit:x}){const i=r,p=c("user"),v=c(!1),f=c(),d=c([]),j=z(),s=c({name:"",private:!1,cards:[]});F(()=>{i.deckData&&(s.value={...i.deckData},s.value.cards=[...i.deckData.cards],s.value&&s.value.cards.forEach(a=>{d.value.push(a.id)}))});const k=()=>{v.value=!1},N=async()=>{await w(),v.value=!0},w=async()=>{var a;try{const o=await L.get(`card/${p.value}`);f.value=o.data,((a=f.value)==null?void 0:a.length)===0&&(j.warning("First you have to create card before choose cards for the deck"),v.value=!1,q.push({name:"create-card"}))}catch{}},C=a=>d.value.includes(a),U=a=>{const o=s.value.cards.findIndex(e=>e.id===a.id);o>=0?(d.value=d.value.filter(e=>e!==a.id),s.value.cards.splice(o,1)):(d.value.push(a.id),s.value.cards.push(a))},E=()=>{x("sendData",s.value)},R=()=>{s.value.name="",s.value.private=!1,s.value.cards=[],d.value=[]};return M(()=>p.value,a=>{w()}),M(()=>i.successResponse,a=>{a===1&&R()}),(a,o)=>(l(),n(h,null,[s.value?(l(),n("form",{key:0,class:"mt-10 px-4 py-8",onSubmit:I(E,["prevent"])},[t("div",null,[te,t("div",se,[y(t("input",{id:"name",type:"text","onUpdate:modelValue":o[0]||(o[0]=e=>s.value.name=e),class:"block w-full appearance-none rounded-md border border-gray-300 px-3 py-2 placeholder-gray-400 shadow-sm focus:border-secondary focus:outline-none sm:text-lg"},null,512),[[O,s.value.name]])])]),t("div",ae,[oe,y(t("input",{id:"private",type:"checkbox","onUpdate:modelValue":o[1]||(o[1]=e=>s.value.private=e),class:""},null,512),[[P,s.value.private]])]),u(J,{justify:"center",gap:4},{default:m(()=>[u(X,{title:"Edit cards deck",onClick:N}),u(G,{title:"Submit",type:"submit"})]),_:1}),le,t("div",ne,[(l(!0),n(h,null,D(s.value.cards,e=>(l(),n("div",{class:"col-span-1 flex justify-center items-center flex-col gap-2",key:`sel-${e.id}`},[t("img",{src:S(B)(e.image),class:"w-32 max-h-52"},null,8,re),t("div",null,b(e.name),1)]))),128))])],40,ee)):$("",!0),u(H,{modalOpen:v.value,onCloseModal:k},{modal_header:m(()=>[_(" Add or Remove Cards ")]),body:m(()=>[t("div",null,[de,y(t("select",{id:"role","onUpdate:modelValue":o[2]||(o[2]=e=>p.value=e),class:"block w-full appearance-none rounded-md border border-gray-300 px-3 py-2 placeholder-gray-400 shadow-sm focus:border-secondary focus:outline-none sm:text-sm"},ue,512),[[T,p.value]])]),f.value?(l(),n("div",me,[(l(!0),n(h,null,D(f.value,e=>(l(),n("div",{class:g(["col-span-1 flex justify-center items-center flex-col cursor-pointer hover:bg-secondary hover:text-white rounded-lg p-2 transition duration-300",C(e.id)?"bg-primary":""]),onClick:fe=>U(e),key:e.id},[t("img",{src:S(B)(e.image),class:"w-32 max-h-52"},null,8,ve),t("div",{class:g(["pt-2",C(e.id)?"text-white":""])},b(e.name),3)],10,pe))),128))])):$("",!0)]),modal_footer:m(()=>[u(A,{onClick:k},{default:m(()=>[_(" Close ")]),_:1})]),_:1},8,["modalOpen"])],64))}});export{ke as _};
