import{d as j,o as l,c as r,H as _,m as b,C as k,G as w,i as t,r as i,u as I,p as L,q as $,w as O,E as x,J as T,Z as q,j as f,l as m,I as B,k as V,D as A,Y as H,L as P,e as G}from"./index.34c63cb3.js";import{a as J,M as Y}from"./ModalSecondaryButton.bf7222f6.js";import{a as Z}from"./axiosUser.2076009c.js";import{l as N}from"./helpers.414745e0.js";import{_ as K}from"./PrimaryButton.vue_vue_type_script_setup_true_lang.a5354f07.js";import{_ as Q}from"./Flex.vue_vue_type_script_setup_true_lang.afc9e6fc.js";import{_ as W}from"./Alert.vue_vue_type_script_setup_true_lang.9caa4906.js";const X=["type","disabled"],ee={key:0,class:"animate-spin -ml-1 h-7 w-7 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},te=t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),ae=t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),se=[te,ae],oe=j({__name:"SecondaryButton",props:{type:{type:String,default:"button"},width:{type:String,default:"52"},title:{type:String,required:!0},loading:{type:Boolean,default:!1},disable:{type:Boolean,default:!1}},setup(n){return(C,p)=>(l(),r("button",{class:w(["flex items-center justify-center rounded-md border border-transparent bg-black text-white px-8 py-2 text-base font-medium hover:bg-opacity-80 hover:text-white md:px-10 md:text-base transition duration-150",[`w-${n.width}`,n.disable?"cursor-not-allowed bg-opacity-50":"cursor-pointer"]]),type:n.type==="button"?"button":"submit",disabled:n.disable},[n.loading?(l(),r("svg",ee,se)):(l(),r(_,{key:1},[b(k(n.title),1)],64))],10,X))}}),le=["onSubmit"],re=t("label",{for:"name",class:"block text-lg font-medium"},"Name",-1),ne={class:"mt-1"},de={class:"mt-4 flex"},ie=t("label",{for:"private",class:"block text-lg font-medium mr-2"},"Private",-1),ce=t("h1",{class:"mt-4 text-lg font-medium"},"Card List:",-1),ue={class:"mt-4 grid grid-cols-8 gap-2 px-4 py-8 border rounded-lg shadow-lg"},me=["src"],pe=t("label",{for:"role",class:"block text-sm font-medium"},"Role",-1),ve=t("option",{value:"user"},"User",-1),fe=t("option",{value:"public"},"Public",-1),he=[ve,fe],ye={key:0,class:"grid grid-cols-4 mt-4 gap-2 max-h-96 overflow-y-scroll"},_e=["onClick"],be=["src"],$e=j({__name:"DeckForm",props:["successResponse","deckData","edit"],emits:["sendData"],setup(n,{emit:C}){const p=n,h=i("user"),g=i(!1),c=i(),u=i([]),M=I(),y=i([]),v=i([]),a=i({name:"",private:!1,cards:[]});L(async()=>{await E(),p.deckData&&(a.value={...p.deckData},a.value.cards=[...p.deckData.cards],a.value&&a.value.cards.forEach(s=>{u.value.push(s.id)}))});const D=()=>{g.value=!1},U=async()=>{v.value.length===0&&y.value.length===0?(M.warning("First you have to create card before choose cards for the deck"),G.push({name:"create-card"})):g.value=!0},E=async()=>{var s,o;try{const e=await Z.get("card");if(e.status===200){if(v.value=(s=e.data.userCards)!=null?s:[],y.value=(o=e.data.publicCards)!=null?o:[],v.value.length>0){c.value=v.value;return}if(y.value.length>0){h.value="public";return}}}catch{M.error("Failed to load the cards")}},S=s=>u.value.includes(s),F=s=>{const o=a.value.cards.findIndex(e=>e.id===s.id);o>=0?(u.value=u.value.filter(e=>e!==s.id),a.value.cards.splice(o,1)):(u.value.push(s.id),a.value.cards.push(s))},R=()=>{C("sendData",a.value)},z=()=>{a.value.name="",a.value.private=!1,a.value.cards=[],u.value=[]};return $(()=>h.value,s=>{var o,e;s==="user"?c.value=(o=v.value)!=null?o:[]:c.value=(e=y.value)!=null?e:[]}),$(()=>p.successResponse,s=>{s===1&&z()}),(s,o)=>(l(),r(_,null,[a.value?(l(),r("form",{key:0,class:"mt-10 px-4 py-8",onSubmit:O(R,["prevent"])},[t("div",null,[re,t("div",ne,[x(t("input",{id:"name",type:"text","onUpdate:modelValue":o[0]||(o[0]=e=>a.value.name=e),class:"block w-full appearance-none rounded-md border border-gray-300 px-3 py-2 placeholder-gray-400 shadow-sm focus:border-secondary focus:outline-none sm:text-lg"},null,512),[[T,a.value.name]])])]),t("div",de,[ie,x(t("input",{id:"private",type:"checkbox","onUpdate:modelValue":o[1]||(o[1]=e=>a.value.private=e),class:""},null,512),[[q,a.value.private]])]),f(Q,{justify:"center",gap:4},{default:m(()=>[f(oe,{title:"Edit cards deck",onClick:U}),f(K,{title:"Submit",type:"submit"})]),_:1}),ce,t("div",ue,[(l(!0),r(_,null,B(a.value.cards,e=>(l(),r("div",{class:"col-span-1 flex justify-center items-center flex-col gap-2",key:`sel-${e.id}`},[t("img",{src:V(N)(e.image),class:"w-32 max-h-52"},null,8,me),t("div",null,k(e.name),1)]))),128))])],40,le)):A("",!0),f(Y,{modalOpen:g.value,onCloseModal:D},{modal_header:m(()=>[b(" Add or Remove Cards ")]),body:m(()=>{var e;return[t("div",null,[pe,x(t("select",{id:"role","onUpdate:modelValue":o[2]||(o[2]=d=>h.value=d),class:"block w-full appearance-none rounded-md border border-gray-300 px-3 py-2 placeholder-gray-400 shadow-sm focus:border-secondary focus:outline-none sm:text-sm"},he,512),[[H,h.value]])]),c.value&&((e=c.value)==null?void 0:e.length)>0?(l(),r("div",ye,[(l(!0),r(_,null,B(c.value,d=>(l(),r("div",{class:w(["col-span-1 flex justify-center items-center flex-col cursor-pointer hover:bg-secondary hover:text-white rounded-lg p-2 transition duration-300",S(d.id)?"bg-primary":""]),onClick:ge=>F(d),key:d.id},[t("img",{src:V(N)(d.image),class:"w-32 max-h-52"},null,8,be),t("div",{class:w(["pt-2",S(d.id)?"text-white":""])},k(d.name),3)],10,_e))),128))])):(l(),P(W,{key:1,class:"my-4"},{default:m(()=>[b("No available cards")]),_:1}))]}),modal_footer:m(()=>[f(J,{onClick:D},{default:m(()=>[b(" Close ")]),_:1})]),_:1},8,["modalOpen"])],64))}});export{$e as _};
