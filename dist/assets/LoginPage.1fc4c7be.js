import{d as L,u as b,a as C,r as w,b as $,e as g,f as B,g as S,h as V,o as c,c as d,i as e,w as E,j as m,k as r,l as j,m as v}from"./index.2280b556.js";import{u as M,r as f,e as N}from"./index.esm.9587f06c.js";import{_ as h}from"./InputField.vue_vue_type_script_setup_true_lang.619738aa.js";import{s as P}from"./helpers.6a9446fd.js";const T={class:"flex min-h-full flex-col justify-center py-12 sm:px-6 lg:px-8 bg-dark one-page"},U={class:"container py-20"},z=e("div",{class:"sm:mx-auto sm:w-full sm:max-w-lg"},[e("h2",{class:"mt-6 text-center text-3xl font-bold tracking-tight text-white"},[v(" Sign in to our"),e("br"),e("span",{class:"text-primary"},"Creative Gave")])],-1),A={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},F={class:"bg-primary py-8 px-4 shadow sm:rounded-lg sm:px-10"},G={class:"flex items-center justify-between"},R={class:"text-sm"},q={type:"submit",class:"mt-6 btn-black"},D={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},H=e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),I=e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),K=[H,I],O={key:1},Z=L({__name:"LoginPage",setup(Y){const l=b(),s=C(),a=w("");$(()=>{s.authToken&&g.push({name:"home"}),window.addEventListener("keydown",p)}),B(()=>{window.removeEventListener("keydown",p)});const p=t=>{a.value+=t.key,a.value==="asdf"&&(s.userLogin.email="player@omcg.com",s.userLogin.password="CardGame-0"),(a.value.length>3||t.key==="Control")&&(a.value="")},u=w(!1),_=S(()=>({email:{required:f,email:N},password:{required:f}})),n=M(_,s.userLoginCredentials),x=async()=>{if(u.value=!0,await n.value.$validate(),n.value.$error)l.error(`Login error!
Please complete correct the form`);else{const t=await s.login();t==="success"?(P(s.user.id),y(),n.value.$reset(),g.push({name:"lobby"}),l.success("You have been successfully login!")):l.error(`Login error!
${t}`)}u.value=!1},y=()=>{s.userLogin.email="",s.userLogin.password=""};return(t,o)=>{const k=V("RouterLink");return c(),d("div",T,[e("div",U,[z,e("div",A,[e("div",F,[e("form",{class:"space-y-6",onSubmit:o[2]||(o[2]=E(i=>x(),["prevent"]))},[e("div",null,[m(h,{title:"Email Address",input:r(s).userLogin.email,errors:r(n).email.$errors,type:"email",class:"text-white",onChange:o[0]||(o[0]=i=>r(s).userLogin.email=i)},null,8,["input","errors"])]),e("div",null,[m(h,{title:"Password",input:r(s).$state.userLogin.password,errors:r(n).password.$errors,type:"password",class:"text-white",onChange:o[1]||(o[1]=i=>r(s).$state.userLogin.password=i)},null,8,["input","errors"])]),e("div",G,[e("div",R,[m(k,{to:{name:"forgot-password"},class:"font-medium text-white hover:text-secondary"},{default:j(()=>[v("Forgot your password?")]),_:1})])]),e("div",null,[e("button",q,[u.value?(c(),d("svg",D,K)):(c(),d("div",O,"Login"))])])],32)])])])])}}});export{Z as default};
