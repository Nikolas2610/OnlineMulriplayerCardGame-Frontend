import{u as Te,T as E,H as Ft,R as Qe,M as Vt,s as ce}from"./socket.f2971814.js";import{d as oe,g as We,o as w,K as P,w as h,i as _,k as z,h as u,j as i,c as T,F as O,_ as Ht,e as U,n as Xe,G as J,H as ne,B as Z,C as j,$ as _n,U as xn,a0 as Cn,a1 as kn,L as Sn,b as gt,V as we,a2 as Dn,a as zt,O as En,m as an,Z as on,D as Tn,I as In,a3 as $n,u as Mn,r as bt,a4 as An}from"./index.7f897f5c.js";import{_ as C,a as On,b as wt}from"./CheckBoxField.vue_vue_type_script_setup_true_lang.93815fae.js";import{o as Pn,a as Nn,M as Gn}from"./Modal.e69d8fa5.js";import{_ as Ln}from"./_plugin-vue_export-helper.cdc0426e.js";import{_ as zn}from"./BackButton.vue_vue_type_script_setup_true_lang.a1af613e.js";import{l as ut}from"./Function.3ea76856.js";import{D as Rn}from"./DeckType.enum.90a9c7f8.js";const jn=u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 focus:outline-none",viewBox:"0 0 16 16"},[u("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3v-3z"})],-1),Un=["disabled"],Bn={key:0,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 focus:outline-none",viewBox:"0 0 16 16"},Fn=u("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"},null,-1),Vn=[Fn],Hn={key:1,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 focus:outline-none",viewBox:"0 0 16 16"},Yn=u("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"},null,-1),Zn=[Yn],Wn=["disabled"],Xn=u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 focus:outline-none",viewBox:"0 0 16 16"},[u("path",{d:"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"}),u("path",{"fill-rule":"evenodd",d:"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"})],-1),qn=u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 focus:outline-none",viewBox:"0 0 16 16"},[u("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.5 5A1.5 1.5 0 0 0 5 6.5v3A1.5 1.5 0 0 0 6.5 11h3A1.5 1.5 0 0 0 11 9.5v-3A1.5 1.5 0 0 0 9.5 5h-3z"})],-1),Jn=u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 focus:outline-none",viewBox:"0 0 16 16"},[u("path",{d:"M1.5 15a.5.5 0 0 0 0 1h13a.5.5 0 0 0 0-1H13V2.5A1.5 1.5 0 0 0 11.5 1H11V.5a.5.5 0 0 0-.57-.495l-7 1A.5.5 0 0 0 3 1.5V15H1.5zM11 2h.5a.5.5 0 0 1 .5.5V15h-1V2zm-2.5 8c-.276 0-.5-.448-.5-1s.224-1 .5-1 .5.448.5 1-.224 1-.5 1z"})],-1),Kn=u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 focus:outline-none",viewBox:"0 0 16 16"},[u("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-4.79-2.907L8.5 7.028V5.5a.5.5 0 0 0-.79-.407L5 7.028V5.5a.5.5 0 0 0-1 0v5a.5.5 0 0 0 1 0V8.972l2.71 1.935a.5.5 0 0 0 .79-.407V8.972l2.71 1.935A.5.5 0 0 0 12 10.5v-5a.5.5 0 0 0-.79-.407z"})],-1),Qn=u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 focus:outline-none",viewBox:"0 0 16 16"},[u("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM4.79 5.093A.5.5 0 0 0 4 5.5v5a.5.5 0 0 0 .79.407L7.5 8.972V10.5a.5.5 0 0 0 .79.407L11 8.972V10.5a.5.5 0 0 0 1 0v-5a.5.5 0 0 0-1 0v1.528L8.29 5.093a.5.5 0 0 0-.79.407v1.528L4.79 5.093z"})],-1),ea=u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 focus:outline-none",viewBox:"0 0 16 16"},[u("path",{d:"M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5z"})],-1),ta=u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 focus:outline-none",viewBox:"0 0 16 16"},[u("path",{"fill-rule":"evenodd",d:"M0 3.5A.5.5 0 0 1 .5 3H1c2.202 0 3.827 1.24 4.874 2.418.49.552.865 1.102 1.126 1.532.26-.43.636-.98 1.126-1.532C9.173 4.24 10.798 3 13 3v1c-1.798 0-3.173 1.01-4.126 2.082A9.624 9.624 0 0 0 7.556 8a9.624 9.624 0 0 0 1.317 1.918C9.828 10.99 11.204 12 13 12v1c-2.202 0-3.827-1.24-4.874-2.418A10.595 10.595 0 0 1 7 9.05c-.26.43-.636.98-1.126 1.532C4.827 11.76 3.202 13 1 13H.5a.5.5 0 0 1 0-1H1c1.798 0 3.173-1.01 4.126-2.082A9.624 9.624 0 0 0 6.444 8a9.624 9.624 0 0 0-1.317-1.918C4.172 5.01 2.796 4 1 4H.5a.5.5 0 0 1-.5-.5z"}),u("path",{d:"M13 5.466V1.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384l-2.36 1.966a.25.25 0 0 1-.41-.192zm0 9v-3.932a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384l-2.36 1.966a.25.25 0 0 1-.41-.192z"})],-1),na=u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 focus:outline-none",viewBox:"0 0 16 16"},[u("path",{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16ZM7.729 5.055A.5.5 0 0 1 8 5.5v1.886l3.21-2.293A.5.5 0 0 1 12 5.5v5a.5.5 0 0 1-.79.407L8 8.614V10.5a.5.5 0 0 1-.79.407l-3.5-2.5a.5.5 0 0 1 0-.814l3.5-2.5a.5.5 0 0 1 .519-.038Z"})],-1),aa=u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 focus:outline-none",viewBox:"0 0 16 16"},[u("path",{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16ZM4.79 5.093 8 7.386V5.5a.5.5 0 0 1 .79-.407l3.5 2.5a.5.5 0 0 1 0 .814l-3.5 2.5A.5.5 0 0 1 8 10.5V8.614l-3.21 2.293A.5.5 0 0 1 4 10.5v-5a.5.5 0 0 1 .79-.407Z"})],-1),oa=u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 focus:outline-none",viewBox:"0 0 16 16"},[u("path",{d:"M7 14s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1H7Zm4-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6Zm-5.784 6A2.238 2.238 0 0 1 5 13c0-1.355.68-2.75 1.936-3.72A6.325 6.325 0 0 0 5 9c-4 0-5 3-5 4s1 1 1 1h4.216ZM4.5 8a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z"})],-1),ra=u("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"#fff",viewBox:"0 0 16 16",class:"hover:fill-primary transition duration-300 group-hover:animate-spin h-8 w-8 focus:outline-none"},[u("path",{d:"M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492zM5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0z"}),u("path",{d:"M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52l-.094-.319zm-2.633.283c.246-.835 1.428-.835 1.674 0l.094.319a1.873 1.873 0 0 0 2.693 1.115l.291-.16c.764-.415 1.6.42 1.184 1.185l-.159.292a1.873 1.873 0 0 0 1.116 2.692l.318.094c.835.246.835 1.428 0 1.674l-.319.094a1.873 1.873 0 0 0-1.115 2.693l.16.291c.415.764-.42 1.6-1.185 1.184l-.291-.159a1.873 1.873 0 0 0-2.693 1.116l-.094.318c-.246.835-1.428.835-1.674 0l-.094-.319a1.873 1.873 0 0 0-2.692-1.115l-.292.16c-.764.415-1.6-.42-1.184-1.185l.159-.291A1.873 1.873 0 0 0 1.945 8.93l-.319-.094c-.835-.246-.835-1.428 0-1.674l.319-.094A1.873 1.873 0 0 0 3.06 4.377l-.16-.292c-.415-.764.42-1.6 1.185-1.184l.292.159a1.873 1.873 0 0 0 2.692-1.115l.094-.319z"})],-1),sa=oe({__name:"GameMasterMenu",emits:["openSettings","stopGame","leaveGame","newGame","updateTableGameStatus","showAllCards","setNextPlayer","shuffleDeck","historyMovement"],setup(n,{emit:e}){const t=Te(),a=()=>{var r,s,l;if(!t.clickCardId)return!0;const o=(s=(r=t.cards)==null?void 0:r.find(c=>c.id===t.clickCardId))==null?void 0:s.table_deck.id;return!o||((l=t.table)==null?void 0:l.status)!==E.PLAYING?!0:o===t.getJunkTableDeckId?!1:!t.dropZones.deck.some(c=>c.tableDeckId===o)};return(o,r)=>{const s=We("VTooltip");return w(),P(C,{class:"border text-white fixed bottom-32 rounded-3xl h-14 bg-dark py-0 transition duration-1000 group cursor-pointer -translate-x-[610px] hover:-translate-x-[20px] z-[2147483639]",items:"center",justify:"center"},{default:h(()=>[_(C,{class:"border-r h-full px-6 pl-10",items:"center",gap:4},{default:h(()=>{var l;return[_(C,{justify:"center",items:"center",class:"hover:text-primary duration-300 transition",onClick:r[0]||(r[0]=c=>o.$emit("newGame"))},{default:h(()=>[_(s,{distance:"22"},{popper:h(()=>[z(" New Game ")]),default:h(()=>[jn]),_:1})]),_:1}),_(C,{justify:"center",items:"center",class:"hover:text-primary duration-300 transition"},{default:h(()=>{var c,d,g,b;return[u("button",{onClick:r[1]||(r[1]=p=>{var f,v;return((f=i(t).table)==null?void 0:f.status)===i(E).PLAYING||((v=i(t).table)==null?void 0:v.status)===i(E).GAME_MASTER_EDIT?o.$emit("updateTableGameStatus",i(E).PAUSE):o.$emit("updateTableGameStatus",i(E).PLAYING)}),disabled:((c=i(t).table)==null?void 0:c.status)===i(E).FINISH||((d=i(t).table)==null?void 0:d.status)===i(E).WAITING,class:O(((g=i(t).table)==null?void 0:g.status)===i(E).FINISH||((b=i(t).table)==null?void 0:b.status)===i(E).WAITING?"cursor-not-allowed opacity-50":"")},[_(s,{distance:"22"},{popper:h(()=>[z(" Pause / Resume Game ")]),default:h(()=>{var p;return[((p=i(t).table)==null?void 0:p.status)!==i(E).PAUSE?(w(),T("svg",Bn,Vn)):(w(),T("svg",Hn,Zn))]}),_:1})],10,Un)]}),_:1}),_(C,{justify:"center",items:"center",class:"hover:text-primary duration-300 transition"},{default:h(()=>{var c,d,g,b;return[u("button",{onClick:r[2]||(r[2]=p=>{var f,v;return((f=i(t).table)==null?void 0:f.status)===i(E).PLAYING||((v=i(t).table)==null?void 0:v.status)===i(E).PAUSE?o.$emit("updateTableGameStatus",i(E).GAME_MASTER_EDIT):o.$emit("updateTableGameStatus",i(E).PLAYING)}),disabled:((c=i(t).table)==null?void 0:c.status)===i(E).FINISH||((d=i(t).table)==null?void 0:d.status)===i(E).WAITING,class:O(((g=i(t).table)==null?void 0:g.status)===i(E).FINISH||((b=i(t).table)==null?void 0:b.status)===i(E).WAITING?"cursor-not-allowed opacity-50":"")},[_(s,{distance:"22"},{popper:h(()=>[z(" Hide table from other players to edit the table ")]),default:h(()=>[Xn]),_:1})],10,Wn)]}),_:1}),_(C,{justify:"center",items:"center",class:O(["hover:text-primary duration-300 transition",((l=i(t).table)==null?void 0:l.status)===i(E).WAITING?"cursor-not-allowed opacity-50":""]),onClick:r[3]||(r[3]=c=>o.$emit("stopGame"))},{default:h(()=>[_(s,{distance:"22"},{popper:h(()=>[z(" End Game ")]),default:h(()=>[qn]),_:1})]),_:1},8,["class"]),_(C,{justify:"center",items:"center",class:"hover:text-primary duration-300 transition",onClick:r[4]||(r[4]=c=>o.$emit("leaveGame"))},{default:h(()=>[_(s,{distance:"22"},{popper:h(()=>[z(" Leave Game All Players ")]),default:h(()=>[Jn]),_:1})]),_:1})]}),_:1}),_(C,{class:"border-r h-full px-6",items:"center",gap:4},{default:h(()=>{var l,c,d,g,b,p;return[_(C,{justify:"center",items:"center",onClick:r[5]||(r[5]=f=>o.$emit("setNextPlayer",!1)),class:"hover:text-primary duration-300 transition"},{default:h(()=>[_(s,{distance:"22"},{popper:h(()=>[z(" Previous Player ")]),default:h(()=>[Kn]),_:1})]),_:1}),_(C,{justify:"center",items:"center",onClick:r[6]||(r[6]=f=>o.$emit("setNextPlayer",!0)),class:"hover:text-primary duration-300 transition"},{default:h(()=>[_(s,{distance:"22"},{popper:h(()=>[z(" Next Player ")]),default:h(()=>[Qn]),_:1})]),_:1}),_(C,{justify:"center",items:"center",class:O(["hover:text-primary duration-300 transition",((l=i(t).table)==null?void 0:l.status)===i(E).PLAYING||((c=i(t).table)==null?void 0:c.status)===i(E).PAUSE?"":"cursor-not-allowed opacity-50"]),onClick:r[7]||(r[7]=f=>{var v,x;return((v=i(t).table)==null?void 0:v.status)===i(E).PLAYING||((x=i(t).table)==null?void 0:x.status)===i(E).PAUSE?o.$emit("showAllCards"):""})},{default:h(()=>[_(s,{distance:"22"},{popper:h(()=>[z(" Show all cards to players ")]),default:h(()=>[ea]),_:1})]),_:1},8,["class"]),_(C,{justify:"center",items:"center",class:O(["hover:text-primary duration-300 transition",a()?"cursor-not-allowed opacity-50":""]),onClick:r[8]||(r[8]=f=>a()?"":o.$emit("shuffleDeck"))},{default:h(()=>[_(s,{distance:"22"},{popper:h(()=>[z(" Shuffle selected deck ")]),default:h(()=>[ta]),_:1})]),_:1},8,["class"]),_(C,{justify:"center",items:"center",class:O(["hover:text-primary duration-300 transition",((d=i(t).table)==null?void 0:d.status)===i(E).PLAYING||((g=i(t).table)==null?void 0:g.status)===i(E).GAME_MASTER_EDIT?"":"cursor-not-allowed opacity-50"]),onClick:r[9]||(r[9]=f=>{var v,x;return((v=i(t).table)==null?void 0:v.status)===i(E).PLAYING||((x=i(t).table)==null?void 0:x.status)===i(E).GAME_MASTER_EDIT?o.$emit("historyMovement",i(Ft).UNDO):""})},{default:h(()=>[_(s,{distance:"22"},{popper:h(()=>[z(" Undo Card Movement ")]),default:h(()=>[na]),_:1})]),_:1},8,["class"]),_(C,{justify:"center",items:"center",class:O(["hover:text-primary duration-300 transition",((b=i(t).table)==null?void 0:b.status)===i(E).PLAYING||((p=i(t).table)==null?void 0:p.status)===i(E).GAME_MASTER_EDIT?"":"cursor-not-allowed opacity-50"]),onClick:r[10]||(r[10]=f=>{var v,x;return((v=i(t).table)==null?void 0:v.status)===i(E).PLAYING||((x=i(t).table)==null?void 0:x.status)===i(E).GAME_MASTER_EDIT?o.$emit("historyMovement",i(Ft).REDO):""})},{default:h(()=>[_(s,{distance:"22"},{popper:h(()=>[z(" Redo Card Movement ")]),default:h(()=>[aa]),_:1})]),_:1},8,["class"])]}),_:1}),_(C,{class:"border-r h-full px-6",items:"center",gap:4},{default:h(()=>[_(C,{justify:"center",items:"center",onClick:r[11]||(r[11]=l=>o.$emit("openSettings",2)),class:"hover:text-primary duration-300 transition"},{default:h(()=>[_(s,{distance:"22"},{popper:h(()=>[z(" Open User List ")]),default:h(()=>[oa]),_:1})]),_:1})]),_:1}),_(C,{justify:"center",items:"center",class:"px-8",onClick:r[12]||(r[12]=l=>o.$emit("openSettings",1))},{default:h(()=>[_(s,{distance:"18"},{popper:h(()=>[z(" Open Game Master Settings ")]),default:h(()=>[ra]),_:1})]),_:1})]),_:1})}}});/*!
  * vue-draggable-next v2.1.0
  * (c) 2021 Anish George
  * @license MIT
  *//**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Yt(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);e&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,a)}return t}function ve(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Yt(Object(t),!0).forEach(function(a){ia(n,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Yt(Object(t)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(t,a))})}return n}function ot(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ot=function(e){return typeof e}:ot=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ot(n)}function ia(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function xe(){return xe=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a])}return n},xe.apply(this,arguments)}function la(n,e){if(n==null)return{};var t={},a=Object.keys(n),o,r;for(r=0;r<a.length;r++)o=a[r],!(e.indexOf(o)>=0)&&(t[o]=n[o]);return t}function da(n,e){if(n==null)return{};var t=la(n,e),a,o;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);for(o=0;o<r.length;o++)a=r[o],!(e.indexOf(a)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,a)||(t[a]=n[a]))}return t}var ua="1.14.0";function _e(n){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(n)}var Ce=_e(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),qe=_e(/Edge/i),Zt=_e(/firefox/i),Fe=_e(/safari/i)&&!_e(/chrome/i)&&!_e(/android/i),rn=_e(/iP(ad|od|hone)/i),ca=_e(/chrome/i)&&_e(/android/i),sn={capture:!1,passive:!1};function G(n,e,t){n.addEventListener(e,t,!Ce&&sn)}function N(n,e,t){n.removeEventListener(e,t,!Ce&&sn)}function ct(n,e){if(!!e){if(e[0]===">"&&(e=e.substring(1)),n)try{if(n.matches)return n.matches(e);if(n.msMatchesSelector)return n.msMatchesSelector(e);if(n.webkitMatchesSelector)return n.webkitMatchesSelector(e)}catch{return!1}return!1}}function fa(n){return n.host&&n!==document&&n.host.nodeType?n.host:n.parentNode}function me(n,e,t,a){if(n){t=t||document;do{if(e!=null&&(e[0]===">"?n.parentNode===t&&ct(n,e):ct(n,e))||a&&n===t)return n;if(n===t)break}while(n=fa(n))}return null}var Wt=/\s+/g;function de(n,e,t){if(n&&e)if(n.classList)n.classList[t?"add":"remove"](e);else{var a=(" "+n.className+" ").replace(Wt," ").replace(" "+e+" "," ");n.className=(a+(t?" "+e:"")).replace(Wt," ")}}function I(n,e,t){var a=n&&n.style;if(a){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(n,""):n.currentStyle&&(t=n.currentStyle),e===void 0?t:t[e];!(e in a)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),a[e]=t+(typeof t=="string"?"":"px")}}function Ge(n,e){var t="";if(typeof n=="string")t=n;else do{var a=I(n,"transform");a&&a!=="none"&&(t=a+" "+t)}while(!e&&(n=n.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(t)}function ln(n,e,t){if(n){var a=n.getElementsByTagName(e),o=0,r=a.length;if(t)for(;o<r;o++)t(a[o],o);return a}return[]}function ge(){var n=document.scrollingElement;return n||document.documentElement}function X(n,e,t,a,o){if(!(!n.getBoundingClientRect&&n!==window)){var r,s,l,c,d,g,b;if(n!==window&&n.parentNode&&n!==ge()?(r=n.getBoundingClientRect(),s=r.top,l=r.left,c=r.bottom,d=r.right,g=r.height,b=r.width):(s=0,l=0,c=window.innerHeight,d=window.innerWidth,g=window.innerHeight,b=window.innerWidth),(e||t)&&n!==window&&(o=o||n.parentNode,!Ce))do if(o&&o.getBoundingClientRect&&(I(o,"transform")!=="none"||t&&I(o,"position")!=="static")){var p=o.getBoundingClientRect();s-=p.top+parseInt(I(o,"border-top-width")),l-=p.left+parseInt(I(o,"border-left-width")),c=s+r.height,d=l+r.width;break}while(o=o.parentNode);if(a&&n!==window){var f=Ge(o||n),v=f&&f.a,x=f&&f.d;f&&(s/=x,l/=v,b/=v,g/=x,c=s+g,d=l+b)}return{top:s,left:l,bottom:c,right:d,width:b,height:g}}}function Xt(n,e,t){for(var a=Ee(n,!0),o=X(n)[e];a;){var r=X(a)[t],s=void 0;if(t==="top"||t==="left"?s=o>=r:s=o<=r,!s)return a;if(a===ge())break;a=Ee(a,!1)}return!1}function Le(n,e,t,a){for(var o=0,r=0,s=n.children;r<s.length;){if(s[r].style.display!=="none"&&s[r]!==$.ghost&&(a||s[r]!==$.dragged)&&me(s[r],t.draggable,n,!1)){if(o===e)return s[r];o++}r++}return null}function Rt(n,e){for(var t=n.lastElementChild;t&&(t===$.ghost||I(t,"display")==="none"||e&&!ct(t,e));)t=t.previousElementSibling;return t||null}function he(n,e){var t=0;if(!n||!n.parentNode)return-1;for(;n=n.previousElementSibling;)n.nodeName.toUpperCase()!=="TEMPLATE"&&n!==$.clone&&(!e||ct(n,e))&&t++;return t}function qt(n){var e=0,t=0,a=ge();if(n)do{var o=Ge(n),r=o.a,s=o.d;e+=n.scrollLeft*r,t+=n.scrollTop*s}while(n!==a&&(n=n.parentNode));return[e,t]}function ha(n,e){for(var t in n)if(!!n.hasOwnProperty(t)){for(var a in e)if(e.hasOwnProperty(a)&&e[a]===n[t][a])return Number(t)}return-1}function Ee(n,e){if(!n||!n.getBoundingClientRect)return ge();var t=n,a=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var o=I(t);if(t.clientWidth<t.scrollWidth&&(o.overflowX=="auto"||o.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(o.overflowY=="auto"||o.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return ge();if(a||e)return t;a=!0}}while(t=t.parentNode);return ge()}function pa(n,e){if(n&&e)for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function yt(n,e){return Math.round(n.top)===Math.round(e.top)&&Math.round(n.left)===Math.round(e.left)&&Math.round(n.height)===Math.round(e.height)&&Math.round(n.width)===Math.round(e.width)}var Ve;function dn(n,e){return function(){if(!Ve){var t=arguments,a=this;t.length===1?n.call(a,t[0]):n.apply(a,t),Ve=setTimeout(function(){Ve=void 0},e)}}}function ma(){clearTimeout(Ve),Ve=void 0}function un(n,e,t){n.scrollLeft+=e,n.scrollTop+=t}function cn(n){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(n).cloneNode(!0):t?t(n).clone(!0)[0]:n.cloneNode(!0)}var fe="Sortable"+new Date().getTime();function ga(){var n=[],e;return{captureAnimationState:function(){if(n=[],!!this.options.animation){var a=[].slice.call(this.el.children);a.forEach(function(o){if(!(I(o,"display")==="none"||o===$.ghost)){n.push({target:o,rect:X(o)});var r=ve({},n[n.length-1].rect);if(o.thisAnimationDuration){var s=Ge(o,!0);s&&(r.top-=s.f,r.left-=s.e)}o.fromRect=r}})}},addAnimationState:function(a){n.push(a)},removeAnimationState:function(a){n.splice(ha(n,{target:a}),1)},animateAll:function(a){var o=this;if(!this.options.animation){clearTimeout(e),typeof a=="function"&&a();return}var r=!1,s=0;n.forEach(function(l){var c=0,d=l.target,g=d.fromRect,b=X(d),p=d.prevFromRect,f=d.prevToRect,v=l.rect,x=Ge(d,!0);x&&(b.top-=x.f,b.left-=x.e),d.toRect=b,d.thisAnimationDuration&&yt(p,b)&&!yt(g,b)&&(v.top-b.top)/(v.left-b.left)===(g.top-b.top)/(g.left-b.left)&&(c=ba(v,p,f,o.options)),yt(b,g)||(d.prevFromRect=g,d.prevToRect=b,c||(c=o.options.animation),o.animate(d,v,b,c)),c&&(r=!0,s=Math.max(s,c),clearTimeout(d.animationResetTimer),d.animationResetTimer=setTimeout(function(){d.animationTime=0,d.prevFromRect=null,d.fromRect=null,d.prevToRect=null,d.thisAnimationDuration=null},c),d.thisAnimationDuration=c)}),clearTimeout(e),r?e=setTimeout(function(){typeof a=="function"&&a()},s):typeof a=="function"&&a(),n=[]},animate:function(a,o,r,s){if(s){I(a,"transition",""),I(a,"transform","");var l=Ge(this.el),c=l&&l.a,d=l&&l.d,g=(o.left-r.left)/(c||1),b=(o.top-r.top)/(d||1);a.animatingX=!!g,a.animatingY=!!b,I(a,"transform","translate3d("+g+"px,"+b+"px,0)"),this.forRepaintDummy=va(a),I(a,"transition","transform "+s+"ms"+(this.options.easing?" "+this.options.easing:"")),I(a,"transform","translate3d(0,0,0)"),typeof a.animated=="number"&&clearTimeout(a.animated),a.animated=setTimeout(function(){I(a,"transition",""),I(a,"transform",""),a.animated=!1,a.animatingX=!1,a.animatingY=!1},s)}}}}function va(n){return n.offsetWidth}function ba(n,e,t,a){return Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*a.animation}var Ae=[],_t={initializeByDefault:!0},Je={mount:function(e){for(var t in _t)_t.hasOwnProperty(t)&&!(t in e)&&(e[t]=_t[t]);Ae.forEach(function(a){if(a.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Ae.push(e)},pluginEvent:function(e,t,a){var o=this;this.eventCanceled=!1,a.cancel=function(){o.eventCanceled=!0};var r=e+"Global";Ae.forEach(function(s){!t[s.pluginName]||(t[s.pluginName][r]&&t[s.pluginName][r](ve({sortable:t},a)),t.options[s.pluginName]&&t[s.pluginName][e]&&t[s.pluginName][e](ve({sortable:t},a)))})},initializePlugins:function(e,t,a,o){Ae.forEach(function(l){var c=l.pluginName;if(!(!e.options[c]&&!l.initializeByDefault)){var d=new l(e,t,e.options);d.sortable=e,d.options=e.options,e[c]=d,xe(a,d.defaults)}});for(var r in e.options)if(!!e.options.hasOwnProperty(r)){var s=this.modifyOption(e,r,e.options[r]);typeof s<"u"&&(e.options[r]=s)}},getEventProperties:function(e,t){var a={};return Ae.forEach(function(o){typeof o.eventProperties=="function"&&xe(a,o.eventProperties.call(t[o.pluginName],e))}),a},modifyOption:function(e,t,a){var o;return Ae.forEach(function(r){!e[r.pluginName]||r.optionListeners&&typeof r.optionListeners[t]=="function"&&(o=r.optionListeners[t].call(e[r.pluginName],a))}),o}};function wa(n){var e=n.sortable,t=n.rootEl,a=n.name,o=n.targetEl,r=n.cloneEl,s=n.toEl,l=n.fromEl,c=n.oldIndex,d=n.newIndex,g=n.oldDraggableIndex,b=n.newDraggableIndex,p=n.originalEvent,f=n.putSortable,v=n.extraEventProperties;if(e=e||t&&t[fe],!!e){var x,k=e.options,m="on"+a.charAt(0).toUpperCase()+a.substr(1);window.CustomEvent&&!Ce&&!qe?x=new CustomEvent(a,{bubbles:!0,cancelable:!0}):(x=document.createEvent("Event"),x.initEvent(a,!0,!0)),x.to=s||t,x.from=l||t,x.item=o||t,x.clone=r,x.oldIndex=c,x.newIndex=d,x.oldDraggableIndex=g,x.newDraggableIndex=b,x.originalEvent=p,x.pullMode=f?f.lastPutMode:void 0;var S=ve(ve({},v),Je.getEventProperties(a,e));for(var D in S)x[D]=S[D];t&&t.dispatchEvent(x),k[m]&&k[m].call(e,x)}}var ya=["evt"],se=function(e,t){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=a.evt,r=da(a,ya);Je.pluginEvent.bind($)(e,t,ve({dragEl:y,parentEl:V,ghostEl:A,rootEl:F,nextEl:Me,lastDownEl:rt,cloneEl:H,cloneHidden:De,dragStarted:je,putSortable:Q,activeSortable:$.active,originalEvent:o,oldIndex:Ne,oldDraggableIndex:He,newIndex:ue,newDraggableIndex:Se,hideGhostForTarget:mn,unhideGhostForTarget:gn,cloneNowHidden:function(){De=!0},cloneNowShown:function(){De=!1},dispatchSortableEvent:function(l){ae({sortable:t,name:l,originalEvent:o})}},r))};function ae(n){wa(ve({putSortable:Q,cloneEl:H,targetEl:y,rootEl:F,oldIndex:Ne,oldDraggableIndex:He,newIndex:ue,newDraggableIndex:Se},n))}var y,V,A,F,Me,rt,H,De,Ne,ue,He,Se,et,Q,Pe=!1,ft=!1,ht=[],Ie,pe,xt,Ct,Jt,Kt,je,Oe,Ye,Ze=!1,tt=!1,st,te,kt=[],Mt=!1,pt=[],vt=typeof document<"u",nt=rn,Qt=qe||Ce?"cssFloat":"float",_a=vt&&!ca&&!rn&&"draggable"in document.createElement("div"),fn=function(){if(!!vt){if(Ce)return!1;var n=document.createElement("x");return n.style.cssText="pointer-events:auto",n.style.pointerEvents==="auto"}}(),hn=function(e,t){var a=I(e),o=parseInt(a.width)-parseInt(a.paddingLeft)-parseInt(a.paddingRight)-parseInt(a.borderLeftWidth)-parseInt(a.borderRightWidth),r=Le(e,0,t),s=Le(e,1,t),l=r&&I(r),c=s&&I(s),d=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+X(r).width,g=c&&parseInt(c.marginLeft)+parseInt(c.marginRight)+X(s).width;if(a.display==="flex")return a.flexDirection==="column"||a.flexDirection==="column-reverse"?"vertical":"horizontal";if(a.display==="grid")return a.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&l.float&&l.float!=="none"){var b=l.float==="left"?"left":"right";return s&&(c.clear==="both"||c.clear===b)?"vertical":"horizontal"}return r&&(l.display==="block"||l.display==="flex"||l.display==="table"||l.display==="grid"||d>=o&&a[Qt]==="none"||s&&a[Qt]==="none"&&d+g>o)?"vertical":"horizontal"},xa=function(e,t,a){var o=a?e.left:e.top,r=a?e.right:e.bottom,s=a?e.width:e.height,l=a?t.left:t.top,c=a?t.right:t.bottom,d=a?t.width:t.height;return o===l||r===c||o+s/2===l+d/2},Ca=function(e,t){var a;return ht.some(function(o){var r=o[fe].options.emptyInsertThreshold;if(!(!r||Rt(o))){var s=X(o),l=e>=s.left-r&&e<=s.right+r,c=t>=s.top-r&&t<=s.bottom+r;if(l&&c)return a=o}}),a},pn=function(e){function t(r,s){return function(l,c,d,g){var b=l.options.group.name&&c.options.group.name&&l.options.group.name===c.options.group.name;if(r==null&&(s||b))return!0;if(r==null||r===!1)return!1;if(s&&r==="clone")return r;if(typeof r=="function")return t(r(l,c,d,g),s)(l,c,d,g);var p=(s?l:c).options.group.name;return r===!0||typeof r=="string"&&r===p||r.join&&r.indexOf(p)>-1}}var a={},o=e.group;(!o||ot(o)!="object")&&(o={name:o}),a.name=o.name,a.checkPull=t(o.pull,!0),a.checkPut=t(o.put),a.revertClone=o.revertClone,e.group=a},mn=function(){!fn&&A&&I(A,"display","none")},gn=function(){!fn&&A&&I(A,"display","")};vt&&document.addEventListener("click",function(n){if(ft)return n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.stopImmediatePropagation&&n.stopImmediatePropagation(),ft=!1,!1},!0);var $e=function(e){if(y){e=e.touches?e.touches[0]:e;var t=Ca(e.clientX,e.clientY);if(t){var a={};for(var o in e)e.hasOwnProperty(o)&&(a[o]=e[o]);a.target=a.rootEl=t,a.preventDefault=void 0,a.stopPropagation=void 0,t[fe]._onDragOver(a)}}},ka=function(e){y&&y.parentNode[fe]._isOutsideThisEl(e.target)};function $(n,e){if(!(n&&n.nodeType&&n.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(n));this.el=n,this.options=e=xe({},e),n[fe]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(n.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return hn(n,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(s,l){s.setData("Text",l.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:$.supportPointer!==!1&&"PointerEvent"in window&&!Fe,emptyInsertThreshold:5};Je.initializePlugins(this,n,t);for(var a in t)!(a in e)&&(e[a]=t[a]);pn(e);for(var o in this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this));this.nativeDraggable=e.forceFallback?!1:_a,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?G(n,"pointerdown",this._onTapStart):(G(n,"mousedown",this._onTapStart),G(n,"touchstart",this._onTapStart)),this.nativeDraggable&&(G(n,"dragover",this),G(n,"dragenter",this)),ht.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),xe(this,ga())}$.prototype={constructor:$,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Oe=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,y):this.options.direction},_onTapStart:function(e){if(!!e.cancelable){var t=this,a=this.el,o=this.options,r=o.preventOnFilter,s=e.type,l=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,c=(l||e).target,d=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||c,g=o.filter;if(Aa(a),!y&&!(/mousedown|pointerdown/.test(s)&&e.button!==0||o.disabled)&&!d.isContentEditable&&!(!this.nativeDraggable&&Fe&&c&&c.tagName.toUpperCase()==="SELECT")&&(c=me(c,o.draggable,a,!1),!(c&&c.animated)&&rt!==c)){if(Ne=he(c),He=he(c,o.draggable),typeof g=="function"){if(g.call(this,e,c,this)){ae({sortable:t,rootEl:d,name:"filter",targetEl:c,toEl:a,fromEl:a}),se("filter",t,{evt:e}),r&&e.cancelable&&e.preventDefault();return}}else if(g&&(g=g.split(",").some(function(b){if(b=me(d,b.trim(),a,!1),b)return ae({sortable:t,rootEl:b,name:"filter",targetEl:c,fromEl:a,toEl:a}),se("filter",t,{evt:e}),!0}),g)){r&&e.cancelable&&e.preventDefault();return}o.handle&&!me(d,o.handle,a,!1)||this._prepareDragStart(e,l,c)}}},_prepareDragStart:function(e,t,a){var o=this,r=o.el,s=o.options,l=r.ownerDocument,c;if(a&&!y&&a.parentNode===r){var d=X(a);if(F=r,y=a,V=y.parentNode,Me=y.nextSibling,rt=a,et=s.group,$.dragged=y,Ie={target:y,clientX:(t||e).clientX,clientY:(t||e).clientY},Jt=Ie.clientX-d.left,Kt=Ie.clientY-d.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,y.style["will-change"]="all",c=function(){if(se("delayEnded",o,{evt:e}),$.eventCanceled){o._onDrop();return}o._disableDelayedDragEvents(),!Zt&&o.nativeDraggable&&(y.draggable=!0),o._triggerDragStart(e,t),ae({sortable:o,name:"choose",originalEvent:e}),de(y,s.chosenClass,!0)},s.ignore.split(",").forEach(function(g){ln(y,g.trim(),St)}),G(l,"dragover",$e),G(l,"mousemove",$e),G(l,"touchmove",$e),G(l,"mouseup",o._onDrop),G(l,"touchend",o._onDrop),G(l,"touchcancel",o._onDrop),Zt&&this.nativeDraggable&&(this.options.touchStartThreshold=4,y.draggable=!0),se("delayStart",this,{evt:e}),s.delay&&(!s.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(qe||Ce))){if($.eventCanceled){this._onDrop();return}G(l,"mouseup",o._disableDelayedDrag),G(l,"touchend",o._disableDelayedDrag),G(l,"touchcancel",o._disableDelayedDrag),G(l,"mousemove",o._delayedDragTouchMoveHandler),G(l,"touchmove",o._delayedDragTouchMoveHandler),s.supportPointer&&G(l,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(c,s.delay)}else c()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){y&&St(y),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;N(e,"mouseup",this._disableDelayedDrag),N(e,"touchend",this._disableDelayedDrag),N(e,"touchcancel",this._disableDelayedDrag),N(e,"mousemove",this._delayedDragTouchMoveHandler),N(e,"touchmove",this._delayedDragTouchMoveHandler),N(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?G(document,"pointermove",this._onTouchMove):t?G(document,"touchmove",this._onTouchMove):G(document,"mousemove",this._onTouchMove):(G(y,"dragend",this),G(F,"dragstart",this._onDragStart));try{document.selection?it(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(Pe=!1,F&&y){se("dragStarted",this,{evt:t}),this.nativeDraggable&&G(document,"dragover",ka);var a=this.options;!e&&de(y,a.dragClass,!1),de(y,a.ghostClass,!0),$.active=this,e&&this._appendGhost(),ae({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(pe){this._lastX=pe.clientX,this._lastY=pe.clientY,mn();for(var e=document.elementFromPoint(pe.clientX,pe.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(pe.clientX,pe.clientY),e!==t);)t=e;if(y.parentNode[fe]._isOutsideThisEl(e),t)do{if(t[fe]){var a=void 0;if(a=t[fe]._onDragOver({clientX:pe.clientX,clientY:pe.clientY,target:e,rootEl:t}),a&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);gn()}},_onTouchMove:function(e){if(Ie){var t=this.options,a=t.fallbackTolerance,o=t.fallbackOffset,r=e.touches?e.touches[0]:e,s=A&&Ge(A,!0),l=A&&s&&s.a,c=A&&s&&s.d,d=nt&&te&&qt(te),g=(r.clientX-Ie.clientX+o.x)/(l||1)+(d?d[0]-kt[0]:0)/(l||1),b=(r.clientY-Ie.clientY+o.y)/(c||1)+(d?d[1]-kt[1]:0)/(c||1);if(!$.active&&!Pe){if(a&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<a)return;this._onDragStart(e,!0)}if(A){s?(s.e+=g-(xt||0),s.f+=b-(Ct||0)):s={a:1,b:0,c:0,d:1,e:g,f:b};var p="matrix(".concat(s.a,",").concat(s.b,",").concat(s.c,",").concat(s.d,",").concat(s.e,",").concat(s.f,")");I(A,"webkitTransform",p),I(A,"mozTransform",p),I(A,"msTransform",p),I(A,"transform",p),xt=g,Ct=b,pe=r}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!A){var e=this.options.fallbackOnBody?document.body:F,t=X(y,!0,nt,!0,e),a=this.options;if(nt){for(te=e;I(te,"position")==="static"&&I(te,"transform")==="none"&&te!==document;)te=te.parentNode;te!==document.body&&te!==document.documentElement?(te===document&&(te=ge()),t.top+=te.scrollTop,t.left+=te.scrollLeft):te=ge(),kt=qt(te)}A=y.cloneNode(!0),de(A,a.ghostClass,!1),de(A,a.fallbackClass,!0),de(A,a.dragClass,!0),I(A,"transition",""),I(A,"transform",""),I(A,"box-sizing","border-box"),I(A,"margin",0),I(A,"top",t.top),I(A,"left",t.left),I(A,"width",t.width),I(A,"height",t.height),I(A,"opacity","0.8"),I(A,"position",nt?"absolute":"fixed"),I(A,"zIndex","100000"),I(A,"pointerEvents","none"),$.ghost=A,e.appendChild(A),I(A,"transform-origin",Jt/parseInt(A.style.width)*100+"% "+Kt/parseInt(A.style.height)*100+"%")}},_onDragStart:function(e,t){var a=this,o=e.dataTransfer,r=a.options;if(se("dragStart",this,{evt:e}),$.eventCanceled){this._onDrop();return}se("setupClone",this),$.eventCanceled||(H=cn(y),H.draggable=!1,H.style["will-change"]="",this._hideClone(),de(H,this.options.chosenClass,!1),$.clone=H),a.cloneId=it(function(){se("clone",a),!$.eventCanceled&&(a.options.removeCloneOnHide||F.insertBefore(H,y),a._hideClone(),ae({sortable:a,name:"clone"}))}),!t&&de(y,r.dragClass,!0),t?(ft=!0,a._loopId=setInterval(a._emulateDragOver,50)):(N(document,"mouseup",a._onDrop),N(document,"touchend",a._onDrop),N(document,"touchcancel",a._onDrop),o&&(o.effectAllowed="move",r.setData&&r.setData.call(a,o,y)),G(document,"drop",a),I(y,"transform","translateZ(0)")),Pe=!0,a._dragStartId=it(a._dragStarted.bind(a,t,e)),G(document,"selectstart",a),je=!0,Fe&&I(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,a=e.target,o,r,s,l=this.options,c=l.group,d=$.active,g=et===c,b=l.sort,p=Q||d,f,v=this,x=!1;if(Mt)return;function k(Re,wn){se(Re,v,ve({evt:e,isOwner:g,axis:f?"vertical":"horizontal",revert:s,dragRect:o,targetRect:r,canSort:b,fromSortable:p,target:a,completed:S,onMove:function(Bt,yn){return at(F,t,y,o,Bt,X(Bt),e,yn)},changed:D},wn))}function m(){k("dragOverAnimationCapture"),v.captureAnimationState(),v!==p&&p.captureAnimationState()}function S(Re){return k("dragOverCompleted",{insertion:Re}),Re&&(g?d._hideClone():d._showClone(v),v!==p&&(de(y,Q?Q.options.ghostClass:d.options.ghostClass,!1),de(y,l.ghostClass,!0)),Q!==v&&v!==$.active?Q=v:v===$.active&&Q&&(Q=null),p===v&&(v._ignoreWhileAnimating=a),v.animateAll(function(){k("dragOverAnimationComplete"),v._ignoreWhileAnimating=null}),v!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(a===y&&!y.animated||a===t&&!a.animated)&&(Oe=null),!l.dragoverBubble&&!e.rootEl&&a!==document&&(y.parentNode[fe]._isOutsideThisEl(e.target),!Re&&$e(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),x=!0}function D(){ue=he(y),Se=he(y,l.draggable),ae({sortable:v,name:"change",toEl:t,newIndex:ue,newDraggableIndex:Se,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),a=me(a,l.draggable,t,!0),k("dragOver"),$.eventCanceled)return x;if(y.contains(e.target)||a.animated&&a.animatingX&&a.animatingY||v._ignoreWhileAnimating===a)return S(!1);if(ft=!1,d&&!l.disabled&&(g?b||(s=V!==F):Q===this||(this.lastPutMode=et.checkPull(this,d,y,e))&&c.checkPut(this,d,y,e))){if(f=this._getDirection(e,a)==="vertical",o=X(y),k("dragOverValid"),$.eventCanceled)return x;if(s)return V=F,m(),this._hideClone(),k("revert"),$.eventCanceled||(Me?F.insertBefore(y,Me):F.appendChild(y)),S(!0);var M=Rt(t,l.draggable);if(!M||Ta(e,f,this)&&!M.animated){if(M===y)return S(!1);if(M&&t===e.target&&(a=M),a&&(r=X(a)),at(F,t,y,o,a,r,e,!!a)!==!1)return m(),t.appendChild(y),V=t,D(),S(!0)}else if(M&&Ea(e,f,this)){var L=Le(t,0,l,!0);if(L===y)return S(!1);if(a=L,r=X(a),at(F,t,y,o,a,r,e,!1)!==!1)return m(),t.insertBefore(y,L),V=t,D(),S(!0)}else if(a.parentNode===t){r=X(a);var R=0,B,ee=y.parentNode!==t,Y=!xa(y.animated&&y.toRect||o,a.animated&&a.toRect||r,f),ie=f?"top":"left",re=Xt(a,"top","top")||Xt(y,"top","top"),K=re?re.scrollTop:void 0;Oe!==a&&(B=r[ie],Ze=!1,tt=!Y&&l.invertSwap||ee),R=Ia(e,a,r,f,Y?1:l.swapThreshold,l.invertedSwapThreshold==null?l.swapThreshold:l.invertedSwapThreshold,tt,Oe===a);var le;if(R!==0){var be=he(y);do be-=R,le=V.children[be];while(le&&(I(le,"display")==="none"||le===A))}if(R===0||le===a)return S(!1);Oe=a,Ye=R;var ze=a.nextElementSibling,ke=!1;ke=R===1;var Ke=at(F,t,y,o,a,r,e,ke);if(Ke!==!1)return(Ke===1||Ke===-1)&&(ke=Ke===1),Mt=!0,setTimeout(Da,30),m(),ke&&!ze?t.appendChild(y):a.parentNode.insertBefore(y,ke?ze:a),re&&un(re,0,K-re.scrollTop),V=y.parentNode,B!==void 0&&!tt&&(st=Math.abs(B-X(a)[ie])),D(),S(!0)}if(t.contains(y))return S(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){N(document,"mousemove",this._onTouchMove),N(document,"touchmove",this._onTouchMove),N(document,"pointermove",this._onTouchMove),N(document,"dragover",$e),N(document,"mousemove",$e),N(document,"touchmove",$e)},_offUpEvents:function(){var e=this.el.ownerDocument;N(e,"mouseup",this._onDrop),N(e,"touchend",this._onDrop),N(e,"pointerup",this._onDrop),N(e,"touchcancel",this._onDrop),N(document,"selectstart",this)},_onDrop:function(e){var t=this.el,a=this.options;if(ue=he(y),Se=he(y,a.draggable),se("drop",this,{evt:e}),V=y&&y.parentNode,ue=he(y),Se=he(y,a.draggable),$.eventCanceled){this._nulling();return}Pe=!1,tt=!1,Ze=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),At(this.cloneId),At(this._dragStartId),this.nativeDraggable&&(N(document,"drop",this),N(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Fe&&I(document.body,"user-select",""),I(y,"transform",""),e&&(je&&(e.cancelable&&e.preventDefault(),!a.dropBubble&&e.stopPropagation()),A&&A.parentNode&&A.parentNode.removeChild(A),(F===V||Q&&Q.lastPutMode!=="clone")&&H&&H.parentNode&&H.parentNode.removeChild(H),y&&(this.nativeDraggable&&N(y,"dragend",this),St(y),y.style["will-change"]="",je&&!Pe&&de(y,Q?Q.options.ghostClass:this.options.ghostClass,!1),de(y,this.options.chosenClass,!1),ae({sortable:this,name:"unchoose",toEl:V,newIndex:null,newDraggableIndex:null,originalEvent:e}),F!==V?(ue>=0&&(ae({rootEl:V,name:"add",toEl:V,fromEl:F,originalEvent:e}),ae({sortable:this,name:"remove",toEl:V,originalEvent:e}),ae({rootEl:V,name:"sort",toEl:V,fromEl:F,originalEvent:e}),ae({sortable:this,name:"sort",toEl:V,originalEvent:e})),Q&&Q.save()):ue!==Ne&&ue>=0&&(ae({sortable:this,name:"update",toEl:V,originalEvent:e}),ae({sortable:this,name:"sort",toEl:V,originalEvent:e})),$.active&&((ue==null||ue===-1)&&(ue=Ne,Se=He),ae({sortable:this,name:"end",toEl:V,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){se("nulling",this),F=y=V=A=Me=H=rt=De=Ie=pe=je=ue=Se=Ne=He=Oe=Ye=Q=et=$.dragged=$.ghost=$.clone=$.active=null,pt.forEach(function(e){e.checked=!0}),pt.length=xt=Ct=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":y&&(this._onDragOver(e),Sa(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,a=this.el.children,o=0,r=a.length,s=this.options;o<r;o++)t=a[o],me(t,s.draggable,this.el,!1)&&e.push(t.getAttribute(s.dataIdAttr)||Ma(t));return e},sort:function(e,t){var a={},o=this.el;this.toArray().forEach(function(r,s){var l=o.children[s];me(l,this.options.draggable,o,!1)&&(a[r]=l)},this),t&&this.captureAnimationState(),e.forEach(function(r){a[r]&&(o.removeChild(a[r]),o.appendChild(a[r]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return me(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var a=this.options;if(t===void 0)return a[e];var o=Je.modifyOption(this,e,t);typeof o<"u"?a[e]=o:a[e]=t,e==="group"&&pn(a)},destroy:function(){se("destroy",this);var e=this.el;e[fe]=null,N(e,"mousedown",this._onTapStart),N(e,"touchstart",this._onTapStart),N(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(N(e,"dragover",this),N(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),ht.splice(ht.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!De){if(se("hideClone",this),$.eventCanceled)return;I(H,"display","none"),this.options.removeCloneOnHide&&H.parentNode&&H.parentNode.removeChild(H),De=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(De){if(se("showClone",this),$.eventCanceled)return;y.parentNode==F&&!this.options.group.revertClone?F.insertBefore(H,y):Me?F.insertBefore(H,Me):F.appendChild(H),this.options.group.revertClone&&this.animate(y,H),I(H,"display",""),De=!1}}};function Sa(n){n.dataTransfer&&(n.dataTransfer.dropEffect="move"),n.cancelable&&n.preventDefault()}function at(n,e,t,a,o,r,s,l){var c,d=n[fe],g=d.options.onMove,b;return window.CustomEvent&&!Ce&&!qe?c=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(c=document.createEvent("Event"),c.initEvent("move",!0,!0)),c.to=e,c.from=n,c.dragged=t,c.draggedRect=a,c.related=o||e,c.relatedRect=r||X(e),c.willInsertAfter=l,c.originalEvent=s,n.dispatchEvent(c),g&&(b=g.call(d,c,s)),b}function St(n){n.draggable=!1}function Da(){Mt=!1}function Ea(n,e,t){var a=X(Le(t.el,0,t.options,!0)),o=10;return e?n.clientX<a.left-o||n.clientY<a.top&&n.clientX<a.right:n.clientY<a.top-o||n.clientY<a.bottom&&n.clientX<a.left}function Ta(n,e,t){var a=X(Rt(t.el,t.options.draggable)),o=10;return e?n.clientX>a.right+o||n.clientX<=a.right&&n.clientY>a.bottom&&n.clientX>=a.left:n.clientX>a.right&&n.clientY>a.top||n.clientX<=a.right&&n.clientY>a.bottom+o}function Ia(n,e,t,a,o,r,s,l){var c=a?n.clientY:n.clientX,d=a?t.height:t.width,g=a?t.top:t.left,b=a?t.bottom:t.right,p=!1;if(!s){if(l&&st<d*o){if(!Ze&&(Ye===1?c>g+d*r/2:c<b-d*r/2)&&(Ze=!0),Ze)p=!0;else if(Ye===1?c<g+st:c>b-st)return-Ye}else if(c>g+d*(1-o)/2&&c<b-d*(1-o)/2)return $a(e)}return p=p||s,p&&(c<g+d*r/2||c>b-d*r/2)?c>g+d/2?1:-1:0}function $a(n){return he(y)<he(n)?1:-1}function Ma(n){for(var e=n.tagName+n.className+n.src+n.href+n.textContent,t=e.length,a=0;t--;)a+=e.charCodeAt(t);return a.toString(36)}function Aa(n){pt.length=0;for(var e=n.getElementsByTagName("input"),t=e.length;t--;){var a=e[t];a.checked&&pt.push(a)}}function it(n){return setTimeout(n,0)}function At(n){return clearTimeout(n)}vt&&G(document,"touchmove",function(n){($.active||Pe)&&n.cancelable&&n.preventDefault()});$.utils={on:G,off:N,css:I,find:ln,is:function(e,t){return!!me(e,t,e,!1)},extend:pa,throttle:dn,closest:me,toggleClass:de,clone:cn,index:he,nextTick:it,cancelNextTick:At,detectDirection:hn,getChild:Le};$.get=function(n){return n[fe]};$.mount=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(a){if(!a.prototype||!a.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(a));a.utils&&($.utils=ve(ve({},$.utils),a.utils)),Je.mount(a)})};$.create=function(n,e){return new $(n,e)};$.version=ua;var W=[],Ue,Ot,Pt=!1,Dt,Et,mt,Be;function Oa(){function n(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return n.prototype={dragStarted:function(t){var a=t.originalEvent;this.sortable.nativeDraggable?G(document,"dragover",this._handleAutoScroll):this.options.supportPointer?G(document,"pointermove",this._handleFallbackAutoScroll):a.touches?G(document,"touchmove",this._handleFallbackAutoScroll):G(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var a=t.originalEvent;!this.options.dragOverBubble&&!a.rootEl&&this._handleAutoScroll(a)},drop:function(){this.sortable.nativeDraggable?N(document,"dragover",this._handleAutoScroll):(N(document,"pointermove",this._handleFallbackAutoScroll),N(document,"touchmove",this._handleFallbackAutoScroll),N(document,"mousemove",this._handleFallbackAutoScroll)),en(),lt(),ma()},nulling:function(){mt=Ot=Ue=Pt=Be=Dt=Et=null,W.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,a){var o=this,r=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,l=document.elementFromPoint(r,s);if(mt=t,a||this.options.forceAutoScrollFallback||qe||Ce||Fe){Tt(t,this.options,l,a);var c=Ee(l,!0);Pt&&(!Be||r!==Dt||s!==Et)&&(Be&&en(),Be=setInterval(function(){var d=Ee(document.elementFromPoint(r,s),!0);d!==c&&(c=d,lt()),Tt(t,o.options,d,a)},10),Dt=r,Et=s)}else{if(!this.options.bubbleScroll||Ee(l,!0)===ge()){lt();return}Tt(t,this.options,Ee(l,!1),!1)}}},xe(n,{pluginName:"scroll",initializeByDefault:!0})}function lt(){W.forEach(function(n){clearInterval(n.pid)}),W=[]}function en(){clearInterval(Be)}var Tt=dn(function(n,e,t,a){if(!!e.scroll){var o=(n.touches?n.touches[0]:n).clientX,r=(n.touches?n.touches[0]:n).clientY,s=e.scrollSensitivity,l=e.scrollSpeed,c=ge(),d=!1,g;Ot!==t&&(Ot=t,lt(),Ue=e.scroll,g=e.scrollFn,Ue===!0&&(Ue=Ee(t,!0)));var b=0,p=Ue;do{var f=p,v=X(f),x=v.top,k=v.bottom,m=v.left,S=v.right,D=v.width,M=v.height,L=void 0,R=void 0,B=f.scrollWidth,ee=f.scrollHeight,Y=I(f),ie=f.scrollLeft,re=f.scrollTop;f===c?(L=D<B&&(Y.overflowX==="auto"||Y.overflowX==="scroll"||Y.overflowX==="visible"),R=M<ee&&(Y.overflowY==="auto"||Y.overflowY==="scroll"||Y.overflowY==="visible")):(L=D<B&&(Y.overflowX==="auto"||Y.overflowX==="scroll"),R=M<ee&&(Y.overflowY==="auto"||Y.overflowY==="scroll"));var K=L&&(Math.abs(S-o)<=s&&ie+D<B)-(Math.abs(m-o)<=s&&!!ie),le=R&&(Math.abs(k-r)<=s&&re+M<ee)-(Math.abs(x-r)<=s&&!!re);if(!W[b])for(var be=0;be<=b;be++)W[be]||(W[be]={});(W[b].vx!=K||W[b].vy!=le||W[b].el!==f)&&(W[b].el=f,W[b].vx=K,W[b].vy=le,clearInterval(W[b].pid),(K!=0||le!=0)&&(d=!0,W[b].pid=setInterval(function(){a&&this.layer===0&&$.active._onTouchMove(mt);var ze=W[this.layer].vy?W[this.layer].vy*l:0,ke=W[this.layer].vx?W[this.layer].vx*l:0;typeof g=="function"&&g.call($.dragged.parentNode[fe],ke,ze,n,mt,W[this.layer].el)!=="continue"||un(W[this.layer].el,ke,ze)}.bind({layer:b}),24))),b++}while(e.bubbleScroll&&p!==c&&(p=Ee(p,!1)));Pt=d}},30),vn=function(e){var t=e.originalEvent,a=e.putSortable,o=e.dragEl,r=e.activeSortable,s=e.dispatchSortableEvent,l=e.hideGhostForTarget,c=e.unhideGhostForTarget;if(!!t){var d=a||r;l();var g=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,b=document.elementFromPoint(g.clientX,g.clientY);c(),d&&!d.el.contains(b)&&(s("spill"),this.onSpill({dragEl:o,putSortable:a}))}};function jt(){}jt.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,a=e.putSortable;this.sortable.captureAnimationState(),a&&a.captureAnimationState();var o=Le(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(t,o):this.sortable.el.appendChild(t),this.sortable.animateAll(),a&&a.animateAll()},drop:vn};xe(jt,{pluginName:"revertOnSpill"});function Ut(){}Ut.prototype={onSpill:function(e){var t=e.dragEl,a=e.putSortable,o=a||this.sortable;o.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),o.animateAll()},drop:vn};xe(Ut,{pluginName:"removeOnSpill"});$.mount(new Oa);$.mount(Ut,jt);function Pa(){return typeof window<"u"?window.console:global.console}const Na=Pa();function Ga(n){const e=Object.create(null);return function(a){return e[a]||(e[a]=n(a))}}const La=/-(\w)/g,tn=Ga(n=>n.replace(La,(e,t)=>t?t.toUpperCase():""));function It(n){n.parentElement!==null&&n.parentElement.removeChild(n)}function nn(n,e,t){const a=t===0?n.children[0]:n.children[t-1].nextSibling;n.insertBefore(e,a)}function za(n,e){return Object.values(n).indexOf(e)}function Ra(n,e,t,a){if(!n)return[];const o=Object.values(n),r=e.length-a;return[...e].map((l,c)=>c>=r?o.length:o.indexOf(l))}function bn(n,e){this.$nextTick(()=>this.$emit(n.toLowerCase(),e))}function ja(n){return e=>{this.realList!==null&&this["onDrag"+n](e),bn.call(this,n,e)}}function Ua(n){return["transition-group","TransitionGroup"].includes(n)}function Ba(n){if(!n||n.length!==1)return!1;const[{type:e}]=n;return e?Ua(e.name):!1}function Fa(n,e){return e?{...e.props,...e.attrs}:n}const Nt=["Start","Add","Remove","Update","End"],Gt=["Choose","Unchoose","Sort","Filter","Clone"],Va=["Move",...Nt,...Gt].map(n=>"on"+n);let $t=null;const Ha={options:Object,list:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:n=>n},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null},component:{type:String,default:null},modelValue:{type:Array,required:!1,default:null}},Ya=oe({name:"VueDraggableNext",inheritAttrs:!1,emits:["update:modelValue","move","change",...Nt.map(n=>n.toLowerCase()),...Gt.map(n=>n.toLowerCase())],props:Ha,data(){return{transitionMode:!1,noneFunctionalComponentMode:!1,headerOffset:0,footerOffset:0,_sortable:{},visibleIndexes:[],context:{}}},render(){const n=this.$slots.default?this.$slots.default():null,e=Fa(this.$attrs,this.componentData);return n?(this.transitionMode=Ba(n),Ht(this.getTag(),e,n)):Ht(this.getTag(),e,[])},created(){this.list!==null&&this.modelValue!==null&&Na.error("list props are mutually exclusive! Please set one.")},mounted(){const n={};Nt.forEach(o=>{n["on"+o]=ja.call(this,o)}),Gt.forEach(o=>{n["on"+o]=bn.bind(this,o)});const e=Object.keys(this.$attrs).reduce((o,r)=>(o[tn(r)]=this.$attrs[r],o),{}),t=Object.assign({},e,n,{onMove:(o,r)=>this.onDragMove(o,r)});!("draggable"in t)&&(t.draggable=">*");const a=this.$el.nodeType===1?this.$el:this.$el.parentElement;this._sortable=new $(a,t),a.__draggable_component__=this,this.computeIndexes()},beforeUnmount(){try{this._sortable!==void 0&&this._sortable.destroy()}catch{}},computed:{realList(){return this.list?this.list:this.modelValue}},watch:{$attrs:{handler(n){this.updateOptions(n)},deep:!0},realList(){this.computeIndexes()}},methods:{getTag(){return this.component?We(this.component):this.tag},updateOptions(n){for(var e in n){const t=tn(e);Va.indexOf(t)===-1&&this._sortable.option(t,n[e])}},getChildrenNodes(){return this.$el.children},computeIndexes(){this.$nextTick(()=>{this.visibleIndexes=Ra(this.getChildrenNodes(),this.$el.children,this.transitionMode,this.footerOffset)})},getUnderlyingVm(n){const e=za(this.getChildrenNodes()||[],n);if(e===-1)return null;const t=this.realList[e];return{index:e,element:t}},emitChanges(n){this.$nextTick(()=>{this.$emit("change",n)})},alterList(n){if(this.list){n(this.list);return}const e=[...this.modelValue];n(e),this.$emit("update:modelValue",e)},spliceList(){const n=e=>e.splice(...arguments);this.alterList(n)},updatePosition(n,e){const t=a=>a.splice(e,0,a.splice(n,1)[0]);this.alterList(t)},getVmIndex(n){const e=this.visibleIndexes,t=e.length;return n>t-1?t:e[n]},getComponent(){return this.$slots.default?this.$slots.default()[0].componentInstance:null},resetTransitionData(n){if(!this.noTransitionOnDrag||!this.transitionMode)return;var e=this.getChildrenNodes();e[n].data=null;const t=this.getComponent();t.children=[],t.kept=void 0},onDragStart(n){this.context=this.getUnderlyingVm(n.item),this.context&&(n.item._underlying_vm_=this.clone(this.context.element),$t=n.item)},onDragAdd(n){const e=n.item._underlying_vm_;if(e===void 0)return;It(n.item);const t=this.getVmIndex(n.newIndex);this.spliceList(t,0,e),this.computeIndexes();const a={element:e,newIndex:t};this.emitChanges({added:a})},onDragRemove(n){if(nn(this.$el,n.item,n.oldIndex),n.pullMode==="clone"){It(n.clone);return}if(!this.context)return;const e=this.context.index;this.spliceList(e,1);const t={element:this.context.element,oldIndex:e};this.resetTransitionData(e),this.emitChanges({removed:t})},onDragUpdate(n){It(n.item),nn(n.from,n.item,n.oldIndex);const e=this.context.index,t=this.getVmIndex(n.newIndex);this.updatePosition(e,t);const a={element:this.context.element,oldIndex:e,newIndex:t};this.emitChanges({moved:a})},updateProperty(n,e){n.hasOwnProperty(e)&&(n[e]+=this.headerOffset)},onDragMove(n,e){const t=this.move;if(!t||!this.realList)return!0;const a=this.getRelatedContextFromMoveEvent(n),o=this.context,r=this.computeFutureIndex(a,n);Object.assign(o,{futureIndex:r});const s=Object.assign({},n,{relatedContext:a,draggedContext:o});return t(s,e)},onDragEnd(){this.computeIndexes(),$t=null},getTrargetedComponent(n){return n.__draggable_component__},getRelatedContextFromMoveEvent({to:n,related:e}){const t=this.getTrargetedComponent(n);if(!t)return{component:t};const a=t.realList,o={list:a,component:t};if(n!==e&&a&&t.getUnderlyingVm){const r=t.getUnderlyingVm(e);if(r)return Object.assign(r,o)}return o},computeFutureIndex(n,e){const t=[...e.to.children].filter(s=>s.style.display!=="none");if(t.length===0)return 0;const a=t.indexOf(e.related),o=n.component.getVmIndex(a);return t.indexOf($t)!==-1||!e.willInsertAfter?o:o+1}}}),q=n=>(Cn("data-v-79b49614"),n=n(),kn(),n),Za={key:0,class:"bg-dark bg-opacity-90 fixed top-0 left-0 w-full h-full flex justify-center items-center z-[2147483647]"},Wa=q(()=>u("div",{class:"p-4 text-xl text-white"}," Game Master Dashboard ",-1)),Xa=["onClick"],qa={class:"container my-10"},Ja={key:0},Ka=q(()=>u("div",null," Actions ",-1)),Qa={class:"bg-dark-smooth p-4"},eo=q(()=>u("div",{class:"text-2xl text-white mb-4"},"Game Status",-1)),to=q(()=>u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 mr-3",viewBox:"0 0 16 16"},[u("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"})],-1)),no=["disable"],ao=q(()=>u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 mr-3",viewBox:"0 0 16 16"},[u("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"})],-1)),oo=q(()=>u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 mr-3",viewBox:"0 0 16 16"},[u("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.5 5A1.5 1.5 0 0 0 5 6.5v3A1.5 1.5 0 0 0 6.5 11h3A1.5 1.5 0 0 0 11 9.5v-3A1.5 1.5 0 0 0 9.5 5h-3z"})],-1)),ro=q(()=>u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 mr-3",viewBox:"0 0 16 16"},[u("path",{d:"M1.5 15a.5.5 0 0 0 0 1h13a.5.5 0 0 0 0-1H13V2.5A1.5 1.5 0 0 0 11.5 1H11V.5a.5.5 0 0 0-.57-.495l-7 1A.5.5 0 0 0 3 1.5V15H1.5zM11 2h.5a.5.5 0 0 1 .5.5V15h-1V2zm-2.5 8c-.276 0-.5-.448-.5-1s.224-1 .5-1 .5.448.5 1-.224 1-.5 1z"})],-1)),so={class:"bg-dark-smooth p-4 mt-6"},io=q(()=>u("div",{class:"text-2xl text-white mb-4"},"Cards",-1)),lo=q(()=>u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 mr-3",viewBox:"0 0 16 16"},[u("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-4.79-2.907L8.5 7.028V5.5a.5.5 0 0 0-.79-.407L5 7.028V5.5a.5.5 0 0 0-1 0v5a.5.5 0 0 0 1 0V8.972l2.71 1.935a.5.5 0 0 0 .79-.407V8.972l2.71 1.935A.5.5 0 0 0 12 10.5v-5a.5.5 0 0 0-.79-.407z"})],-1)),uo=q(()=>u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 mr-3",viewBox:"0 0 16 16"},[u("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM4.79 5.093A.5.5 0 0 0 4 5.5v5a.5.5 0 0 0 .79.407L7.5 8.972V10.5a.5.5 0 0 0 .79.407L11 8.972V10.5a.5.5 0 0 0 1 0v-5a.5.5 0 0 0-1 0v1.528L8.29 5.093a.5.5 0 0 0-.79.407v1.528L4.79 5.093z"})],-1)),co=["disable"],fo=q(()=>u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 mr-3",viewBox:"0 0 16 16"},[u("path",{d:"M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5z"})],-1)),ho=["disable"],po=q(()=>u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 mr-3",viewBox:"0 0 16 16"},[u("path",{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16ZM7.729 5.055A.5.5 0 0 1 8 5.5v1.886l3.21-2.293A.5.5 0 0 1 12 5.5v5a.5.5 0 0 1-.79.407L8 8.614V10.5a.5.5 0 0 1-.79.407l-3.5-2.5a.5.5 0 0 1 0-.814l3.5-2.5a.5.5 0 0 1 .519-.038Z"})],-1)),mo=["disable"],go=q(()=>u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 mr-3",viewBox:"0 0 16 16"},[u("path",{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16ZM4.79 5.093 8 7.386V5.5a.5.5 0 0 1 .79-.407l3.5 2.5a.5.5 0 0 1 0 .814l-3.5 2.5A.5.5 0 0 1 8 10.5V8.614l-3.21 2.293A.5.5 0 0 1 4 10.5v-5a.5.5 0 0 1 .79-.407Z"})],-1)),vo={key:1},bo=q(()=>u("div",{class:"w-1/6"},"Turn",-1)),wo=q(()=>u("div",{class:"w-1/6"},"Name",-1)),yo=q(()=>u("div",{class:"w-1/6"},"Team",-1)),_o=q(()=>u("div",{class:"w-1/6"},"Status",-1)),xo=q(()=>u("div",{class:"w-1/6"},"Role",-1)),Co=q(()=>u("div",{class:"w-1/6"},"Actions",-1)),ko={class:"w-1/6"},So={class:"w-1/6"},Do={class:"w-1/6"},Eo={class:"w-1/6"},To={class:"w-1/6"},Io={class:"w-1/6 text-red-500 cursor-pointer hover:text-red-600 transition duration-300 text-lg"},$o=["onClick"],Mo=oe({__name:"ModalFullPage",props:{modalOpen:{type:Boolean},tableUsers:{type:Array,required:!0},table:{type:Object},tableStatus:{type:Object},menuTab:{type:Number,default:1}},emits:["closeModal","updateTurnTableUsers","updateRole","updateStatus","updateTeam","stopGame","leaveGame","newGame","updateTableGameStatus","showAllCards","removePlayer","setNextPlayer"],setup(n,{emit:e}){const t=n,a=U(!0),o=U(null),r=U([{id:1,name:"Game"},{id:2,name:"Players"}]),s=U(1),l=c=>{e("updateTurnTableUsers")};return Pn(o,()=>{e("closeModal")}),Xe(()=>t.menuTab,()=>{s.value=t.menuTab}),(c,d)=>(w(),P(xn,{name:"modal"},{default:h(()=>[n.modalOpen?(w(),T("div",Za,[u("div",{class:"bg-dark relative rounded-sm shadow h-full w-full",ref_key:"modal",ref:o},[_(C,{class:"border-b-2 px-8",justify:"between",items:"center"},{default:h(()=>[Wa,u("button",{class:"cursor-pointer border h-10 w-10 border-transparent rounded-3xl px-2 transition duration-300 text-lg text-white hover:text-primary hover:bg-white",onClick:d[0]||(d[0]=g=>c.$emit("closeModal"))}," x ")]),_:1}),_(C,{class:"h-full text-white"},{default:h(()=>[_(C,{class:"border-r w-60 p-4",column:!0,gap:2},{default:h(()=>[(w(!0),T(J,null,ne(r.value,g=>(w(),T("div",{key:g.id,class:O(["px-4 py-3 hover:bg-primary rounded-lg border-gray-500 border cursor-pointer hover:border-primary transition duration-300 text-lg",s.value===g.id?"bg-primary":"bg-transparent"]),onClick:b=>s.value=g.id},Z(g.name),11,Xa))),128))]),_:1}),_(C,{class:"w-full"},{default:h(()=>[u("div",qa,[s.value===1?(w(),T("div",Ja,[_(C,{class:"text-2xl underline underline-offset-4 mb-6 w-full",justify:"between"},{default:h(()=>[Ka,u("div",null,[_(On,{title:"Close settings on click an action",input:a.value,onChange:d[1]||(d[1]=g=>a.value=g)},null,8,["input"])])]),_:1}),u("div",Qa,[eo,_(C,{class:"w-full text-center cursor-pointer",gap:8},{default:h(()=>{var g,b,p,f;return[u("button",{onClick:d[2]||(d[2]=v=>{c.$emit("newGame"),a.value&&e("closeModal")}),class:"p-3 w-1/4 transition duration-300 text-lg bg-primary rounded-3xl text-white hover:bg-dark-smooth border border-primary"},[_(C,{justify:"center",items:"center"},{default:h(()=>[to,z(" New Game ")]),_:1})]),u("button",{class:O(["p-3 w-1/4 transition duration-300 text-lg bg-primary rounded-3xl text-white hover:bg-dark-smooth border border-primary",((g=n.tableStatus)==null?void 0:g.status)===i(E).WAITING||((b=n.tableStatus)==null?void 0:b.status)===i(E).FINISH?"cursor-not-allowed":""]),disable:((p=n.tableStatus)==null?void 0:p.status)===i(E).WAITING||((f=n.tableStatus)==null?void 0:f.status)===i(E).FINISH,onClick:d[3]||(d[3]=v=>{var x;((x=n.tableStatus)==null?void 0:x.status)===i(E).PLAYING?c.$emit("updateTableGameStatus",i(E).PAUSE):c.$emit("updateTableGameStatus",i(E).PLAYING),a.value&&e("closeModal")})},[_(C,{justify:"center",items:"center"},{default:h(()=>{var v;return[ao,z(" "+Z(((v=n.tableStatus)==null?void 0:v.status)===i(E).PAUSE?"Resume Game":"Pause Game"),1)]}),_:1})],10,no),u("button",{onClick:d[4]||(d[4]=v=>{c.$emit("stopGame"),a.value&&e("closeModal")}),class:"p-3 w-1/4 transition duration-300 text-lg bg-primary rounded-3xl text-white hover:bg-dark-smooth border border-primary"},[_(C,{justify:"center",items:"center"},{default:h(()=>[oo,z(" End Game ")]),_:1})]),u("button",{class:"p-3 w-1/4 transition duration-300 text-lg bg-primary rounded-3xl text-white hover:bg-dark-smooth border border-primary",onClick:d[5]||(d[5]=v=>c.$emit("leaveGame"))},[_(C,{justify:"center",items:"center"},{default:h(()=>[ro,z(" Leave Game ")]),_:1})])]}),_:1})]),u("div",so,[io,_(C,{class:"w-full text-center cursor-pointer",gap:8},{default:h(()=>{var g,b,p,f,v,x;return[u("div",{class:"p-3 transition duration-300 text-lg w-1/3 bg-primary rounded-3xl text-white hover:bg-dark-smooth border border-primary",onClick:d[6]||(d[6]=k=>c.$emit("setNextPlayer",!1))},[_(C,{justify:"center",items:"center"},{default:h(()=>[lo,z(" Previous Player ")]),_:1})]),u("div",{class:"p-3 transition duration-300 text-lg w-1/3 bg-primary rounded-3xl text-white hover:bg-dark-smooth border border-primary",onClick:d[7]||(d[7]=k=>c.$emit("setNextPlayer",!0))},[_(C,{justify:"center",items:"center"},{default:h(()=>[uo,z(" Next Player ")]),_:1})]),u("div",{onClick:d[8]||(d[8]=k=>{c.$emit("showAllCards"),a.value&&e("closeModal")}),class:O(["p-3 transition duration-300 text-lg w-1/3 bg-primary rounded-3xl text-white hover:bg-dark-smooth border border-primary",((g=n.tableStatus)==null?void 0:g.status)===i(E).WAITING?"cursor-not-allowed":""]),disable:((b=n.tableStatus)==null?void 0:b.status)===i(E).WAITING},[_(C,{justify:"center",items:"center"},{default:h(()=>[fo,z(" Show all cards ")]),_:1})],10,co),u("div",{class:O(["p-3 transition duration-300 text-lg w-1/3 bg-primary rounded-3xl text-white hover:bg-dark-smooth border border-primary",((p=n.tableStatus)==null?void 0:p.status)===i(E).WAITING?"cursor-not-allowed":""]),disable:((f=n.tableStatus)==null?void 0:f.status)===i(E).WAITING},[_(C,{justify:"center",items:"center"},{default:h(()=>[po,z(" Undo ")]),_:1})],10,ho),u("div",{class:O(["p-3 transition duration-300 text-lg w-1/3 bg-primary rounded-3xl text-white hover:bg-dark-smooth border border-primary",((v=n.tableStatus)==null?void 0:v.status)===i(E).WAITING?"cursor-not-allowed":""]),disable:((x=n.tableStatus)==null?void 0:x.status)===i(E).WAITING},[_(C,{justify:"center",items:"center"},{default:h(()=>[go,z(" Redo ")]),_:1})],10,mo)]}),_:1})])])):j("",!0),s.value===2?(w(),T("div",vo,[_(C,{disabled:"",class:"list-group-item bg-dark-smooth m-1 p-3 rounded-md text-center border border-primary mb-6",justify:"center"},{default:h(()=>[bo,wo,yo,_o,xo,Co]),_:1}),_(C,{class:"w-full"},{default:h(()=>[n.tableUsers?(w(),P(i(Ya),{key:0,class:"dragArea list-group w-full",list:n.tableUsers,onChange:l,disabled:!1,group:{name:"people"},"ghost-class":"ghost"},{default:h(()=>[_(_n,null,{default:h(()=>[(w(!0),T(J,null,ne(n.tableUsers,g=>(w(),P(C,{items:"center",gap:8,class:"list-group-item bg-dark-smooth m-1 p-3 rounded-md text-center mb-3",key:g.id},{default:h(()=>{var b,p,f,v,x,k,m,S,D,M,L,R;return[u("div",ko,Z(g.turn),1),u("div",So,Z(g.user.username),1),u("div",Do,[_(wt,{options:(p=(b=n.table)==null?void 0:b.game)==null?void 0:p.teams,dark:!0,input:(f=g.team)!=null&&f.id?{value:(v=g.team)==null?void 0:v.id}:null,onUpdate:B=>c.$emit("updateTeam",B,g)},null,8,["options","input","onUpdate"])]),u("div",Eo,[_(wt,{options:(k=(x=n.table)==null?void 0:x.game)==null?void 0:k.status,dark:!0,input:(m=g.status)!=null&&m.id?{value:(S=g.status)==null?void 0:S.id}:null,onUpdate:B=>c.$emit("updateStatus",B,g)},null,8,["options","input","onUpdate"])]),u("div",To,[_(wt,{options:(M=(D=n.table)==null?void 0:D.game)==null?void 0:M.roles,dark:!0,input:(L=g.role)!=null&&L.id?{value:(R=g.role)==null?void 0:R.id}:null,onUpdate:B=>c.$emit("updateRole",B,g)},null,8,["options","input","onUpdate"])]),u("div",Io,[u("button",{onClick:B=>c.$emit("removePlayer",g.user.id)},"Remove User",8,$o)])]}),_:2},1024))),128))]),_:1})]),_:1},8,["list"])):j("",!0)]),_:1})])):j("",!0)])]),_:1})]),_:1})],512)])):j("",!0)]),_:1}))}});const Ao=Ln(Mo,[["__scopeId","data-v-79b49614"]]),Oo="/assets/cards.fface172.svg",Po=oe({__name:"GameUserItem",props:{playing:{type:Boolean,default:!1}},setup(n){return(e,t)=>(w(),T("div",{class:O(["px-4 py-3 rounded-lg hover:border-primary transition duration-300",n.playing?"bg-primary":"bg-dark-smooth"])},[Sn(e.$slots,"default")],2))}}),Lt="/assets/close-card.89ac7cbb.png",No=u("div",{class:"text-2xl border-b border-primary pb-2"},"Users",-1),Go={class:"w-3/6"},Lo=u("img",{src:Oo,alt:"cards",srcset:""},null,-1),zo=["onClick"],Ro=u("path",{d:"M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"},null,-1),jo=[Ro],Uo={key:1,class:"p-2 mt-2 shadow-2xl rounded-xl border-dashed border"},Bo=u("div",{class:"w-2/6"},"Team:",-1),Fo=u("div",{class:"w-2/6"},"Role:",-1),Vo=u("div",{class:"w-2/6"},"Status:",-1),Ho={key:2,class:"mt-4"},Yo=["src"],Zo=oe({__name:"SidebarGame",setup(n){const e=Te(),t=U([]),a=r=>t.value.indexOf(r)!==-1,o=r=>{t.value.indexOf(r)!==-1?t.value=t.value.filter(s=>s!==r):t.value.push(r)};return Xe(()=>e.table,()=>{var r,s,l;((r=e.table)==null?void 0:r.status)!==E.WAITING&&(t.value=[],(l=(s=e.table)==null?void 0:s.table_users)==null||l.forEach(c=>{t.value.push(c.id)}))}),(r,s)=>{const l=We("RouterLink");return w(),P(C,{class:"border-l w-72 p-4 h-full bg-dark text-white",column:!0,gap:2},{default:h(()=>[_(C,{column:!0,justify:"between",class:"h-[96%]"},{default:h(()=>{var c;return[u("div",null,[No,(w(!0),T(J,null,ne((c=i(e).table)==null?void 0:c.table_users,(d,g)=>(w(),P(Po,{key:g,class:"mt-3 w-2xl bg-primary",playing:d.playing},{default:h(()=>{var b,p,f,v,x,k,m,S;return[_(C,{items:"center",justify:i(e).cards?"center":"between",gap:2},{default:h(()=>{var D,M,L,R;return[u("div",Go,Z((D=d.user)==null?void 0:D.username),1),i(e).cards?(w(),P(C,{key:0,gap:2,class:"w-2/6"},{default:h(()=>{var B;return[Lo,u("div",null,Z((B=i(e).getCards(i(e).getTableDeckIdOfUser(d.user.id)))==null?void 0:B.length),1)]}),_:2},1024)):j("",!0),((M=d.team)==null?void 0:M.name)||((L=d.role)==null?void 0:L.name)||((R=d.status)==null?void 0:R.name)||i(e).cards?(w(),T("div",{key:1,class:"w-1/6 cursor-pointer group",onClick:B=>o(d.id)},[(w(),T("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:O(["group-hover:text-primary duration-300 transition",a(d.id)?"rotate-0":"rotate-180"]),viewBox:"0 0 16 16"},jo,2))],8,zo)):j("",!0)]}),_:2},1032,["justify"]),((p=(b=i(e).table)==null?void 0:b.game_master)==null?void 0:p.id)===d.user.id?(w(),T("div",{key:0,class:O(["italic font-bold",i(e).table.game_master.id===d.user.id&&d.playing?"text-dark":"text-primary"])},"Game Master",2)):j("",!0),a(d.id)&&(((f=d.team)==null?void 0:f.name)||((v=d.role)==null?void 0:v.name)||((x=d.status)==null?void 0:x.name))?(w(),T("div",Uo,[(k=d.team)!=null&&k.name?(w(),P(C,{key:0},{default:h(()=>{var D,M;return[Bo,u("div",null,Z((D=d.team)!=null&&D.name?(M=d.team)==null?void 0:M.name:"none"),1)]}),_:2},1024)):j("",!0),(m=d.role)!=null&&m.name?(w(),P(C,{key:1},{default:h(()=>{var D,M;return[Fo,u("div",null,Z((D=d.role)!=null&&D.name?(M=d.role)==null?void 0:M.name:"none"),1)]}),_:2},1024)):j("",!0),(S=d.status)!=null&&S.name?(w(),P(C,{key:2},{default:h(()=>{var D,M;return[Vo,u("div",null,Z((D=d.status)!=null&&D.name?(M=d.status)==null?void 0:M.name:"none"),1)]}),_:2},1024)):j("",!0)])):j("",!0),i(e).cards&&a(d.id)?(w(),T("div",Ho,[_(C,{gap:2,class:"flex-wrap",justify:"start"},{default:h(()=>[(w(!0),T(J,null,ne(i(e).getCards(i(e).getTableDeckIdOfUser(d.user.id)),(D,M)=>(w(),T("img",{src:D.hidden?i(Lt):i(ut)(D.card.image),alt:"",srcset:"",key:`user-card-${M}`,class:"w-10 h-12"},null,8,Yo))),128))]),_:2},1024)])):j("",!0)]}),_:2},1032,["playing"]))),128))]),_(C,{justify:"center"},{default:h(()=>[_(l,{to:{name:"lobby"}},{default:h(()=>[_(zn,{title:"Leave Game"})]),_:1})]),_:1})]}),_:1})]),_:1})}}}),Wo=["src","id"],dt=oe({__name:"DraggableCard",props:{card:{type:Object,required:!0},absolute:{type:Boolean,default:!0},hiddenCards:{type:Boolean,default:!1},rotate:{type:Boolean,default:!1},showCards:{type:Boolean,default:!1},playerDeck:{type:Boolean,default:!1}},emits:["onDragStart"],setup(n,{emit:e}){const t=n;U(!1);const a=Te(),o=U(null),r=l=>{switch(l){case Qe.ZERO:return"";case Qe.NINETY:return" rotate-90";case Qe.ONE_EIGHTY:return" rotate-180";case Qe.TWO_SEVENTY:return" -rotate-90";default:return""}},s=l=>t.hiddenCards?Lt:t.showCards?ut(l.card.image):l.hidden?Lt:ut(l.card.image);return gt(()=>{t.card&&o.value&&(o.value.style.top=`${t.card.position_x}px`,o.value.style.left=`${t.card.position_y}px`,o.value.style.zIndex=`${t.card.z_index}`)}),Xe([()=>t.card.position_x,()=>t.card.position_y,()=>t.card.z_index],([l,c],[d,g])=>{o.value&&(o.value.style.top=`${t.card.position_x}px`,o.value.style.left=`${t.card.position_y}px`,o.value.style.zIndex=t.card.z_index.toString())}),(l,c)=>(w(),T("img",{ref_key:"cardRef",ref:o,src:s(n.card),alt:"",id:n.card.id.toString(),class:O(["card-box cursor-pointer",[n.absolute?"absolute":"",i(a).clickCardId===n.card.id?"border-2 border-red-500":"hover:border hover:border-dark",n.rotate?r(n.card.rotate):"",n.playerDeck&&n.card.hidden?"opacity-50":""]]),onClick:c[0]||(c[0]=d=>i(a).clickCardId===n.card.id?i(a).clickCardId=null:i(a).clickCardId=n.card.id),onDragstart:c[1]||(c[1]=d=>l.$emit("onDragStart",d,o.value)),draggable:"true"},null,42,Wo))}}),Xo={class:"text-sm"},qo=oe({__name:"TableDecks",props:{deck:{type:Object,required:!0}},emits:["deckCreate","onDrop","onDragLeave","onDragEnter","onDragStart"],setup(n,{emit:e}){const t=U(null);return gt(()=>{t.value&&e("deckCreate",t.value)}),(a,o)=>(w(),P(C,{gap:4,class:"my-2 mx-8"},{default:h(()=>[_(C,{column:!0,items:"center",gap:1},{default:h(()=>{var r;return[u("div",{class:O(["relative card-box dropZone",(r=n.deck.cards)!=null&&r.length?"":"border"]),ref_key:"deckReference",ref:t,onDrop:o[0]||(o[0]=s=>a.$emit("onDrop",s,n.deck.tableDeckId)),onDragover:o[1]||(o[1]=we(()=>{},["prevent"])),onDragleave:o[2]||(o[2]=s=>a.$emit("onDragLeave",s)),onDragenter:o[3]||(o[3]=we(s=>a.$emit("onDragEnter",s),["prevent"]))},[(w(!0),T(J,null,ne(n.deck.cards,(s,l)=>(w(),P(dt,{card:s,key:l,onOnDragStart:(c,d)=>a.$emit("onDragStart",c,d,s),"hidden-cards":n.deck.deckType===i(Rn).DECK},null,8,["card","onOnDragStart","hidden-cards"]))),128))],34),u("div",Xo,Z(n.deck.deckName),1)]}),_:1})]),_:1}))}}),Jo=u("div",{class:"py-3 pr-4 border-r cursor-pointer"},[u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6",viewBox:"0 0 16 16"},[u("path",{"fill-rule":"evenodd",d:"M7.646.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 1.707V5.5a.5.5 0 0 1-1 0V1.707L6.354 2.854a.5.5 0 1 1-.708-.708l2-2zM8 10a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 0 1 .708-.708L7.5 14.293V10.5A.5.5 0 0 1 8 10zM.146 8.354a.5.5 0 0 1 0-.708l2-2a.5.5 0 1 1 .708.708L1.707 7.5H5.5a.5.5 0 0 1 0 1H1.707l1.147 1.146a.5.5 0 0 1-.708.708l-2-2zM10 8a.5.5 0 0 1 .5-.5h3.793l-1.147-1.146a.5.5 0 0 1 .708-.708l2 2a.5.5 0 0 1 0 .708l-2 2a.5.5 0 0 1-.708-.708L14.293 8.5H10.5A.5.5 0 0 1 10 8z"})])],-1),Ko={class:"py-1"},Qo=u("path",{d:"m10.79 12.912-1.614-1.615a3.5 3.5 0 0 1-4.474-4.474l-2.06-2.06C.938 6.278 0 8 0 8s3 5.5 8 5.5a7.029 7.029 0 0 0 2.79-.588zM5.21 3.088A7.028 7.028 0 0 1 8 2.5c5 0 8 5.5 8 5.5s-.939 1.721-2.641 3.238l-2.062-2.062a3.5 3.5 0 0 0-4.474-4.474L5.21 3.089z"},null,-1),er=u("path",{d:"M5.525 7.646a2.5 2.5 0 0 0 2.829 2.829l-2.83-2.829zm4.95.708-2.829-2.83a2.5 2.5 0 0 1 2.829 2.829zm3.171 6-12-12 .708-.708 12 12-.708.708z"},null,-1),tr=[Qo,er],nr=u("path",{d:"M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0z"},null,-1),ar=u("path",{d:"M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8zm8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7z"},null,-1),or=[nr,ar],rr={class:"py-1"},sr=u("path",{"fill-rule":"evenodd",d:"M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"},null,-1),ir=u("path",{d:"M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"},null,-1),lr=[sr,ir],dr={class:"py-1"},ur=u("path",{"fill-rule":"evenodd",d:"M8 3a5 5 0 1 1-4.546 2.914.5.5 0 0 0-.908-.417A6 6 0 1 0 8 2v1z"},null,-1),cr=u("path",{d:"M8 4.466V.534a.25.25 0 0 0-.41-.192L5.23 2.308a.25.25 0 0 0 0 .384l2.36 1.966A.25.25 0 0 0 8 4.466z"},null,-1),fr=[ur,cr],hr={class:"py-1"},pr=u("path",{d:"M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3Zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"},null,-1),mr=[pr],gr=u("path",{d:"M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7Zm1.679-4.493-1.335 2.226a.75.75 0 0 1-1.174.144l-.774-.773a.5.5 0 0 1 .708-.708l.547.548 1.17-1.951a.5.5 0 1 1 .858.514ZM11 5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"},null,-1),vr=u("path",{d:"M2 13c0 1 1 1 1 1h5.256A4.493 4.493 0 0 1 8 12.5a4.49 4.49 0 0 1 1.544-3.393C9.077 9.038 8.564 9 8 9c-5 0-6 3-6 4Z"},null,-1),br=[gr,vr],wr={key:0,class:"py-1"},yr={class:"p-2 rounded-3xl cursor-pointer hover:bg-white group transition duration-300"},_r=u("path",{d:"M11 5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm-9 8c0 1 1 1 1 1h5.256A4.493 4.493 0 0 1 8 12.5a4.49 4.49 0 0 1 1.544-3.393C9.077 9.038 8.564 9 8 9c-5 0-6 3-6 4Zm9.886-3.54c.18-.613 1.048-.613 1.229 0l.043.148a.64.64 0 0 0 .921.382l.136-.074c.561-.306 1.175.308.87.869l-.075.136a.64.64 0 0 0 .382.92l.149.045c.612.18.612 1.048 0 1.229l-.15.043a.64.64 0 0 0-.38.921l.074.136c.305.561-.309 1.175-.87.87l-.136-.075a.64.64 0 0 0-.92.382l-.045.149c-.18.612-1.048.612-1.229 0l-.043-.15a.64.64 0 0 0-.921-.38l-.136.074c-.561.305-1.175-.309-.87-.87l.075-.136a.64.64 0 0 0-.382-.92l-.148-.045c-.613-.18-.613-1.048 0-1.229l.148-.043a.64.64 0 0 0 .382-.921l-.074-.136c-.306-.561.308-1.175.869-.87l.136.075a.64.64 0 0 0 .92-.382l.045-.148ZM14 12.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0Z"},null,-1),xr=[_r],Cr={class:"cursor-default bg-black py-2 text-white"},kr=u("div",{class:"border-b p-2"}," Status player ",-1),Sr=u("div",null," --Empty-- ",-1),Dr={key:0},Er=u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6",viewBox:"0 0 16 16"},[u("path",{d:"M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z"})],-1),Tr=[Er],Ir=["onClick"],$r={key:0},Mr=u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6",viewBox:"0 0 16 16"},[u("path",{d:"M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z"})],-1),Ar=[Mr],Or=oe({__name:"PlayerSettings",setup(n){const e=Te(),t=U(null),a=U(!0),o=U("Please click a card first"),{x:r,y:s,style:l}=Nn(t,{initialValue:{x:window.innerWidth*.5-300,y:window.innerHeight-250}});return(c,d)=>{const g=We("VTooltip"),b=We("VMenu");return w(),T("div",{ref_key:"el",ref:t,style:Dn([i(l),{position:"fixed"}]),class:O([i(e).clickCardId?"snooze":"","z-[2147483644]"])},[_(C,{class:"bg-dark rounded-2xl px-4 border border-white",gap:4},{default:h(()=>{var p,f;return[Jo,u("div",Ko,[_(g,null,{popper:h(()=>[z(Z(i(e).clickCardId?"Show / Hide card":o.value),1)]),default:h(()=>[u("div",{class:O(["p-2 rounded-3xl group transition duration-300",[i(e).clickCardId?"hover:bg-white cursor-pointer":"cursor-not-allowed"]]),onClick:d[0]||(d[0]=v=>i(e).clickCardId?i(e).toggleCardVisibility():"")},[i(e).isCardHidden()?(w(),T("svg",{key:0,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:O([[i(e).clickCardId?"group-hover:text-dark":"opacity-50"],"w-6 h-6 transition duration-300"]),viewBox:"0 0 16 16"},tr,2)):(w(),T("svg",{key:1,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:O([[i(e).clickCardId?"group-hover:text-dark":"opacity-50"],"w-6 h-6 transition duration-300"]),viewBox:"0 0 16 16"},or,2))],2)]),_:1})]),u("div",rr,[_(g,null,{popper:h(()=>[z(Z(i(e).clickCardId?"Rotate card right 90\xB0":o.value),1)]),default:h(()=>[u("div",{class:O(["p-2 rounded-3xl group transition duration-300",[i(e).clickCardId?"hover:bg-white cursor-pointer hover:rotate-90":"cursor-not-allowed"]]),onClick:d[1]||(d[1]=v=>i(e).clickCardId?i(e).rotateCard(i(Vt).RIGHT):"")},[(w(),T("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:O([[i(e).clickCardId?"group-hover:text-dark":"opacity-50"],"w-6 h-6 transition duration-300"]),viewBox:"0 0 16 16"},lr,2))],2)]),_:1})]),u("div",dr,[_(g,null,{popper:h(()=>[z(Z(i(e).clickCardId?"Rotate card left 90\xB0":o.value),1)]),default:h(()=>[u("div",{class:O(["p-2 rounded-3xl group transition duration-300",[i(e).clickCardId?"hover:bg-white cursor-pointer hover:-rotate-90":"cursor-not-allowed"]]),onClick:d[2]||(d[2]=v=>i(e).clickCardId?i(e).rotateCard(i(Vt).LEFT):"")},[(w(),T("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:O([[i(e).clickCardId?"group-hover:text-dark":"opacity-50"],"w-6 h-6 transition duration-300"]),viewBox:"0 0 16 16"},fr,2))],2)]),_:1})]),u("div",hr,[_(g,null,{popper:h(()=>[z(' Set status "My turn" ')]),default:h(()=>[u("div",{onClick:d[3]||(d[3]=v=>a.value?i(e).setPlayingPlayer():""),class:"p-2 rounded-3xl cursor-pointer hover:bg-white group transition duration-300"},[i(e).getExistPlayerPlayingStatus?(w(),T("svg",{key:1,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:O([[a.value?"group-hover:text-dark":"opacity-50 cursor-not-allowed"],"w-6 h-6 transition duration-300"]),viewBox:"0 0 16 16"},br,2)):(w(),T("svg",{key:0,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:O([[a.value?"group-hover:text-dark":"opacity-50 cursor-not-allowed"],"w-6 h-6 transition duration-300"]),viewBox:"0 0 16 16"},mr,2))])]),_:1})]),(f=(p=i(e).table)==null?void 0:p.game)!=null&&f.status?(w(),T("div",wr,[_(b,{placement:"top"},{popper:h(()=>{var v,x;return[u("div",Cr,[kr,u("div",{class:"p-2 mt-2 cursor-pointer hover:bg-white hover:text-black transition duration-300",onClick:d[4]||(d[4]=k=>i(e).addStatusPlayer(null))},[_(C,{justify:"between",items:"center"},{default:h(()=>{var k,m;return[Sr,((m=(k=i(e).table.table_users)==null?void 0:k.find(S=>S.id===i(e).getExistTableUserId))==null?void 0:m.status)===null?(w(),T("div",Dr,Tr)):j("",!0)]}),_:1})]),(w(!0),T(J,null,ne((x=(v=i(e).table)==null?void 0:v.game)==null?void 0:x.status,k=>(w(),T("div",{class:"p-2 mt-2 cursor-pointer hover:bg-white hover:text-black transition duration-300",key:k.id,onClick:m=>i(e).addStatusPlayer(k)},[_(C,{justify:"between",items:"center"},{default:h(()=>{var m,S,D;return[u("div",null,Z(k.name),1),((D=(S=(m=i(e).table.table_users)==null?void 0:m.find(M=>M.id===i(e).getExistTableUserId))==null?void 0:S.status)==null?void 0:D.id)===k.id?(w(),T("div",$r,Ar)):j("",!0)]}),_:2},1024)],8,Ir))),128))])]}),default:h(()=>[u("div",yr,[(w(),T("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:O([[a.value?"group-hover:text-dark":"opacity-50 cursor-not-allowed"],"w-6 h-6 transition duration-300"]),viewBox:"0 0 16 16"},xr,2))])]),_:1})])):j("",!0)]}),_:1})],6)}}});const Pr=u("div",{class:"text-sm"},"Junk Deck",-1),Nr={class:"col-span-1"},Gr=oe({__name:"OnlineTable",setup(n){var v,x;const e=Te(),t=U("600"),a=U("1000"),o=U("600");(v=e.table)!=null&&v.game&&(o.value=parseFloat((t.value/((x=e.table)==null?void 0:x.game.grid_rows)).toFixed(1)));const r=U(null),s=U(null),l=U(null);gt(()=>{l.value&&(e.deckReferences.junk=l.value,e.dropZones.junk[0].element=l.value),s.value&&(e.deckReferences.table=s.value,e.dropZones.table[0].element=s.value),r.value&&(e.deckReferences.user=r.value,e.dropZones.user[0].element=r.value)});const c=(k,m)=>{k&&(e.dropZones.deck[m].element=k)},d=U(2),g=k=>{},b=k=>{},p=(k,m,S)=>{k.dataTransfer.dropEffect="move",k.dataTransfer.effectAllowed="move",k.dataTransfer.setData("card",JSON.stringify(S)),k.dataTransfer.setData("cardHeight",m.offsetHeight),k.dataTransfer.setData("cardWidth",m.offsetWidth),k.dataTransfer.setData("top",k.y-m.getBoundingClientRect().top),k.dataTransfer.setData("left",k.x-m.getBoundingClientRect().left)},f=(k,m,S)=>{e.onDrop(k,m,S,d.value++)};return Xe(()=>{var k,m;return(m=(k=e.table)==null?void 0:k.game)==null?void 0:m.grid_rows},()=>{var k,m;(k=e.table)!=null&&k.game&&(o.value=parseFloat((t.value/((m=e.table)==null?void 0:m.game.grid_rows)).toFixed(1)))}),(k,m)=>(w(),T(J,null,[_(C,{justify:"center"},{default:h(()=>[_(C,{class:O([`w-[${a.value}px] h-[120px]`,"bg-secondary border px-4 divide-x-2 h-full"]),items:"center",justify:"center"},{default:h(()=>[i(e).cards?(w(),P(C,{key:0},{default:h(()=>[(w(!0),T(J,null,ne(i(e).dropZones.deck,(S,D)=>{var M,L,R,B,ee,Y,ie,re;return w(),P(qo,{deck:{tableDeckId:S.tableDeckId,index:D,cards:i(e).getCards(S.tableDeckId),deckName:(B=(R=(L=(M=i(e).table)==null?void 0:M.table_decks)==null?void 0:L.find(K=>K.id===S.tableDeckId))==null?void 0:R.deck)==null?void 0:B.name,deckType:(re=(ie=(Y=(ee=i(e).table)==null?void 0:ee.table_decks)==null?void 0:Y.find(K=>K.id===S.tableDeckId))==null?void 0:ie.deck)==null?void 0:re.type},index:D,key:S.tableDeckId,onDeckCreate:K=>c(K,D),onOnDragStart:m[0]||(m[0]=(K,le,be)=>p(K,le,be)),onOnDragEnter:m[1]||(m[1]=K=>b()),onOnDragLeave:m[2]||(m[2]=K=>g()),onOnDrop:(K,le)=>f(K,le,"deck")},null,8,["deck","index","onDeckCreate","onOnDrop"])}),128))]),_:1})):j("",!0),i(e).cards?(w(),P(C,{key:1,class:"h-full px-4",column:!0,justify:"center",items:"center",gap:1},{default:h(()=>{var S;return[u("div",{class:O(["card-box cursor-pointer relative dropZone",(S=i(e).getCards(i(e).getJunkTableDeckId))!=null&&S.length?"":"border"]),ref_key:"tableDeckTrashReference",ref:l,id:"junkDeck",onDrop:m[3]||(m[3]=D=>f(D,i(e).getJunkTableDeckId,"junk")),onDragover:m[4]||(m[4]=we(()=>{},["prevent"])),onDragleave:m[5]||(m[5]=D=>g()),onDragenter:m[6]||(m[6]=we(D=>b(),["prevent"]))},[(w(!0),T(J,null,ne(i(e).getCards(i(e).getJunkTableDeckId),(D,M)=>(w(),P(dt,{card:D,key:M,onOnDragStart:(L,R)=>p(L,R,D)},null,8,["card","onOnDragStart"]))),128))],34),Pr]}),_:1})):j("",!0)]),_:1},8,["class"])]),_:1}),i(e).cards&&i(e).getTableExist?(w(),P(C,{key:0,justify:"center"},{default:h(()=>{var S,D,M,L,R,B;return[u("div",{id:"tableDeck",class:O(["grid bg-dark relative dropZone",`grid-cols-${(D=(S=i(e).table)==null?void 0:S.game)==null?void 0:D.grid_cols} grid-rows-${(L=(M=i(e).table)==null?void 0:M.game)==null?void 0:L.grid_rows} h-[${t.value}px] w-[${a.value}px]`]),ref_key:"tableDeckReference",ref:s,onDrop:m[7]||(m[7]=ee=>f(ee,i(e).getTableDeckId,"table")),onDragover:m[8]||(m[8]=we(()=>{},["prevent"])),onDragleave:m[9]||(m[9]=ee=>g()),onDragenter:m[10]||(m[10]=we(ee=>b(),["prevent"]))},[(w(!0),T(J,null,ne((B=(R=i(e).table)==null?void 0:R.game)==null?void 0:B.grid_cols,ee=>{var Y,ie;return w(),T("div",Nr,[(w(!0),T(J,null,ne((ie=(Y=i(e).table)==null?void 0:Y.game)==null?void 0:ie.grid_rows,re=>(w(),T("div",{class:O(["row-span-1 bg-primary border w-full",`h-[${o.value}px]`])},null,2))),256))])}),256)),(w(!0),T(J,null,ne(i(e).getCards(i(e).getTableDeckId),(ee,Y)=>(w(),P(dt,{card:ee,key:Y,onOnDragStart:(ie,re)=>p(ie,re,ee),absolute:!0,rotate:!0},null,8,["card","onOnDragStart"]))),128))],34)]}),_:1})):j("",!0),i(e).cards?(w(),P(C,{key:1,justify:"center"},{default:h(()=>[u("div",{class:O([`w-[${a.value}px] h-[150px]`,"bg-secondary border relative dropZone"]),id:"playerDeck",ref_key:"playerDeckReference",ref:r,onDrop:m[11]||(m[11]=S=>f(S,i(e).getExistPlayerTableDeckId,"user")),onDragover:m[12]||(m[12]=we(()=>{},["prevent"])),onDragleave:m[13]||(m[13]=S=>g()),onDragenter:m[14]||(m[14]=we(S=>b(),["prevent"]))},[u("div",null,[_(C,{class:"border w-full h-full"},{default:h(()=>[(w(!0),T(J,null,ne(i(e).getCards(i(e).getExistPlayerTableDeckId),(S,D)=>(w(),P(dt,{card:S,key:D,onOnDragStart:(M,L)=>p(M,L,S),absolute:!0,rotate:!0,"show-cards":!0,"player-deck":!0},null,8,["card","onOnDragStart"]))),128))]),_:1})])],34)]),_:1})):j("",!0),_(Or)],64))}});var ye=(n=>(n.USER="user",n.TABLE="table",n.DECK="deck",n.JUNK="junk",n))(ye||{});const Lr={class:"max-h-[500px] overflow-y-auto"},zr={class:"border-b border-primary text-black py-2 mb-3"},Rr=["src"],jr=u("div",null,"No cards",-1),Ur=oe({__name:"ModalViewAllCards",props:{isModalOpen:{type:Boolean,required:!0},tableDecks:{type:Array,required:!0},cards:{type:Array,required:!0}},emits:["closeModal"],setup(n,{emit:e}){const t=n,a=r=>{var s,l;switch(r.type){case ye.USER:return(s=r.user)==null?void 0:s.username;case ye.DECK:return(l=r.deck)==null?void 0:l.name;case ye.TABLE:return"Table";case ye.JUNK:return"Junk"}},o=r=>{var s;return((s=t.cards)==null?void 0:s.filter(l=>l.table_deck.id===r))||[]};return(r,s)=>n.cards||n.tableDecks?(w(),P(Gn,{key:0,modalOpen:n.isModalOpen,onCloseModal:s[1]||(s[1]=l=>r.$emit("closeModal")),class:"z-[2147483645]"},{modal_header:h(()=>[z(" Cards ")]),body:h(()=>[u("div",Lr,[(w(!0),T(J,null,ne(n.tableDecks,l=>{var c;return w(),T("div",{key:l.id,class:"px-4"},[u("div",zr,Z(a(l)),1),((c=o(l.id))==null?void 0:c.length)>0?(w(),P(C,{key:0,gap:2,wrap:!0},{default:h(()=>[(w(!0),T(J,null,ne(o(l.id),d=>(w(),T("img",{class:"card-box",src:i(ut)(d.card.image),key:d.id},null,8,Rr))),128))]),_:2},1024)):(w(),P(C,{key:1,gap:2},{default:h(()=>[jr]),_:1}))])}),128))])]),modal_footer:h(()=>[u("button",{class:"flex w-full items-center justify-center rounded-md border border-transparent bg-gray-400 px-8 py-3 text-base font-medium text-white hover:bg-secondary hover:text-white md:py-3 md:px-10 md:text-lg ml-2",onClick:s[0]||(s[0]=l=>r.$emit("closeModal"))}," Close ")]),_:1},8,["modalOpen"])):j("",!0)}}),Br=oe({__name:"TimeAgo",props:{created_at:{type:String,required:!0}},setup(n){const e=n,t=U();gt(()=>{t.value=a(),setInterval(()=>{t.value=a()},6e4)});const a=()=>{const o=new Date,r=new Date(e.created_at),s=Math.floor((o.getTime()-r.getTime())/1e3);if(s<60)return"less a minute ago";if(s<3600){const l=Math.floor(s/60);return`${l} ${l===1?"minute":"minutes"} ago`}else if(s<86400){const l=Math.floor(s/3600);return`${l} ${l===1?"hour":"hours"} ago`}else{const l=Math.floor(s/86400);return`${l} ${l===1?"day":"days"} ago`}};return(o,r)=>Z(t.value)}}),Fr={class:"font-bold text-dark"},Vr={class:"text-gray-800 text-sm text-right"},Hr=oe({__name:"ChatMessage",props:{isActiveUserMessage:{type:Boolean,default:!1},data:{type:Object,required:!0}},setup(n){return(e,t)=>(w(),P(C,{justify:n.isActiveUserMessage?"start":"end"},{default:h(()=>[_(C,{class:O(["py-2 px-4 rounded-3xl w-96",n.isActiveUserMessage?"bg-primary":"bg-light-blue"]),column:!0},{default:h(()=>{var a,o,r;return[u("span",Fr,Z((a=n.data)==null?void 0:a.user.username)+":",1),u("div",null,Z((o=n.data)==null?void 0:o.message),1),u("div",Vr,[_(Br,{created_at:(r=n.data)==null?void 0:r.created_at.toString()},null,8,["created_at"])])]}),_:1},8,["class"])]),_:1},8,["justify"]))}}),Yr=zt(),Zr=Te(),Wr=En("ChatStore",{state:()=>({message:"",messages:[],unreadMessages:0,room:Zr.room,isChatOpen:!1}),getters:{getMessages:n=>n.messages},actions:{_sendMessage(){if(this.$state.message.length>0){const n={message:this.$state.message,room:this.$state.room,user:Yr.user};ce.emit("sendMessage",{data:n},e=>{e.status===200&&(this.$state.message="")})}},toggleChatMessenger(){this.$state.isChatOpen||(this.$state.unreadMessages=0),this.$state.isChatOpen=!this.$state.isChatOpen}}}),Xr=u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-12 h-12",viewBox:"0 0 16 16"},[u("path",{d:"M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM5 8a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"})],-1),qr={key:0,class:"absolute inline-flex items-center justify-center w-6 h-6 text-xs font-bold text-white bg-red-500 border-2 border-white rounded-full -top-2 -right-2 dark:border-gray-900"},Jr={key:1,class:"h-full relative bg-dark-smooth rounded-3xl p-4"},Kr=u("div",{class:"text-2xl px-2 font-bold"}," Table Chat ",-1),Qr=u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-8 h-8",viewBox:"0 0 16 16"},[u("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"})],-1),es=[Qr],ts=u("button",{type:"submit",class:"w-8 h-8 mr-8 absolute right-3 cursor-pointer"},[u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-8 h-8 mr-8 cursor-pointer hover:text-primary transition duration-300 hover:scale-110",viewBox:"0 0 16 16"},[u("path",{d:"M15.964.686a.5.5 0 0 0-.65-.65L.767 5.855H.766l-.452.18a.5.5 0 0 0-.082.887l.41.26.001.002 4.995 3.178 3.178 4.995.002.002.26.41a.5.5 0 0 0 .886-.083l6-15Zm-1.833 1.89L6.637 10.07l-.215-.338a.5.5 0 0 0-.154-.154l-.338-.215 7.494-7.494 1.178-.471-.47 1.178Z"})])],-1),ns=oe({__name:"RoomChat",setup(n){const e=U(""),t=Wr(),a=zt(),o=Te();return an(()=>{t.room=o.room,ce.on("getSendMessage",r=>{r&&(t.messages.unshift(r),t.isChatOpen||t.unreadMessages++)})}),Xe(()=>t.message,r=>{e.value=r}),on(()=>{ce.off("getSendMessage"),t.messages=[],t.message="",t.unreadMessages=0}),(r,s)=>(w(),T("div",{class:O(["fixed bottom-10 left-10 transition-height ease duration-1000 z-[2147483640]",i(t).isChatOpen?"w-[500px] h-[600px]":"w-[50px] h-[50px]"])},[i(t).isChatOpen?(w(),T("div",Jr,[_(C,{justify:"between",column:!0,class:"h-full",gap:6},{default:h(()=>[_(C,{justify:"between"},{default:h(()=>[Kr,u("div",{class:"cursor-pointer hover:text-primary duration-300 transition hover:scale-110",onClick:s[1]||(s[1]=l=>i(t).toggleChatMessenger())},es)]),_:1}),i(t).getMessages.length>0?(w(),P(C,{key:0,class:"bottom-5 left-6 bg-dark rounded-3xl w-full p-4 h-full overflow-y-auto scroll-smooth",columnReverse:!0,gap:4},{default:h(()=>[(w(!0),T(J,null,ne(i(t).getMessages,l=>(w(),P(Hr,{data:l,key:l.id,isActiveUserMessage:l.user.id===i(a).user.id},null,8,["data","isActiveUserMessage"]))),128))]),_:1})):(w(),P(C,{key:1,justify:"center",items:"center",class:"text-xl bottom-5 left-6 bg-dark rounded-3xl w-full p-4 h-full overflow-y-auto scroll-smooth",columnReverse:!0,gap:4},{default:h(()=>[z(" No messages ")]),_:1})),u("form",{onSubmit:s[4]||(s[4]=we(l=>i(t)._sendMessage(),["prevent"]))},[_(C,{justify:"center",items:"center",class:"bg-dark bottom-5 rounded-3xl left-6 w-full",gap:4},{default:h(()=>[Tn(u("input",{"onUpdate:modelValue":s[2]||(s[2]=l=>e.value=l),onInput:s[3]||(s[3]=l=>i(t).message=e.value),class:"w-full bg-dark rounded-3xl p-4 focus:outline-none focus:ring-2 transition duration-300 focus:ring-primary focus:ring-opacity-50",placeholder:"Type your message..."},null,544),[[In,e.value]]),ts]),_:1})],32)]),_:1})])):(w(),P(C,{key:0,justify:"start"},{default:h(()=>[u("div",{class:"cursor-pointer hover:text-primary duration-300 transition hover:scale-110 relative",onClick:s[0]||(s[0]=l=>i(t).toggleChatMessenger())},[Xr,i(t).unreadMessages>0?(w(),T("div",qr,Z(i(t).unreadMessages),1)):j("",!0)])]),_:1}))],2))}}),as={class:"rounded-2xl bg-primary px-12 py-6 text-4xl italic"},os={class:"mt-6 text-xl"},rs=oe({__name:"TableStatusMessage",props:{title:{type:String,required:!0},message:{type:String,required:!0}},setup(n){return(e,t)=>(w(),P(C,{class:"one-page bg-dark",items:"center",justify:"center",column:!0},{default:h(()=>[u("div",as,Z(n.title),1),u("div",os,Z(n.message),1)]),_:1}))}}),ss={class:"w-5/6 overflow-auto text-white relative"},gs=oe({__name:"RoomView",setup(n){const e=$n(),t=Te(),a=zt(),o=U(!1),r=U(!1),s=U(1),l=Mn();t.room=e.params.id.toString(),t.table?t._joinTable(t.room):bt.push({name:"lobby"});const c=U(["getTurnTableUsers","getUpdateTableUser","getStartGameDetails","exitUsersFromTable","getTableGameStatus","getShowAllCards","getUpdateCard","getShuffleDeck"]);an(()=>{t.setGameMaster(),ce.on("getTableUsers",p=>{var f;p.public_url===t.room&&p.table_users&&(t.table=p,(f=t.table.table_users)!=null&&f.find(x=>x.user.id===a.user.id)||(l.info(`Player ${a.user.username} has remove from Game Master`),bt.push({name:"lobby"})))}),ce.on("getTurnTableUsers",p=>{var v,x;t.table&&p&&(t.table.table_users=p);const f=(x=(v=t.table)==null?void 0:v.table_users)==null?void 0:x.find(k=>k.playing===!0);f&&l.info(`Player ${f.user.username} is playing`,{position:An.TOP_CENTER,timeout:3e3})}),ce.on("getUpdateTableUser",p=>{var f,v,x,k,m,S,D;if(p){const M=(v=(f=t.table)==null?void 0:f.table_users)==null?void 0:v.map(L=>L.id).indexOf(p.id);if(t.table&&M!==void 0){if(!((x=t.table.table_users[M])!=null&&x.status)&&(p==null?void 0:p.status)||((k=t.table.table_users[M].status)==null?void 0:k.id)!==((m=p==null?void 0:p.status)==null?void 0:m.id)){const L=(S=p.status)!=null&&S.name?`${p.user.username} update his status to "${(D=p.status)==null?void 0:D.name}"`:`${p.user.username} has remove his status`;l.info(L)}t.table.table_users[M]=p}}}),ce.on("getStartGameDetails",(p,f)=>{p&&(t.table=p,g(),t.deckReferences.junk&&(t.dropZones.junk[0].element=t.deckReferences.junk,t.dropZones.user[0].element=t.deckReferences.user,t.dropZones.table[0].element=t.deckReferences.table)),f&&(t.cards=f)}),ce.on("exitUsersFromTable",()=>{t.room=null,t.gameMaster=!1,t.table=null,t.cards=null,l.info("Game master has remove you from the table"),bt.push({name:"lobby"})}),ce.on("getTableGameStatus",p=>{p&&(t.table=p,p.status===E.PAUSE&&l.info("Game has paused"),p.status===E.PLAYING&&l.info("Game has start"),p.status===E.GAME_MASTER_EDIT&&l.info("The game master is preparing the table"),p.status===E.FINISH&&l.info("Game has end"))}),ce.on("getShowAllCards",p=>{p&&(r.value=p)}),ce.on("getUpdateCard",p=>{p&&(console.log("get Update Card"),t.zIndex=p.z_index+1,d(p))}),ce.on("getShuffleDeck",(p,f)=>{var v,x,k,m;if(p){p.forEach(D=>{d(D)});const S=(m=(k=(x=(v=t.table)==null?void 0:v.table_decks)==null?void 0:x.find(D=>D.id===f))==null?void 0:k.deck)==null?void 0:m.name;l.info(`Game Master has shuffle the deck "${S}"`)}})});const d=p=>{var v,x,k;const f=(v=t.cards)==null?void 0:v.findIndex(m=>m.id===p.id);f&&f>-1&&t.cards&&(t.updateHistory(t.cards[f],p),(x=t.cards)==null||x.splice(f,1),(k=t.cards)==null||k.push(p),t.removeRedoHistoryMovement())},g=()=>{var p,f;t.resetDropZones(),(f=(p=t.table)==null?void 0:p.table_decks)==null||f.forEach(v=>{switch(v.type){case ye.DECK:t.dropZones.deck.push({tableDeckId:v.id,element:null});break;case ye.JUNK:t.dropZones.junk.push({tableDeckId:v.id,element:null});break;case ye.TABLE:t.dropZones.table.push({tableDeckId:v.id,element:null});break;case ye.USER:v.id===t.getExistPlayerTableDeckId&&t.dropZones.user.push({tableDeckId:v.id,element:null});break}})},b=U([{status:E.WAITING,title:"Game not started yet",message:"...waiting from Game Master to start the game"},{status:E.PAUSE,title:"Game Paused",message:"...waiting from Game Master to resume the game"},{status:E.GAME_MASTER_EDIT,title:"Game edit from Game Master",message:"..waiting from Game Master to finish with the configure of the table"},{status:E.FINISH,title:"Game has ended",message:"...waiting from Game Master to start the game"}]);return on(()=>{t.room=null,t.gameMaster=!1,t.cards=null,t.refHistory=[],t.refHistoryRedo=[],t._leaveTable(),c.value.forEach(p=>{ce.off(p)})}),(p,f)=>{var v,x,k;return w(),T(J,null,[_(C,{class:"relative one-page w-full bg-dark"},{default:h(()=>{var m,S;return[u("div",ss,[((m=i(t).table)==null?void 0:m.status)===i(E).PLAYING||i(t).gameMaster&&((S=i(t).table)==null?void 0:S.status)===i(E).GAME_MASTER_EDIT?(w(),P(Gr,{key:0})):(w(!0),T(J,{key:1},ne(b.value,({status:D,title:M,message:L})=>(w(),P(C,{key:D,items:"center",justify:"center"},{default:h(()=>{var R;return[((R=i(t).table)==null?void 0:R.status)===D?(w(),P(rs,{key:0,title:M,message:L},null,8,["title","message"])):j("",!0)]}),_:2},1024))),128)),_(ns)]),_(Zo,{class:"w-1/6 overflow-x-auto"})]}),_:1}),i(t).gameMaster?(w(),P(sa,{key:0,onOpenSettings:f[0]||(f[0]=m=>{s.value=m,o.value=!0}),onStopGame:f[1]||(f[1]=m=>i(t)._stopGame()),onLeaveGame:f[2]||(f[2]=m=>i(t)._leaveGame()),onNewGame:f[3]||(f[3]=m=>i(t)._newGame()),onUpdateTableGameStatus:f[4]||(f[4]=m=>i(t)._updateTableGameStatus(m)),onShowAllCards:f[5]||(f[5]=m=>i(t)._showAllCards()),onSetNextPlayer:f[6]||(f[6]=m=>i(t)._setNextPlayer(m)),onShuffleDeck:f[7]||(f[7]=m=>i(t)._shuffleDeck()),onHistoryMovement:f[8]||(f[8]=m=>i(t).historyMovement(m))})):j("",!0),i(t).gameMaster?(w(),P(Ao,{key:1,"table-users":(v=i(t).table)==null?void 0:v.table_users,"table-status":{status:(x=i(t).table)==null?void 0:x.status},table:i(t).table||void 0,"modal-open":o.value,onCloseModal:f[9]||(f[9]=m=>o.value=!1),onUpdateTurnTableUsers:f[10]||(f[10]=m=>i(t)._updateTurnTableUsers()),onUpdateRole:f[11]||(f[11]=(m,S)=>i(t)._setRoleTableUser(m,S)),onUpdateStatus:f[12]||(f[12]=(m,S)=>i(t)._setStatusTableUser(m,S)),onUpdateTeam:f[13]||(f[13]=(m,S)=>i(t)._setTeamTableUser(m,S)),onStopGame:f[14]||(f[14]=m=>i(t)._stopGame()),onLeaveGame:f[15]||(f[15]=m=>i(t)._leaveGame()),onNewGame:f[16]||(f[16]=m=>i(t)._newGame()),onUpdateTableGameStatus:f[17]||(f[17]=m=>i(t)._updateTableGameStatus(m)),onShowAllCards:f[18]||(f[18]=m=>i(t)._showAllCards()),"menu-tab":s.value,onRemovePlayer:f[19]||(f[19]=m=>i(t)._removePlayer(m)),onSetNextPlayer:f[20]||(f[20]=m=>i(t)._setNextPlayer(m))},null,8,["table-users","table-status","table","modal-open","menu-tab"])):j("",!0),i(t).cards?(w(),P(Ur,{key:2,"is-modal-open":r.value,cards:i(t).cards,"table-decks":(k=i(t).table)==null?void 0:k.table_decks,onCloseModal:f[21]||(f[21]=m=>r.value=!1)},null,8,["is-modal-open","cards","table-decks"])):j("",!0)],64)}}});export{gs as default};
