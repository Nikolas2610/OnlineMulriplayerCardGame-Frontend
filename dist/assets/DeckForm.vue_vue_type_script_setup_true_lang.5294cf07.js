import{d as R,r as d,u as U,p as $,q as _,o as l,c as n,w as O,i as e,E as p,J as F,O as I,D as v,H as f,I as k,k as w,C,j as P,l as h,m as T,N as A,G as M}from"./index.6223a65c.js";import{M as L}from"./Modal.91a465e1.js";import{a as q}from"./axiosUser.42d6f6e2.js";import{l as D}from"./helpers.2772eae0.js";const z=["onSubmit"],G=e("label",{for:"name",class:"block text-lg font-medium"},"Name",-1),H={class:"mt-1"},J={class:"mt-4 flex"},K=e("label",{for:"private",class:"block text-lg font-medium mr-2"},"Private",-1),Q={class:"flex justify-center"},W=e("button",{class:"mt-4 ml-2 btn-green",type:"submit"},"Submit",-1),X=e("h1",{class:"mt-4 text-lg font-medium"},"Card List:",-1),Y={class:"mt-4 grid grid-cols-8 gap-2 px-4 py-8 border rounded-lg shadow-lg"},Z=["src"],ee=e("label",{for:"role",class:"block text-sm font-medium"},"Role",-1),se=e("option",{value:"user"},"User",-1),te=e("option",{value:"public"},"Public",-1),oe=[se,te],ae={key:0,class:"grid grid-cols-4 mt-4 gap-2 max-h-96 overflow-y-scroll"},le=["onClick"],ne=["src"],me=R({__name:"DeckForm",props:["successResponse","deckData","edit"],emits:["sendData","closeEditMode"],setup(b,{emit:V}){const i=b,c=d("user"),m=d(!1),u=d(),r=d([]),S=U(),t=d({name:"",private:!1,cards:[]});$(()=>{i.deckData&&(t.value={...i.deckData},t.value.cards=[...i.deckData.cards],t.value&&t.value.cards.forEach(o=>{r.value.push(o.id)}))});const g=()=>{m.value=!1},N=async()=>{await x(),m.value=!0},x=async()=>{var o;try{const a=await q.get(`card/${c.value}`);u.value=a.data,((o=u.value)==null?void 0:o.length)===0&&S.warning("First you have to create card before choose cards for the deck")}catch(a){console.log(a)}},y=o=>r.value.includes(o),j=o=>{const a=t.value.cards.findIndex(s=>s.id===o.id);a>=0?(r.value=r.value.filter(s=>s!==o.id),t.value.cards.splice(a,1)):(r.value.push(o.id),t.value.cards.push(o))},B=()=>{V("sendData",t.value)},E=()=>{t.value.name="",t.value.private=!1,t.value.cards=[],r.value=[]};return _(()=>c.value,o=>{x()}),_(()=>i.successResponse,o=>{o===1&&E()}),(o,a)=>(l(),n(f,null,[t.value?(l(),n("form",{key:0,class:"mt-10 px-4 py-8",onSubmit:O(B,["prevent"])},[e("div",null,[G,e("div",H,[p(e("input",{id:"name",type:"text","onUpdate:modelValue":a[0]||(a[0]=s=>t.value.name=s),class:"block w-full appearance-none rounded-md border border-gray-300 px-3 py-2 placeholder-gray-400 shadow-sm focus:border-secondary focus:outline-none sm:text-lg"},null,512),[[F,t.value.name]])])]),e("div",J,[K,p(e("input",{id:"private",type:"checkbox","onUpdate:modelValue":a[1]||(a[1]=s=>t.value.private=s),class:""},null,512),[[I,t.value.private]])]),e("div",Q,[b.edit?(l(),n("button",{key:0,class:"mt-4 mr-2 btn-grey",type:"button",onClick:a[2]||(a[2]=s=>o.$emit("closeEditMode"))},"Back")):v("",!0),e("button",{class:"mt-4 btn-outline-green",onClick:N,type:"button"},"Add or Remove Cards"),W]),X,e("div",Y,[(l(!0),n(f,null,k(t.value.cards,s=>(l(),n("div",{class:"col-span-1 flex justify-center items-center flex-col gap-2",key:`sel-${s.id}`},[e("img",{src:w(D)(s.image),class:"w-32 max-h-52"},null,8,Z),e("div",null,C(s.name),1)]))),128))])],40,z)):v("",!0),P(L,{modalOpen:m.value,onCloseModal:g},{modal_header:h(()=>[T(" Add or Remove Cards ")]),body:h(()=>[e("div",null,[ee,p(e("select",{id:"role","onUpdate:modelValue":a[3]||(a[3]=s=>c.value=s),class:"block w-full appearance-none rounded-md border border-gray-300 px-3 py-2 placeholder-gray-400 shadow-sm focus:border-secondary focus:outline-none sm:text-sm"},oe,512),[[A,c.value]])]),u.value?(l(),n("div",ae,[(l(!0),n(f,null,k(u.value,s=>(l(),n("div",{class:M(["col-span-1 flex justify-center items-center flex-col cursor-pointer hover:bg-secondary hover:text-white rounded-lg p-2 transition duration-300",y(s.id)?"bg-primary":""]),onClick:re=>j(s),key:s.id},[e("img",{src:w(D)(s.image),class:"w-32 max-h-52"},null,8,ne),e("div",{class:M(["pt-2",y(s.id)?"text-white":""])},C(s.name),3)],10,le))),128))])):v("",!0)]),modal_footer:h(()=>[e("button",{class:"flex w-full items-center justify-center rounded-md border border-transparent bg-gray-400 px-8 py-3 text-base font-medium text-white hover:bg-secondary hover:text-white md:py-3 md:px-10 md:text-lg ml-2",onClick:g}," Close ")]),_:1},8,["modalOpen"])],64))}});export{me as _};
