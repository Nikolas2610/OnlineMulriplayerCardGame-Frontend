import{d as V,o as l,c as n,H as f,m as _,C as b,G as g,i as t,r as c,u as z,p as F,q as M,w as I,E as y,J as O,Y as P,j as u,l as m,I as D,k as S,D as $,X as T}from"./index.e95d5f3b.js";import{a as q,M as A}from"./ModalSecondaryButton.07737cf3.js";import{a as H}from"./axiosUser.b9d2e0f3.js";import{l as B}from"./helpers.2772eae0.js";import{_ as L}from"./PrimaryButton.vue_vue_type_script_setup_true_lang.0920ccac.js";import{_ as G}from"./Flex.vue_vue_type_script_setup_true_lang.2447bbeb.js";const J=["type","disabled"],X={key:0,class:"animate-spin -ml-1 h-7 w-7 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Y=t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),K=t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),Q=[Y,K],W=V({__name:"SecondaryButton",props:{type:{type:String,default:"button"},width:{type:String,default:"52"},title:{type:String,required:!0},loading:{type:Boolean,default:!1},disable:{type:Boolean,default:!1}},setup(r){return(x,d)=>(l(),n("button",{class:g(["flex items-center justify-center rounded-md border border-transparent bg-black text-white px-8 py-2 text-base font-medium hover:bg-opacity-80 hover:text-white md:px-10 md:text-base transition duration-150",[`w-${r.width}`,r.disable?"cursor-not-allowed bg-opacity-50":"cursor-pointer"]]),type:r.type==="button"?"button":"submit",disabled:r.disable},[r.loading?(l(),n("svg",X,Q)):(l(),n(f,{key:1},[_(b(r.title),1)],64))],10,J))}}),Z=["onSubmit"],ee=t("label",{for:"name",class:"block text-lg font-medium"},"Name",-1),te={class:"mt-1"},se={class:"mt-4 flex"},ae=t("label",{for:"private",class:"block text-lg font-medium mr-2"},"Private",-1),oe=t("h1",{class:"mt-4 text-lg font-medium"},"Card List:",-1),le={class:"mt-4 grid grid-cols-8 gap-2 px-4 py-8 border rounded-lg shadow-lg"},ne=["src"],re=t("label",{for:"role",class:"block text-sm font-medium"},"Role",-1),ie=t("option",{value:"user"},"User",-1),de=t("option",{value:"public"},"Public",-1),ce=[ie,de],ue={key:0,class:"grid grid-cols-4 mt-4 gap-2 max-h-96 overflow-y-scroll"},me=["onClick"],pe=["src"],xe=V({__name:"DeckForm",props:["successResponse","deckData","edit"],emits:["sendData"],setup(r,{emit:x}){const d=r,p=c("user"),h=c(!1),v=c(),i=c([]),j=z(),s=c({name:"",private:!1,cards:[]});F(()=>{d.deckData&&(s.value={...d.deckData},s.value.cards=[...d.deckData.cards],s.value&&s.value.cards.forEach(a=>{i.value.push(a.id)}))});const k=()=>{h.value=!1},N=async()=>{await w(),h.value=!0},w=async()=>{var a;try{const o=await H.get(`card/${p.value}`);v.value=o.data,((a=v.value)==null?void 0:a.length)===0&&j.warning("First you have to create card before choose cards for the deck")}catch(o){console.log(o)}},C=a=>i.value.includes(a),U=a=>{const o=s.value.cards.findIndex(e=>e.id===a.id);o>=0?(i.value=i.value.filter(e=>e!==a.id),s.value.cards.splice(o,1)):(i.value.push(a.id),s.value.cards.push(a))},E=()=>{x("sendData",s.value)},R=()=>{s.value.name="",s.value.private=!1,s.value.cards=[],i.value=[]};return M(()=>p.value,a=>{w()}),M(()=>d.successResponse,a=>{a===1&&R()}),(a,o)=>(l(),n(f,null,[s.value?(l(),n("form",{key:0,class:"mt-10 px-4 py-8",onSubmit:I(E,["prevent"])},[t("div",null,[ee,t("div",te,[y(t("input",{id:"name",type:"text","onUpdate:modelValue":o[0]||(o[0]=e=>s.value.name=e),class:"block w-full appearance-none rounded-md border border-gray-300 px-3 py-2 placeholder-gray-400 shadow-sm focus:border-secondary focus:outline-none sm:text-lg"},null,512),[[O,s.value.name]])])]),t("div",se,[ae,y(t("input",{id:"private",type:"checkbox","onUpdate:modelValue":o[1]||(o[1]=e=>s.value.private=e),class:""},null,512),[[P,s.value.private]])]),u(G,{justify:"center",gap:4},{default:m(()=>[u(W,{title:"Edit cards deck",onClick:N}),u(L,{title:"Submit",type:"submit"})]),_:1}),oe,t("div",le,[(l(!0),n(f,null,D(s.value.cards,e=>(l(),n("div",{class:"col-span-1 flex justify-center items-center flex-col gap-2",key:`sel-${e.id}`},[t("img",{src:S(B)(e.image),class:"w-32 max-h-52"},null,8,ne),t("div",null,b(e.name),1)]))),128))])],40,Z)):$("",!0),u(A,{modalOpen:h.value,onCloseModal:k},{modal_header:m(()=>[_(" Add or Remove Cards ")]),body:m(()=>[t("div",null,[re,y(t("select",{id:"role","onUpdate:modelValue":o[2]||(o[2]=e=>p.value=e),class:"block w-full appearance-none rounded-md border border-gray-300 px-3 py-2 placeholder-gray-400 shadow-sm focus:border-secondary focus:outline-none sm:text-sm"},ce,512),[[T,p.value]])]),v.value?(l(),n("div",ue,[(l(!0),n(f,null,D(v.value,e=>(l(),n("div",{class:g(["col-span-1 flex justify-center items-center flex-col cursor-pointer hover:bg-secondary hover:text-white rounded-lg p-2 transition duration-300",C(e.id)?"bg-primary":""]),onClick:ve=>U(e),key:e.id},[t("img",{src:S(B)(e.image),class:"w-32 max-h-52"},null,8,pe),t("div",{class:g(["pt-2",C(e.id)?"text-white":""])},b(e.name),3)],10,me))),128))])):$("",!0)]),modal_footer:m(()=>[u(q,{onClick:k},{default:m(()=>[_(" Close ")]),_:1})]),_:1},8,["modalOpen"])],64))}});export{xe as _};
