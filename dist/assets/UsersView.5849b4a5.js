import{d as I,u as B,r as m,b as P,o as u,c as p,i as e,j as r,l,m as i,H as k,I as D,C as d,G as R,E as x,J as E,X as F,Y,D as j}from"./index.9e6e0a8e.js";import{a as S,M as T}from"./ModalSecondaryButton.3030f7a0.js";import{M as z}from"./MyTitle.42b29322.js";import{a as C}from"./axiosUser.315dace8.js";import{_ as V}from"./ModalPrimaryButton.vue_vue_type_script_setup_true_lang.252669b6.js";import"./Flex.vue_vue_type_script_setup_true_lang.f0738fbf.js";import"./_plugin-vue_export-helper.cdc0426e.js";const G={class:"w-full overflow-x-auto px-4"},H={class:"mx-auto mt-4"},J={class:"flex flex-col"},X={class:"overflow-x-auto shadow-md sm:rounded-lg"},q={class:"inline-block min-w-full align-middle"},K={class:"overflow-hidden"},Q={class:"min-w-full divide-y table-fixed divide-gray-700"},W={class:"bg-gray-700"},Z=e("th",{scope:"col",class:"p-4"},[e("span",{class:"sr-only"},"Edit")],-1),ee={class:"divide-y bg-dark divide-gray-700"},te={class:"py-4 px-6 text-sm font-medium whitespace-nowrap text-white"},se={class:"py-4 px-6 text-sm font-medium whitespace-nowrap text-white"},oe={class:"py-4 px-6 text-sm font-medium whitespace-nowrap text-white"},ae={class:"py-4 px-6 text-sm font-medium whitespace-nowrap text-white"},le={class:"py-4 px-6 text-sm font-medium whitespace-nowrap text-white"},ne={class:"py-4 px-6 text-sm font-medium whitespace-nowrap text-white"},de={class:"py-4 px-6 text-sm font-medium text-right whitespace-nowrap"},re=["onClick"],ie=["onClick"],ce={key:0,class:""},me={class:"mb-3"},ue=e("label",{for:"username",class:"block text-sm font-medium"},"Username",-1),pe={class:"mt-1"},_e={class:"mb-3"},fe=e("label",{for:"email",class:"block text-sm font-medium"},"Email",-1),he={class:"mt-1"},ve={class:"mb-3"},xe=e("label",{for:"role",class:"block text-sm font-medium"},"Role",-1),ye=e("option",{value:"admin"},"Admin",-1),we=e("option",{value:"user"},"User",-1),ge=[ye,we],be={class:"mt-1 flex"},ke=e("label",{for:"dealer",class:"block text-sm font-medium mr-2"},"Email Confirmed",-1),Ce=e("div",null," Do you really want to delete this user? This process cannot be undone. ",-1),Oe=I({__name:"UsersView",setup(Me){const c=B(),_=m([]),y=m(!1),w=m(!1),s=m(),g=m(null),A=m(["ID","USERNAME","EMAIL","ROLE","EMAIL CONFIRM","CREATED AT","UPDATED AT"]);P(()=>{b()});const f=()=>{y.value=!1},h=()=>{w.value=!1},O=o=>{s.value={..._.value[o]},g.value=_.value[o].id,y.value=!0},L=o=>{g.value=_.value[o].id,w.value=!0},b=async()=>{const o=await C.get("admin/users");_.value=o.data},M=o=>{const a=new Date(o),t=a.toLocaleDateString();return`${a.toLocaleTimeString()} - ${t}`},N=async()=>{try{if((await C.delete("admin/user/delete",{data:{id:g.value}})).data.affected===1){c.success("User deleted successfully"),h(),b();return}c.error("Something went wrong. Please try again later")}catch(o){c.error(`Something went wrong. Please try again later. 
${o.response.data.message}`),h()}},$=async()=>{var o,a,t,n,v;try{if((await C.patch("admin/user/edit",{id:(o=s.value)==null?void 0:o.id,username:(a=s.value)==null?void 0:a.username,email:(t=s.value)==null?void 0:t.email,email_confirmed:(n=s.value)==null?void 0:n.email_confirmed,role:(v=s.value)==null?void 0:v.role})).data.affected===1){c.success("User updated successfully"),f(),b();return}c.error("Something went wrong. Please try again later")}catch(U){c.error("Something went wrong. Please try again later",U),f()}};return(o,a)=>(u(),p(k,null,[e("div",G,[r(z,null,{default:l(()=>[i("Users")]),_:1}),e("div",H,[e("div",J,[e("div",X,[e("div",q,[e("div",K,[e("table",Q,[e("thead",W,[e("tr",null,[(u(!0),p(k,null,D(A.value,(t,n)=>(u(),p("th",{scope:"col",key:n,class:"py-3 px-6 text-xs font-medium tracking-wider text-left uppercase text-gray-400"},d(t),1))),128)),Z])]),e("tbody",ee,[(u(!0),p(k,null,D(_.value,(t,n)=>(u(),p("tr",{class:"hover:bg-gray-700",key:`gamme_${t.id}`},[e("td",te,d(t.id),1),e("td",se,d(t.username),1),e("td",oe,d(t.email),1),e("td",ae,d(t.role),1),e("td",{class:R(["py-4 px-6 text-sm font-medium whitespace-nowrap",t.email_confirmed?"text-primary":"text-red-500"])},d(t.email_confirmed?"YES":"NO"),3),e("td",le,d(M(t.created_at)),1),e("td",ne,d(M(t.updated_at)),1),e("td",de,[e("button",{class:"text-blue-500 hover:underline",onClick:v=>O(n)}," View Details ",8,re),e("button",{class:"text-red-500 hover:underline ml-2",onClick:v=>L(n)}," Delete ",8,ie)])]))),128))])])])])])])])]),r(T,{modalOpen:y.value,onCloseModal:f},{modal_header:l(()=>[i(" Edit User ")]),body:l(()=>[s.value?(u(),p("div",ce,[e("div",me,[ue,e("div",pe,[x(e("input",{id:"username",type:"text","onUpdate:modelValue":a[0]||(a[0]=t=>s.value.username=t),class:"block w-full appearance-none rounded-md border border-gray-300 px-3 py-2 placeholder-gray-400 shadow-sm focus:border-secondary focus:outline-none sm:text-sm"},null,512),[[E,s.value.username]])])]),e("div",_e,[fe,e("div",he,[x(e("input",{id:"email",type:"email","onUpdate:modelValue":a[1]||(a[1]=t=>s.value.email=t),class:"block w-full appearance-none rounded-md border border-gray-300 px-3 py-2 placeholder-gray-400 shadow-sm focus:border-secondary focus:outline-none sm:text-sm"},null,512),[[E,s.value.email]])])]),e("div",ve,[xe,x(e("select",{id:"role","onUpdate:modelValue":a[2]||(a[2]=t=>s.value.role=t),class:"block w-full appearance-none rounded-md border border-gray-300 px-3 py-2 placeholder-gray-400 shadow-sm focus:border-secondary focus:outline-none sm:text-sm"},ge,512),[[F,s.value.role]])]),e("div",be,[ke,x(e("input",{id:"dealer",type:"checkbox","onUpdate:modelValue":a[3]||(a[3]=t=>s.value.email_confirmed=t),class:""},null,512),[[Y,s.value.email_confirmed]])])])):j("",!0)]),modal_footer:l(()=>[r(S,{onClick:f},{default:l(()=>[i(" Close ")]),_:1}),r(V,{onClick:$},{default:l(()=>[i(" Save Changes ")]),_:1})]),_:1},8,["modalOpen"]),r(T,{modalOpen:w.value,onCloseModal:h},{modal_header:l(()=>[i(" Are you sure? ")]),body:l(()=>[Ce]),modal_footer:l(()=>[r(S,{onClick:h},{default:l(()=>[i(" Close ")]),_:1}),r(V,{onClick:N,deleteButton:!0},{default:l(()=>[i(" Delete ")]),_:1})]),_:1},8,["modalOpen"])],64))}});export{Oe as default};
