import{a as D,M}from"./ModalSecondaryButton.3030f7a0.js";import{M as x}from"./MyTitle.42b29322.js";import{u as $}from"./TableStore.8739fcfe.js";import{_ as E}from"./TableForm.vue_vue_type_script_setup_true_lang.cd5af309.js";import{P as A}from"./PreLoader.a6559b58.js";import{d as B,a4 as N,r as w,v as V,o as a,c as l,k as c,j as i,l as n,m,i as e,H as v,I as y,C as d,L}from"./index.9e6e0a8e.js";import{_ as R}from"./BackButton.vue_vue_type_script_setup_true_lang.4067e871.js";import{_ as O}from"./Flex.vue_vue_type_script_setup_true_lang.f0738fbf.js";import{_ as I}from"./ModalPrimaryButton.vue_vue_type_script_setup_true_lang.252669b6.js";const P={class:"w-full overflow-x-auto px-4"},U={key:0},j={key:0,class:"mx-auto mt-4"},F={class:"flex flex-col"},G={class:"overflow-x-auto shadow-md sm:rounded-lg"},H={class:"inline-block min-w-full align-middle"},Y={class:"overflow-hidden"},q={class:"min-w-full divide-y table-fixed divide-gray-700"},z={class:"bg-gray-700"},J=e("th",{scope:"col",class:"p-4"},[e("span",{class:"sr-only"},"Edit")],-1),K={class:"divide-y bg-dark divide-gray-700"},Q={class:"py-4 px-6 text-sm font-medium whitespace-nowrap text-white"},W={class:"py-4 px-6 text-sm font-medium whitespace-nowrap text-white"},X={class:"py-4 px-6 text-sm font-medium whitespace-nowrap text-white"},Z={class:"py-4 px-6 text-sm font-medium whitespace-nowrap text-white"},ee={class:"py-4 px-6 text-sm font-medium whitespace-nowrap text-white"},te={class:"py-4 px-6 text-sm font-medium whitespace-nowrap text-white"},se={class:"py-4 px-6 text-sm font-medium text-right whitespace-nowrap"},oe=["onClick"],ae=["onClick"],le={key:1},ie=e("div",null," Do you really want to delete this table? This process cannot be undone. ",-1),xe=B({__name:"TablesView",setup(ne){const b=N(),t=$(),_=w(!1),p=V(()=>t.tables),g=w(["No","NAME","PRIVATE","STATUS","GAME","CREATED AT"]);b.meta.admin?t.setUserRole("admin"):t.setUserRole("user");const f=()=>{_.value=!1},k=u=>{const o=new Date(u),s=o.toLocaleDateString();return`${o.toLocaleTimeString()} - ${s}`},T=()=>{_.value=!1,t._delete()},S=u=>{t.selectedTableId=p.value[u].id,_.value=!0};return t.fetchTables(),t.fetchGames(),(u,o)=>(a(),l("div",P,[c(t).editTable?(a(),l("div",le,[i(O,{justify:"between"},{default:n(()=>[i(x,null,{default:n(()=>[m("Edit Table")]),_:1}),i(R,{title:"Back to Tables",onClick:o[0]||(o[0]=s=>c(t).editTable=!1)})]),_:1}),i(E,{onSubmit:o[1]||(o[1]=()=>c(t)._update())})])):(a(),l("div",U,[i(x,null,{default:n(()=>[m("My Tables")]),_:1}),c(t).loadingStatus?(a(),L(A,{key:1})):(a(),l("div",j,[e("div",F,[e("div",G,[e("div",H,[e("div",Y,[e("table",q,[e("thead",z,[e("tr",null,[(a(!0),l(v,null,y(g.value,(s,r)=>(a(),l("th",{scope:"col",key:r,class:"py-3 px-6 text-xs font-medium tracking-wider text-left uppercase text-gray-400"},d(s),1))),128)),J])]),e("tbody",K,[(a(!0),l(v,null,y(c(p),(s,r)=>{var h;return a(),l("tr",{class:"hover:bg-gray-700",key:`table_${s.id}`},[e("td",Q,d(r+1),1),e("td",W,d(s.name),1),e("td",X,d(s.private?"YES":"NO"),1),e("td",Z,d(s.status),1),e("td",ee,d((h=s.game)==null?void 0:h.name),1),e("td",te,d(k(s.created_at)),1),e("td",se,[e("button",{class:"text-blue-500 hover:underline",onClick:C=>c(t).toggleEditTable(r)}," View Details ",8,oe),e("button",{class:"text-red-500 hover:underline ml-2",onClick:C=>S(r)}," Delete ",8,ae)])])}),128))])])])])])])]))])),i(M,{modalOpen:_.value,onCloseModal:f},{modal_header:n(()=>[m(" Are you sure? ")]),body:n(()=>[ie]),modal_footer:n(()=>[i(D,{onClick:f},{default:n(()=>[m(" Close ")]),_:1}),i(I,{onClick:o[2]||(o[2]=s=>T()),deleteButton:!0},{default:n(()=>[m(" Delete ")]),_:1})]),_:1},8,["modalOpen"])]))}});export{xe as _};
