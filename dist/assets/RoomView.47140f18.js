import{b as te}from"./helpers.8cb9edf9.js";import{d as se,h as qe,o as f,L as O,l as h,j as y,m as L,i as l,k as r,c as T,G as N,$ as Xt,u as cn,P as hn,H as B,I as W,C as V,D as H,r as F,q as Je,a0 as Mn,V as Pn,a1 as On,a2 as Nn,_ as Rn,M as Gn,b as yt,w as ye,a3 as zn,a as Bt,p as fn,Z as pn,E as Ln,J as Un,a4 as Hn,e as xt,a5 as jn}from"./index.6223a65c.js";import{u as Ee,T as S,H as qt,R as tt,M as Jt,a as fe}from"./PlayerStore.3cf15375.js";import{_ as C,a as Bn,b as kt}from"./CheckBoxField.vue_vue_type_script_setup_true_lang.c7674399.js";import{o as Vn,a as Fn,M as mn}from"./Modal.91a465e1.js";import{D as Nt,a as Re,_ as gn}from"./DarkTableCell.vue_vue_type_script_setup_true_lang.0aa17a6a.js";import{_ as Kt}from"./PrimaryButton.vue_vue_type_script_setup_true_lang.cfa643c9.js";import{_ as nt}from"./InputField.vue_vue_type_script_setup_true_lang.f83c3aaa.js";import{c as Yn}from"./cards.91b306de.js";import{_ as Wn}from"./BackButton.vue_vue_type_script_setup_true_lang.afe87207.js";import{l as pt}from"./helpers.2772eae0.js";import{D as Zn}from"./DeckType.enum.90a9c7f8.js";const Xn=l("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 focus:outline-none",viewBox:"0 0 16 16"},[l("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3v-3z"})],-1),qn=["disabled"],Jn={key:0,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 focus:outline-none",viewBox:"0 0 16 16"},Kn=l("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"},null,-1),Qn=[Kn],eo={key:1,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 focus:outline-none",viewBox:"0 0 16 16"},to=l("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"},null,-1),no=[to],oo=["disabled"],ao=l("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 focus:outline-none",viewBox:"0 0 16 16"},[l("path",{d:"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"}),l("path",{"fill-rule":"evenodd",d:"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"})],-1),ro=l("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 focus:outline-none",viewBox:"0 0 16 16"},[l("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.5 5A1.5 1.5 0 0 0 5 6.5v3A1.5 1.5 0 0 0 6.5 11h3A1.5 1.5 0 0 0 11 9.5v-3A1.5 1.5 0 0 0 9.5 5h-3z"})],-1),so=["disabled"],io=l("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 focus:outline-none",viewBox:"0 0 16 16"},[l("path",{d:"M2.5 15a.5.5 0 1 1 0-1h1v-1a4.5 4.5 0 0 1 2.557-4.06c.29-.139.443-.377.443-.59v-.7c0-.213-.154-.451-.443-.59A4.5 4.5 0 0 1 3.5 3V2h-1a.5.5 0 0 1 0-1h11a.5.5 0 0 1 0 1h-1v1a4.5 4.5 0 0 1-2.557 4.06c-.29.139-.443.377-.443.59v.7c0 .213.154.451.443.59A4.5 4.5 0 0 1 12.5 13v1h1a.5.5 0 0 1 0 1h-11zm2-13v1c0 .537.12 1.045.337 1.5h6.326c.216-.455.337-.963.337-1.5V2h-7zm3 6.35c0 .701-.478 1.236-1.011 1.492A3.5 3.5 0 0 0 4.5 13s.866-1.299 3-1.48V8.35zm1 0v3.17c2.134.181 3 1.48 3 1.48a3.5 3.5 0 0 0-1.989-3.158C8.978 9.586 8.5 9.052 8.5 8.351z"})],-1),lo=l("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 focus:outline-none",viewBox:"0 0 16 16"},[l("path",{d:"M1.5 15a.5.5 0 0 0 0 1h13a.5.5 0 0 0 0-1H13V2.5A1.5 1.5 0 0 0 11.5 1H11V.5a.5.5 0 0 0-.57-.495l-7 1A.5.5 0 0 0 3 1.5V15H1.5zM11 2h.5a.5.5 0 0 1 .5.5V15h-1V2zm-2.5 8c-.276 0-.5-.448-.5-1s.224-1 .5-1 .5.448.5 1-.224 1-.5 1z"})],-1),uo=l("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 focus:outline-none",viewBox:"0 0 16 16"},[l("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-4.79-2.907L8.5 7.028V5.5a.5.5 0 0 0-.79-.407L5 7.028V5.5a.5.5 0 0 0-1 0v5a.5.5 0 0 0 1 0V8.972l2.71 1.935a.5.5 0 0 0 .79-.407V8.972l2.71 1.935A.5.5 0 0 0 12 10.5v-5a.5.5 0 0 0-.79-.407z"})],-1),co=l("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 focus:outline-none",viewBox:"0 0 16 16"},[l("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM4.79 5.093A.5.5 0 0 0 4 5.5v5a.5.5 0 0 0 .79.407L7.5 8.972V10.5a.5.5 0 0 0 .79.407L11 8.972V10.5a.5.5 0 0 0 1 0v-5a.5.5 0 0 0-1 0v1.528L8.29 5.093a.5.5 0 0 0-.79.407v1.528L4.79 5.093z"})],-1),ho=l("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 focus:outline-none",viewBox:"0 0 16 16"},[l("path",{d:"M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5z"})],-1),fo=l("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 focus:outline-none",viewBox:"0 0 16 16"},[l("path",{"fill-rule":"evenodd",d:"M0 3.5A.5.5 0 0 1 .5 3H1c2.202 0 3.827 1.24 4.874 2.418.49.552.865 1.102 1.126 1.532.26-.43.636-.98 1.126-1.532C9.173 4.24 10.798 3 13 3v1c-1.798 0-3.173 1.01-4.126 2.082A9.624 9.624 0 0 0 7.556 8a9.624 9.624 0 0 0 1.317 1.918C9.828 10.99 11.204 12 13 12v1c-2.202 0-3.827-1.24-4.874-2.418A10.595 10.595 0 0 1 7 9.05c-.26.43-.636.98-1.126 1.532C4.827 11.76 3.202 13 1 13H.5a.5.5 0 0 1 0-1H1c1.798 0 3.173-1.01 4.126-2.082A9.624 9.624 0 0 0 6.444 8a9.624 9.624 0 0 0-1.317-1.918C4.172 5.01 2.796 4 1 4H.5a.5.5 0 0 1-.5-.5z"}),l("path",{d:"M13 5.466V1.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384l-2.36 1.966a.25.25 0 0 1-.41-.192zm0 9v-3.932a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384l-2.36 1.966a.25.25 0 0 1-.41-.192z"})],-1),po=l("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 focus:outline-none",viewBox:"0 0 16 16"},[l("path",{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16ZM7.729 5.055A.5.5 0 0 1 8 5.5v1.886l3.21-2.293A.5.5 0 0 1 12 5.5v5a.5.5 0 0 1-.79.407L8 8.614V10.5a.5.5 0 0 1-.79.407l-3.5-2.5a.5.5 0 0 1 0-.814l3.5-2.5a.5.5 0 0 1 .519-.038Z"})],-1),mo=l("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 focus:outline-none",viewBox:"0 0 16 16"},[l("path",{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16ZM4.79 5.093 8 7.386V5.5a.5.5 0 0 1 .79-.407l3.5 2.5a.5.5 0 0 1 0 .814l-3.5 2.5A.5.5 0 0 1 8 10.5V8.614l-3.21 2.293A.5.5 0 0 1 4 10.5v-5a.5.5 0 0 1 .79-.407Z"})],-1),go=l("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 focus:outline-none",viewBox:"0 0 16 16"},[l("path",{d:"M7 14s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1H7Zm4-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6Zm-5.784 6A2.238 2.238 0 0 1 5 13c0-1.355.68-2.75 1.936-3.72A6.325 6.325 0 0 0 5 9c-4 0-5 3-5 4s1 1 1 1h4.216ZM4.5 8a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z"})],-1),vo=l("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 focus:outline-none",viewBox:"0 0 16 16"},[l("path",{d:"M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm15 2h-4v3h4V4zm0 4h-4v3h4V8zm0 4h-4v3h3a1 1 0 0 0 1-1v-2zm-5 3v-3H6v3h4zm-5 0v-3H1v2a1 1 0 0 0 1 1h3zm-4-4h4V8H1v3zm0-4h4V4H1v3zm5-3v3h4V4H6zm4 4H6v3h4V8z"})],-1),bo=l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"#fff",viewBox:"0 0 16 16",class:"hover:fill-primary transition duration-300 group-hover:animate-spin h-8 w-8 focus:outline-none"},[l("path",{d:"M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492zM5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0z"}),l("path",{d:"M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52l-.094-.319zm-2.633.283c.246-.835 1.428-.835 1.674 0l.094.319a1.873 1.873 0 0 0 2.693 1.115l.291-.16c.764-.415 1.6.42 1.184 1.185l-.159.292a1.873 1.873 0 0 0 1.116 2.692l.318.094c.835.246.835 1.428 0 1.674l-.319.094a1.873 1.873 0 0 0-1.115 2.693l.16.291c.415.764-.42 1.6-1.185 1.184l-.291-.159a1.873 1.873 0 0 0-2.693 1.116l-.094.318c-.246.835-1.428.835-1.674 0l-.094-.319a1.873 1.873 0 0 0-2.692-1.115l-.292.16c-.764.415-1.6-.42-1.184-1.185l.159-.291A1.873 1.873 0 0 0 1.945 8.93l-.319-.094c-.835-.246-.835-1.428 0-1.674l.319-.094A1.873 1.873 0 0 0 3.06 4.377l-.16-.292c-.415-.764.42-1.6 1.185-1.184l.292.159a1.873 1.873 0 0 0 2.692-1.115l.094-.319z"})],-1),wo=se({__name:"GameMasterMenu",emits:["openSettings","stopGame","leaveGame","newGame","updateTableGameStatus","showAllCards","setNextPlayer","shuffleDeck","historyMovement"],setup(n,{emit:e}){const t=Ee(),o=()=>{var s,i,d;if(!t.clickCardId)return!0;const a=(i=(s=t.cards)==null?void 0:s.find(c=>c.id===t.clickCardId))==null?void 0:i.table_deck.id;return!a||((d=t.table)==null?void 0:d.status)!==S.PLAYING?!0:a===t.getJunkTableDeckId?!1:!t.dropZones.deck.some(c=>c.tableDeckId===a)};return(a,s)=>{const i=qe("VTooltip");return f(),O(C,{class:"border text-white fixed bottom-32 rounded-3xl h-14 bg-dark py-0 transition duration-1000 group cursor-pointer -translate-x-[685px] hover:-translate-x-[20px] z-[2147483639]",items:"center",justify:"center"},{default:h(()=>[y(C,{class:"border-r h-full px-6 pl-10",items:"center",gap:4},{default:h(()=>{var d,c;return[y(C,{justify:"center",items:"center",class:"hover:text-primary duration-300 transition",onClick:s[0]||(s[0]=u=>a.$emit("newGame"))},{default:h(()=>[y(i,{distance:"22"},{popper:h(()=>[L(" New Game ")]),default:h(()=>[Xn]),_:1})]),_:1}),y(C,{justify:"center",items:"center",class:"hover:text-primary duration-300 transition"},{default:h(()=>{var u,m,w,E;return[l("button",{onClick:s[1]||(s[1]=I=>{var D,p;return((D=r(t).table)==null?void 0:D.status)===r(S).PLAYING||((p=r(t).table)==null?void 0:p.status)===r(S).GAME_MASTER_EDIT?a.$emit("updateTableGameStatus",r(S).PAUSE):a.$emit("updateTableGameStatus",r(S).PLAYING)}),disabled:((u=r(t).table)==null?void 0:u.status)===r(S).FINISH||((m=r(t).table)==null?void 0:m.status)===r(S).WAITING,class:N(((w=r(t).table)==null?void 0:w.status)===r(S).FINISH||((E=r(t).table)==null?void 0:E.status)===r(S).WAITING?"cursor-not-allowed opacity-50":"")},[y(i,{distance:"22"},{popper:h(()=>[L(" Pause / Resume Game ")]),default:h(()=>{var I;return[((I=r(t).table)==null?void 0:I.status)!==r(S).PAUSE?(f(),T("svg",Jn,Qn)):(f(),T("svg",eo,no))]}),_:1})],10,qn)]}),_:1}),y(C,{justify:"center",items:"center",class:"hover:text-primary duration-300 transition"},{default:h(()=>{var u,m,w,E;return[l("button",{onClick:s[2]||(s[2]=I=>{var D,p;return((D=r(t).table)==null?void 0:D.status)===r(S).PLAYING||((p=r(t).table)==null?void 0:p.status)===r(S).PAUSE?a.$emit("updateTableGameStatus",r(S).GAME_MASTER_EDIT):a.$emit("updateTableGameStatus",r(S).PLAYING)}),disabled:((u=r(t).table)==null?void 0:u.status)===r(S).FINISH||((m=r(t).table)==null?void 0:m.status)===r(S).WAITING,class:N(((w=r(t).table)==null?void 0:w.status)===r(S).FINISH||((E=r(t).table)==null?void 0:E.status)===r(S).WAITING?"cursor-not-allowed opacity-50":"")},[y(i,{distance:"22"},{popper:h(()=>[L(" Hide table from other players to edit the table ")]),default:h(()=>[ao]),_:1})],10,oo)]}),_:1}),y(C,{justify:"center",items:"center",class:N(["hover:text-primary duration-300 transition",((d=r(t).table)==null?void 0:d.status)===r(S).WAITING||((c=r(t).table)==null?void 0:c.status)===r(S).FINISH?"cursor-not-allowed opacity-50":""]),onClick:s[3]||(s[3]=u=>{var m;return((m=r(t).table)==null?void 0:m.status)!==r(S).WAITING?a.$emit("stopGame"):""})},{default:h(()=>[y(i,{distance:"22"},{popper:h(()=>[L(" End Game ")]),default:h(()=>[ro]),_:1})]),_:1},8,["class"]),y(C,{justify:"center",items:"center"},{default:h(()=>{var u,m;return[l("button",{disabled:((u=r(t).table)==null?void 0:u.status)!==r(S).FINISH,onClick:s[4]||(s[4]=w=>a.$emit("updateTableGameStatus",r(S).WAITING)),class:N(["hover:text-primary duration-300 transition",((m=r(t).table)==null?void 0:m.status)!==r(S).FINISH?"cursor-not-allowed opacity-50":""])},[y(i,{distance:"22"},{popper:h(()=>[L(" Wait For New Players ")]),default:h(()=>[io]),_:1})],10,so)]}),_:1}),y(C,{justify:"center",items:"center",class:"hover:text-primary duration-300 transition",onClick:s[5]||(s[5]=u=>a.$emit("leaveGame"))},{default:h(()=>[y(i,{distance:"22"},{popper:h(()=>[L(" Leave Game All Players ")]),default:h(()=>[lo]),_:1})]),_:1})]}),_:1}),y(C,{class:"border-r h-full px-6",items:"center",gap:4},{default:h(()=>{var d,c,u,m,w,E,I,D;return[y(C,{justify:"center",items:"center",onClick:s[6]||(s[6]=p=>{var g;return((g=r(t).table)==null?void 0:g.status)===r(S).PLAYING?a.$emit("setNextPlayer",!1):""}),class:N([((d=r(t).table)==null?void 0:d.status)===r(S).PLAYING?"":"cursor-not-allowed opacity-50","hover:text-primary duration-300 transition"])},{default:h(()=>[y(i,{distance:"22"},{popper:h(()=>[L(" Previous Player ")]),default:h(()=>[uo]),_:1})]),_:1},8,["class"]),y(C,{justify:"center",items:"center",onClick:s[7]||(s[7]=p=>{var g;return((g=r(t).table)==null?void 0:g.status)===r(S).PLAYING?a.$emit("setNextPlayer",!0):""}),class:N(["hover:text-primary duration-300 transition",((c=r(t).table)==null?void 0:c.status)===r(S).PLAYING?"":"cursor-not-allowed opacity-50"])},{default:h(()=>[y(i,{distance:"22"},{popper:h(()=>[L(" Next Player ")]),default:h(()=>[co]),_:1})]),_:1},8,["class"]),y(C,{justify:"center",items:"center",class:N(["hover:text-primary duration-300 transition",((u=r(t).table)==null?void 0:u.status)===r(S).PLAYING||((m=r(t).table)==null?void 0:m.status)===r(S).PAUSE?"":"cursor-not-allowed opacity-50"]),onClick:s[8]||(s[8]=p=>{var g,_;return((g=r(t).table)==null?void 0:g.status)===r(S).PLAYING||((_=r(t).table)==null?void 0:_.status)===r(S).PAUSE?a.$emit("showAllCards"):""})},{default:h(()=>[y(i,{distance:"22"},{popper:h(()=>[L(" Show all cards to players ")]),default:h(()=>[ho]),_:1})]),_:1},8,["class"]),y(C,{justify:"center",items:"center",class:N(["hover:text-primary duration-300 transition",o()?"cursor-not-allowed opacity-50":""]),onClick:s[9]||(s[9]=p=>o()?"":a.$emit("shuffleDeck"))},{default:h(()=>[y(i,{distance:"22"},{popper:h(()=>[L(" Shuffle selected deck ")]),default:h(()=>[fo]),_:1})]),_:1},8,["class"]),y(C,{justify:"center",items:"center",class:N(["hover:text-primary duration-300 transition",(((w=r(t).table)==null?void 0:w.status)===r(S).PLAYING||((E=r(t).table)==null?void 0:E.status)===r(S).GAME_MASTER_EDIT)&&r(t).refUndoHistory.length>0?"":"cursor-not-allowed opacity-50"]),onClick:s[10]||(s[10]=p=>{var g,_;return(((g=r(t).table)==null?void 0:g.status)===r(S).PLAYING||((_=r(t).table)==null?void 0:_.status)===r(S).GAME_MASTER_EDIT)&&r(t).refUndoHistory.length>0?a.$emit("historyMovement",r(qt).UNDO):""})},{default:h(()=>[y(i,{distance:"22"},{popper:h(()=>[L(" Undo Card Movement ")]),default:h(()=>[po]),_:1})]),_:1},8,["class"]),y(C,{justify:"center",items:"center",class:N(["hover:text-primary duration-300 transition",(((I=r(t).table)==null?void 0:I.status)===r(S).PLAYING||((D=r(t).table)==null?void 0:D.status)===r(S).GAME_MASTER_EDIT)&&r(t).refRedoHistory.length>0?"":"cursor-not-allowed opacity-50"]),onClick:s[11]||(s[11]=p=>{var g,_;return(((g=r(t).table)==null?void 0:g.status)===r(S).PLAYING||((_=r(t).table)==null?void 0:_.status)===r(S).GAME_MASTER_EDIT)&&r(t).refRedoHistory.length>0?a.$emit("historyMovement",r(qt).REDO):""})},{default:h(()=>[y(i,{distance:"22"},{popper:h(()=>[L(" Redo Card Movement ")]),default:h(()=>[mo]),_:1})]),_:1},8,["class"])]}),_:1}),y(C,{class:"border-r h-full px-6",items:"center",gap:4},{default:h(()=>{var d,c;return[y(C,{justify:"center",items:"center",onClick:s[12]||(s[12]=u=>a.$emit("openSettings",2)),class:"hover:text-primary duration-300 transition"},{default:h(()=>[y(i,{distance:"22"},{popper:h(()=>[L(" Open User List ")]),default:h(()=>[go]),_:1})]),_:1}),y(C,{justify:"center",items:"center",onClick:s[13]||(s[13]=u=>{var m,w;return((m=r(t).table)==null?void 0:m.status)===r(S).FINISH||((w=r(t).table)==null?void 0:w.status)===r(S).WAITING?"":a.$emit("openSettings",3)}),class:N([((d=r(t).table)==null?void 0:d.status)===r(S).FINISH||((c=r(t).table)==null?void 0:c.status)===r(S).WAITING?"cursor-not-allowed opacity-50":"","hover:text-primary duration-300 transition"])},{default:h(()=>[y(i,{distance:"22"},{popper:h(()=>[L(" Edit Rank Table ")]),default:h(()=>[vo]),_:1})]),_:1},8,["class"])]}),_:1}),y(C,{justify:"center",items:"center",class:"px-8",onClick:s[14]||(s[14]=d=>a.$emit("openSettings",1))},{default:h(()=>[y(i,{distance:"18"},{popper:h(()=>[L(" Open Game Master Settings ")]),default:h(()=>[bo]),_:1})]),_:1})]),_:1})}}});/*!
  * vue-draggable-next v2.1.0
  * (c) 2021 Anish George
  * @license MIT
  *//**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Qt(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,o)}return t}function we(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Qt(Object(t),!0).forEach(function(o){yo(n,o,t[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Qt(Object(t)).forEach(function(o){Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(t,o))})}return n}function lt(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?lt=function(e){return typeof e}:lt=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lt(n)}function yo(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function xe(){return xe=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},xe.apply(this,arguments)}function _o(n,e){if(n==null)return{};var t={},o=Object.keys(n),a,s;for(s=0;s<o.length;s++)a=o[s],!(e.indexOf(a)>=0)&&(t[a]=n[a]);return t}function xo(n,e){if(n==null)return{};var t=_o(n,e),o,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(a=0;a<s.length;a++)o=s[a],!(e.indexOf(o)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,o)||(t[o]=n[o]))}return t}var ko="1.14.0";function _e(n){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(n)}var ke=_e(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Ke=_e(/Edge/i),en=_e(/firefox/i),Fe=_e(/safari/i)&&!_e(/chrome/i)&&!_e(/android/i),vn=_e(/iP(ad|od|hone)/i),Co=_e(/chrome/i)&&_e(/android/i),bn={capture:!1,passive:!1};function U(n,e,t){n.addEventListener(e,t,!ke&&bn)}function z(n,e,t){n.removeEventListener(e,t,!ke&&bn)}function mt(n,e){if(!!e){if(e[0]===">"&&(e=e.substring(1)),n)try{if(n.matches)return n.matches(e);if(n.msMatchesSelector)return n.msMatchesSelector(e);if(n.webkitMatchesSelector)return n.webkitMatchesSelector(e)}catch{return!1}return!1}}function So(n){return n.host&&n!==document&&n.host.nodeType?n.host:n.parentNode}function ve(n,e,t,o){if(n){t=t||document;do{if(e!=null&&(e[0]===">"?n.parentNode===t&&mt(n,e):mt(n,e))||o&&n===t)return n;if(n===t)break}while(n=So(n))}return null}var tn=/\s+/g;function de(n,e,t){if(n&&e)if(n.classList)n.classList[t?"add":"remove"](e);else{var o=(" "+n.className+" ").replace(tn," ").replace(" "+e+" "," ");n.className=(o+(t?" "+e:"")).replace(tn," ")}}function M(n,e,t){var o=n&&n.style;if(o){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(n,""):n.currentStyle&&(t=n.currentStyle),e===void 0?t:t[e];!(e in o)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),o[e]=t+(typeof t=="string"?"":"px")}}function Le(n,e){var t="";if(typeof n=="string")t=n;else do{var o=M(n,"transform");o&&o!=="none"&&(t=o+" "+t)}while(!e&&(n=n.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(t)}function wn(n,e,t){if(n){var o=n.getElementsByTagName(e),a=0,s=o.length;if(t)for(;a<s;a++)t(o[a],a);return o}return[]}function be(){var n=document.scrollingElement;return n||document.documentElement}function Q(n,e,t,o,a){if(!(!n.getBoundingClientRect&&n!==window)){var s,i,d,c,u,m,w;if(n!==window&&n.parentNode&&n!==be()?(s=n.getBoundingClientRect(),i=s.top,d=s.left,c=s.bottom,u=s.right,m=s.height,w=s.width):(i=0,d=0,c=window.innerHeight,u=window.innerWidth,m=window.innerHeight,w=window.innerWidth),(e||t)&&n!==window&&(a=a||n.parentNode,!ke))do if(a&&a.getBoundingClientRect&&(M(a,"transform")!=="none"||t&&M(a,"position")!=="static")){var E=a.getBoundingClientRect();i-=E.top+parseInt(M(a,"border-top-width")),d-=E.left+parseInt(M(a,"border-left-width")),c=i+s.height,u=d+s.width;break}while(a=a.parentNode);if(o&&n!==window){var I=Le(a||n),D=I&&I.a,p=I&&I.d;I&&(i/=p,d/=D,w/=D,m/=p,c=i+m,u=d+w)}return{top:i,left:d,bottom:c,right:u,width:w,height:m}}}function nn(n,e,t){for(var o=$e(n,!0),a=Q(n)[e];o;){var s=Q(o)[t],i=void 0;if(t==="top"||t==="left"?i=a>=s:i=a<=s,!i)return o;if(o===be())break;o=$e(o,!1)}return!1}function Ue(n,e,t,o){for(var a=0,s=0,i=n.children;s<i.length;){if(i[s].style.display!=="none"&&i[s]!==P.ghost&&(o||i[s]!==P.dragged)&&ve(i[s],t.draggable,n,!1)){if(a===e)return i[s];a++}s++}return null}function Vt(n,e){for(var t=n.lastElementChild;t&&(t===P.ghost||M(t,"display")==="none"||e&&!mt(t,e));)t=t.previousElementSibling;return t||null}function he(n,e){var t=0;if(!n||!n.parentNode)return-1;for(;n=n.previousElementSibling;)n.nodeName.toUpperCase()!=="TEMPLATE"&&n!==P.clone&&(!e||mt(n,e))&&t++;return t}function on(n){var e=0,t=0,o=be();if(n)do{var a=Le(n),s=a.a,i=a.d;e+=n.scrollLeft*s,t+=n.scrollTop*i}while(n!==o&&(n=n.parentNode));return[e,t]}function To(n,e){for(var t in n)if(!!n.hasOwnProperty(t)){for(var o in e)if(e.hasOwnProperty(o)&&e[o]===n[t][o])return Number(t)}return-1}function $e(n,e){if(!n||!n.getBoundingClientRect)return be();var t=n,o=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var a=M(t);if(t.clientWidth<t.scrollWidth&&(a.overflowX=="auto"||a.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(a.overflowY=="auto"||a.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return be();if(o||e)return t;o=!0}}while(t=t.parentNode);return be()}function $o(n,e){if(n&&e)for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function Ct(n,e){return Math.round(n.top)===Math.round(e.top)&&Math.round(n.left)===Math.round(e.left)&&Math.round(n.height)===Math.round(e.height)&&Math.round(n.width)===Math.round(e.width)}var Ye;function yn(n,e){return function(){if(!Ye){var t=arguments,o=this;t.length===1?n.call(o,t[0]):n.apply(o,t),Ye=setTimeout(function(){Ye=void 0},e)}}}function Do(){clearTimeout(Ye),Ye=void 0}function _n(n,e,t){n.scrollLeft+=e,n.scrollTop+=t}function xn(n){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(n).cloneNode(!0):t?t(n).clone(!0)[0]:n.cloneNode(!0)}var ce="Sortable"+new Date().getTime();function Eo(){var n=[],e;return{captureAnimationState:function(){if(n=[],!!this.options.animation){var o=[].slice.call(this.el.children);o.forEach(function(a){if(!(M(a,"display")==="none"||a===P.ghost)){n.push({target:a,rect:Q(a)});var s=we({},n[n.length-1].rect);if(a.thisAnimationDuration){var i=Le(a,!0);i&&(s.top-=i.f,s.left-=i.e)}a.fromRect=s}})}},addAnimationState:function(o){n.push(o)},removeAnimationState:function(o){n.splice(To(n,{target:o}),1)},animateAll:function(o){var a=this;if(!this.options.animation){clearTimeout(e),typeof o=="function"&&o();return}var s=!1,i=0;n.forEach(function(d){var c=0,u=d.target,m=u.fromRect,w=Q(u),E=u.prevFromRect,I=u.prevToRect,D=d.rect,p=Le(u,!0);p&&(w.top-=p.f,w.left-=p.e),u.toRect=w,u.thisAnimationDuration&&Ct(E,w)&&!Ct(m,w)&&(D.top-w.top)/(D.left-w.left)===(m.top-w.top)/(m.left-w.left)&&(c=Ao(D,E,I,a.options)),Ct(w,m)||(u.prevFromRect=m,u.prevToRect=w,c||(c=a.options.animation),a.animate(u,D,w,c)),c&&(s=!0,i=Math.max(i,c),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},c),u.thisAnimationDuration=c)}),clearTimeout(e),s?e=setTimeout(function(){typeof o=="function"&&o()},i):typeof o=="function"&&o(),n=[]},animate:function(o,a,s,i){if(i){M(o,"transition",""),M(o,"transform","");var d=Le(this.el),c=d&&d.a,u=d&&d.d,m=(a.left-s.left)/(c||1),w=(a.top-s.top)/(u||1);o.animatingX=!!m,o.animatingY=!!w,M(o,"transform","translate3d("+m+"px,"+w+"px,0)"),this.forRepaintDummy=Io(o),M(o,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),M(o,"transform","translate3d(0,0,0)"),typeof o.animated=="number"&&clearTimeout(o.animated),o.animated=setTimeout(function(){M(o,"transition",""),M(o,"transform",""),o.animated=!1,o.animatingX=!1,o.animatingY=!1},i)}}}}function Io(n){return n.offsetWidth}function Ao(n,e,t,o){return Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*o.animation}var Oe=[],St={initializeByDefault:!0},Qe={mount:function(e){for(var t in St)St.hasOwnProperty(t)&&!(t in e)&&(e[t]=St[t]);Oe.forEach(function(o){if(o.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Oe.push(e)},pluginEvent:function(e,t,o){var a=this;this.eventCanceled=!1,o.cancel=function(){a.eventCanceled=!0};var s=e+"Global";Oe.forEach(function(i){!t[i.pluginName]||(t[i.pluginName][s]&&t[i.pluginName][s](we({sortable:t},o)),t.options[i.pluginName]&&t[i.pluginName][e]&&t[i.pluginName][e](we({sortable:t},o)))})},initializePlugins:function(e,t,o,a){Oe.forEach(function(d){var c=d.pluginName;if(!(!e.options[c]&&!d.initializeByDefault)){var u=new d(e,t,e.options);u.sortable=e,u.options=e.options,e[c]=u,xe(o,u.defaults)}});for(var s in e.options)if(!!e.options.hasOwnProperty(s)){var i=this.modifyOption(e,s,e.options[s]);typeof i<"u"&&(e.options[s]=i)}},getEventProperties:function(e,t){var o={};return Oe.forEach(function(a){typeof a.eventProperties=="function"&&xe(o,a.eventProperties.call(t[a.pluginName],e))}),o},modifyOption:function(e,t,o){var a;return Oe.forEach(function(s){!e[s.pluginName]||s.optionListeners&&typeof s.optionListeners[t]=="function"&&(a=s.optionListeners[t].call(e[s.pluginName],o))}),a}};function Mo(n){var e=n.sortable,t=n.rootEl,o=n.name,a=n.targetEl,s=n.cloneEl,i=n.toEl,d=n.fromEl,c=n.oldIndex,u=n.newIndex,m=n.oldDraggableIndex,w=n.newDraggableIndex,E=n.originalEvent,I=n.putSortable,D=n.extraEventProperties;if(e=e||t&&t[ce],!!e){var p,g=e.options,_="on"+o.charAt(0).toUpperCase()+o.substr(1);window.CustomEvent&&!ke&&!Ke?p=new CustomEvent(o,{bubbles:!0,cancelable:!0}):(p=document.createEvent("Event"),p.initEvent(o,!0,!0)),p.to=i||t,p.from=d||t,p.item=a||t,p.clone=s,p.oldIndex=c,p.newIndex=u,p.oldDraggableIndex=m,p.newDraggableIndex=w,p.originalEvent=E,p.pullMode=I?I.lastPutMode:void 0;var v=we(we({},D),Qe.getEventProperties(o,e));for(var b in v)p[b]=v[b];t&&t.dispatchEvent(p),g[_]&&g[_].call(e,p)}}var Po=["evt"],le=function(e,t){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=o.evt,s=xo(o,Po);Qe.pluginEvent.bind(P)(e,t,we({dragEl:x,parentEl:Z,ghostEl:R,rootEl:Y,nextEl:Pe,lastDownEl:dt,cloneEl:X,cloneHidden:Te,dragStarted:je,putSortable:ne,activeSortable:P.active,originalEvent:a,oldIndex:ze,oldDraggableIndex:We,newIndex:ue,newDraggableIndex:Se,hideGhostForTarget:Tn,unhideGhostForTarget:$n,cloneNowHidden:function(){Te=!0},cloneNowShown:function(){Te=!1},dispatchSortableEvent:function(d){ie({sortable:t,name:d,originalEvent:a})}},s))};function ie(n){Mo(we({putSortable:ne,cloneEl:X,targetEl:x,rootEl:Y,oldIndex:ze,oldDraggableIndex:We,newIndex:ue,newDraggableIndex:Se},n))}var x,Z,R,Y,Pe,dt,X,Te,ze,ue,We,Se,ot,ne,Ge=!1,gt=!1,vt=[],Ae,ge,Tt,$t,an,rn,je,Ne,Ze,Xe=!1,at=!1,ut,re,Dt=[],Rt=!1,bt=[],_t=typeof document<"u",rt=vn,sn=Ke||ke?"cssFloat":"float",Oo=_t&&!Co&&!vn&&"draggable"in document.createElement("div"),kn=function(){if(!!_t){if(ke)return!1;var n=document.createElement("x");return n.style.cssText="pointer-events:auto",n.style.pointerEvents==="auto"}}(),Cn=function(e,t){var o=M(e),a=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),s=Ue(e,0,t),i=Ue(e,1,t),d=s&&M(s),c=i&&M(i),u=d&&parseInt(d.marginLeft)+parseInt(d.marginRight)+Q(s).width,m=c&&parseInt(c.marginLeft)+parseInt(c.marginRight)+Q(i).width;if(o.display==="flex")return o.flexDirection==="column"||o.flexDirection==="column-reverse"?"vertical":"horizontal";if(o.display==="grid")return o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&d.float&&d.float!=="none"){var w=d.float==="left"?"left":"right";return i&&(c.clear==="both"||c.clear===w)?"vertical":"horizontal"}return s&&(d.display==="block"||d.display==="flex"||d.display==="table"||d.display==="grid"||u>=a&&o[sn]==="none"||i&&o[sn]==="none"&&u+m>a)?"vertical":"horizontal"},No=function(e,t,o){var a=o?e.left:e.top,s=o?e.right:e.bottom,i=o?e.width:e.height,d=o?t.left:t.top,c=o?t.right:t.bottom,u=o?t.width:t.height;return a===d||s===c||a+i/2===d+u/2},Ro=function(e,t){var o;return vt.some(function(a){var s=a[ce].options.emptyInsertThreshold;if(!(!s||Vt(a))){var i=Q(a),d=e>=i.left-s&&e<=i.right+s,c=t>=i.top-s&&t<=i.bottom+s;if(d&&c)return o=a}}),o},Sn=function(e){function t(s,i){return function(d,c,u,m){var w=d.options.group.name&&c.options.group.name&&d.options.group.name===c.options.group.name;if(s==null&&(i||w))return!0;if(s==null||s===!1)return!1;if(i&&s==="clone")return s;if(typeof s=="function")return t(s(d,c,u,m),i)(d,c,u,m);var E=(i?d:c).options.group.name;return s===!0||typeof s=="string"&&s===E||s.join&&s.indexOf(E)>-1}}var o={},a=e.group;(!a||lt(a)!="object")&&(a={name:a}),o.name=a.name,o.checkPull=t(a.pull,!0),o.checkPut=t(a.put),o.revertClone=a.revertClone,e.group=o},Tn=function(){!kn&&R&&M(R,"display","none")},$n=function(){!kn&&R&&M(R,"display","")};_t&&document.addEventListener("click",function(n){if(gt)return n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.stopImmediatePropagation&&n.stopImmediatePropagation(),gt=!1,!1},!0);var Me=function(e){if(x){e=e.touches?e.touches[0]:e;var t=Ro(e.clientX,e.clientY);if(t){var o={};for(var a in e)e.hasOwnProperty(a)&&(o[a]=e[a]);o.target=o.rootEl=t,o.preventDefault=void 0,o.stopPropagation=void 0,t[ce]._onDragOver(o)}}},Go=function(e){x&&x.parentNode[ce]._isOutsideThisEl(e.target)};function P(n,e){if(!(n&&n.nodeType&&n.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(n));this.el=n,this.options=e=xe({},e),n[ce]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(n.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Cn(n,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(i,d){i.setData("Text",d.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:P.supportPointer!==!1&&"PointerEvent"in window&&!Fe,emptyInsertThreshold:5};Qe.initializePlugins(this,n,t);for(var o in t)!(o in e)&&(e[o]=t[o]);Sn(e);for(var a in this)a.charAt(0)==="_"&&typeof this[a]=="function"&&(this[a]=this[a].bind(this));this.nativeDraggable=e.forceFallback?!1:Oo,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?U(n,"pointerdown",this._onTapStart):(U(n,"mousedown",this._onTapStart),U(n,"touchstart",this._onTapStart)),this.nativeDraggable&&(U(n,"dragover",this),U(n,"dragenter",this)),vt.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),xe(this,Eo())}P.prototype={constructor:P,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Ne=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,x):this.options.direction},_onTapStart:function(e){if(!!e.cancelable){var t=this,o=this.el,a=this.options,s=a.preventOnFilter,i=e.type,d=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,c=(d||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||c,m=a.filter;if(Fo(o),!x&&!(/mousedown|pointerdown/.test(i)&&e.button!==0||a.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&Fe&&c&&c.tagName.toUpperCase()==="SELECT")&&(c=ve(c,a.draggable,o,!1),!(c&&c.animated)&&dt!==c)){if(ze=he(c),We=he(c,a.draggable),typeof m=="function"){if(m.call(this,e,c,this)){ie({sortable:t,rootEl:u,name:"filter",targetEl:c,toEl:o,fromEl:o}),le("filter",t,{evt:e}),s&&e.cancelable&&e.preventDefault();return}}else if(m&&(m=m.split(",").some(function(w){if(w=ve(u,w.trim(),o,!1),w)return ie({sortable:t,rootEl:w,name:"filter",targetEl:c,fromEl:o,toEl:o}),le("filter",t,{evt:e}),!0}),m)){s&&e.cancelable&&e.preventDefault();return}a.handle&&!ve(u,a.handle,o,!1)||this._prepareDragStart(e,d,c)}}},_prepareDragStart:function(e,t,o){var a=this,s=a.el,i=a.options,d=s.ownerDocument,c;if(o&&!x&&o.parentNode===s){var u=Q(o);if(Y=s,x=o,Z=x.parentNode,Pe=x.nextSibling,dt=o,ot=i.group,P.dragged=x,Ae={target:x,clientX:(t||e).clientX,clientY:(t||e).clientY},an=Ae.clientX-u.left,rn=Ae.clientY-u.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,x.style["will-change"]="all",c=function(){if(le("delayEnded",a,{evt:e}),P.eventCanceled){a._onDrop();return}a._disableDelayedDragEvents(),!en&&a.nativeDraggable&&(x.draggable=!0),a._triggerDragStart(e,t),ie({sortable:a,name:"choose",originalEvent:e}),de(x,i.chosenClass,!0)},i.ignore.split(",").forEach(function(m){wn(x,m.trim(),Et)}),U(d,"dragover",Me),U(d,"mousemove",Me),U(d,"touchmove",Me),U(d,"mouseup",a._onDrop),U(d,"touchend",a._onDrop),U(d,"touchcancel",a._onDrop),en&&this.nativeDraggable&&(this.options.touchStartThreshold=4,x.draggable=!0),le("delayStart",this,{evt:e}),i.delay&&(!i.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(Ke||ke))){if(P.eventCanceled){this._onDrop();return}U(d,"mouseup",a._disableDelayedDrag),U(d,"touchend",a._disableDelayedDrag),U(d,"touchcancel",a._disableDelayedDrag),U(d,"mousemove",a._delayedDragTouchMoveHandler),U(d,"touchmove",a._delayedDragTouchMoveHandler),i.supportPointer&&U(d,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(c,i.delay)}else c()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){x&&Et(x),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;z(e,"mouseup",this._disableDelayedDrag),z(e,"touchend",this._disableDelayedDrag),z(e,"touchcancel",this._disableDelayedDrag),z(e,"mousemove",this._delayedDragTouchMoveHandler),z(e,"touchmove",this._delayedDragTouchMoveHandler),z(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?U(document,"pointermove",this._onTouchMove):t?U(document,"touchmove",this._onTouchMove):U(document,"mousemove",this._onTouchMove):(U(x,"dragend",this),U(Y,"dragstart",this._onDragStart));try{document.selection?ct(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(Ge=!1,Y&&x){le("dragStarted",this,{evt:t}),this.nativeDraggable&&U(document,"dragover",Go);var o=this.options;!e&&de(x,o.dragClass,!1),de(x,o.ghostClass,!0),P.active=this,e&&this._appendGhost(),ie({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(ge){this._lastX=ge.clientX,this._lastY=ge.clientY,Tn();for(var e=document.elementFromPoint(ge.clientX,ge.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ge.clientX,ge.clientY),e!==t);)t=e;if(x.parentNode[ce]._isOutsideThisEl(e),t)do{if(t[ce]){var o=void 0;if(o=t[ce]._onDragOver({clientX:ge.clientX,clientY:ge.clientY,target:e,rootEl:t}),o&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);$n()}},_onTouchMove:function(e){if(Ae){var t=this.options,o=t.fallbackTolerance,a=t.fallbackOffset,s=e.touches?e.touches[0]:e,i=R&&Le(R,!0),d=R&&i&&i.a,c=R&&i&&i.d,u=rt&&re&&on(re),m=(s.clientX-Ae.clientX+a.x)/(d||1)+(u?u[0]-Dt[0]:0)/(d||1),w=(s.clientY-Ae.clientY+a.y)/(c||1)+(u?u[1]-Dt[1]:0)/(c||1);if(!P.active&&!Ge){if(o&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<o)return;this._onDragStart(e,!0)}if(R){i?(i.e+=m-(Tt||0),i.f+=w-($t||0)):i={a:1,b:0,c:0,d:1,e:m,f:w};var E="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");M(R,"webkitTransform",E),M(R,"mozTransform",E),M(R,"msTransform",E),M(R,"transform",E),Tt=m,$t=w,ge=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!R){var e=this.options.fallbackOnBody?document.body:Y,t=Q(x,!0,rt,!0,e),o=this.options;if(rt){for(re=e;M(re,"position")==="static"&&M(re,"transform")==="none"&&re!==document;)re=re.parentNode;re!==document.body&&re!==document.documentElement?(re===document&&(re=be()),t.top+=re.scrollTop,t.left+=re.scrollLeft):re=be(),Dt=on(re)}R=x.cloneNode(!0),de(R,o.ghostClass,!1),de(R,o.fallbackClass,!0),de(R,o.dragClass,!0),M(R,"transition",""),M(R,"transform",""),M(R,"box-sizing","border-box"),M(R,"margin",0),M(R,"top",t.top),M(R,"left",t.left),M(R,"width",t.width),M(R,"height",t.height),M(R,"opacity","0.8"),M(R,"position",rt?"absolute":"fixed"),M(R,"zIndex","100000"),M(R,"pointerEvents","none"),P.ghost=R,e.appendChild(R),M(R,"transform-origin",an/parseInt(R.style.width)*100+"% "+rn/parseInt(R.style.height)*100+"%")}},_onDragStart:function(e,t){var o=this,a=e.dataTransfer,s=o.options;if(le("dragStart",this,{evt:e}),P.eventCanceled){this._onDrop();return}le("setupClone",this),P.eventCanceled||(X=xn(x),X.draggable=!1,X.style["will-change"]="",this._hideClone(),de(X,this.options.chosenClass,!1),P.clone=X),o.cloneId=ct(function(){le("clone",o),!P.eventCanceled&&(o.options.removeCloneOnHide||Y.insertBefore(X,x),o._hideClone(),ie({sortable:o,name:"clone"}))}),!t&&de(x,s.dragClass,!0),t?(gt=!0,o._loopId=setInterval(o._emulateDragOver,50)):(z(document,"mouseup",o._onDrop),z(document,"touchend",o._onDrop),z(document,"touchcancel",o._onDrop),a&&(a.effectAllowed="move",s.setData&&s.setData.call(o,a,x)),U(document,"drop",o),M(x,"transform","translateZ(0)")),Ge=!0,o._dragStartId=ct(o._dragStarted.bind(o,t,e)),U(document,"selectstart",o),je=!0,Fe&&M(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,o=e.target,a,s,i,d=this.options,c=d.group,u=P.active,m=ot===c,w=d.sort,E=ne||u,I,D=this,p=!1;if(Rt)return;function g(He,In){le(He,D,we({evt:e,isOwner:m,axis:I?"vertical":"horizontal",revert:i,dragRect:a,targetRect:s,canSort:w,fromSortable:E,target:o,completed:v,onMove:function(Zt,An){return st(Y,t,x,a,Zt,Q(Zt),e,An)},changed:b},In))}function _(){g("dragOverAnimationCapture"),D.captureAnimationState(),D!==E&&E.captureAnimationState()}function v(He){return g("dragOverCompleted",{insertion:He}),He&&(m?u._hideClone():u._showClone(D),D!==E&&(de(x,ne?ne.options.ghostClass:u.options.ghostClass,!1),de(x,d.ghostClass,!0)),ne!==D&&D!==P.active?ne=D:D===P.active&&ne&&(ne=null),E===D&&(D._ignoreWhileAnimating=o),D.animateAll(function(){g("dragOverAnimationComplete"),D._ignoreWhileAnimating=null}),D!==E&&(E.animateAll(),E._ignoreWhileAnimating=null)),(o===x&&!x.animated||o===t&&!o.animated)&&(Ne=null),!d.dragoverBubble&&!e.rootEl&&o!==document&&(x.parentNode[ce]._isOutsideThisEl(e.target),!He&&Me(e)),!d.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),p=!0}function b(){ue=he(x),Se=he(x,d.draggable),ie({sortable:D,name:"change",toEl:t,newIndex:ue,newDraggableIndex:Se,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),o=ve(o,d.draggable,t,!0),g("dragOver"),P.eventCanceled)return p;if(x.contains(e.target)||o.animated&&o.animatingX&&o.animatingY||D._ignoreWhileAnimating===o)return v(!1);if(gt=!1,u&&!d.disabled&&(m?w||(i=Z!==Y):ne===this||(this.lastPutMode=ot.checkPull(this,u,x,e))&&c.checkPut(this,u,x,e))){if(I=this._getDirection(e,o)==="vertical",a=Q(x),g("dragOverValid"),P.eventCanceled)return p;if(i)return Z=Y,_(),this._hideClone(),g("revert"),P.eventCanceled||(Pe?Y.insertBefore(x,Pe):Y.appendChild(x)),v(!0);var $=Vt(t,d.draggable);if(!$||Ho(e,I,this)&&!$.animated){if($===x)return v(!1);if($&&t===e.target&&(o=$),o&&(s=Q(o)),st(Y,t,x,a,o,s,e,!!o)!==!1)return _(),t.appendChild(x),Z=t,b(),v(!0)}else if($&&Uo(e,I,this)){var k=Ue(t,0,d,!0);if(k===x)return v(!1);if(o=k,s=Q(o),st(Y,t,x,a,o,s,e,!1)!==!1)return _(),t.insertBefore(x,k),Z=t,b(),v(!0)}else if(o.parentNode===t){s=Q(o);var A=0,G,K=x.parentNode!==t,j=!No(x.animated&&x.toRect||a,o.animated&&o.toRect||s,I),oe=I?"top":"left",ae=nn(o,"top","top")||nn(x,"top","top"),pe=ae?ae.scrollTop:void 0;Ne!==o&&(G=s[oe],Xe=!1,at=!j&&d.invertSwap||K),A=jo(e,o,s,I,j?1:d.swapThreshold,d.invertedSwapThreshold==null?d.swapThreshold:d.invertedSwapThreshold,at,Ne===o);var q;if(A!==0){var me=he(x);do me-=A,q=Z.children[me];while(q&&(M(q,"display")==="none"||q===R))}if(A===0||q===o)return v(!1);Ne=o,Ze=A;var Ie=o.nextElementSibling,Ce=!1;Ce=A===1;var et=st(Y,t,x,a,o,s,e,Ce);if(et!==!1)return(et===1||et===-1)&&(Ce=et===1),Rt=!0,setTimeout(Lo,30),_(),Ce&&!Ie?t.appendChild(x):o.parentNode.insertBefore(x,Ce?Ie:o),ae&&_n(ae,0,pe-ae.scrollTop),Z=x.parentNode,G!==void 0&&!at&&(ut=Math.abs(G-Q(o)[oe])),b(),v(!0)}if(t.contains(x))return v(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){z(document,"mousemove",this._onTouchMove),z(document,"touchmove",this._onTouchMove),z(document,"pointermove",this._onTouchMove),z(document,"dragover",Me),z(document,"mousemove",Me),z(document,"touchmove",Me)},_offUpEvents:function(){var e=this.el.ownerDocument;z(e,"mouseup",this._onDrop),z(e,"touchend",this._onDrop),z(e,"pointerup",this._onDrop),z(e,"touchcancel",this._onDrop),z(document,"selectstart",this)},_onDrop:function(e){var t=this.el,o=this.options;if(ue=he(x),Se=he(x,o.draggable),le("drop",this,{evt:e}),Z=x&&x.parentNode,ue=he(x),Se=he(x,o.draggable),P.eventCanceled){this._nulling();return}Ge=!1,at=!1,Xe=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Gt(this.cloneId),Gt(this._dragStartId),this.nativeDraggable&&(z(document,"drop",this),z(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Fe&&M(document.body,"user-select",""),M(x,"transform",""),e&&(je&&(e.cancelable&&e.preventDefault(),!o.dropBubble&&e.stopPropagation()),R&&R.parentNode&&R.parentNode.removeChild(R),(Y===Z||ne&&ne.lastPutMode!=="clone")&&X&&X.parentNode&&X.parentNode.removeChild(X),x&&(this.nativeDraggable&&z(x,"dragend",this),Et(x),x.style["will-change"]="",je&&!Ge&&de(x,ne?ne.options.ghostClass:this.options.ghostClass,!1),de(x,this.options.chosenClass,!1),ie({sortable:this,name:"unchoose",toEl:Z,newIndex:null,newDraggableIndex:null,originalEvent:e}),Y!==Z?(ue>=0&&(ie({rootEl:Z,name:"add",toEl:Z,fromEl:Y,originalEvent:e}),ie({sortable:this,name:"remove",toEl:Z,originalEvent:e}),ie({rootEl:Z,name:"sort",toEl:Z,fromEl:Y,originalEvent:e}),ie({sortable:this,name:"sort",toEl:Z,originalEvent:e})),ne&&ne.save()):ue!==ze&&ue>=0&&(ie({sortable:this,name:"update",toEl:Z,originalEvent:e}),ie({sortable:this,name:"sort",toEl:Z,originalEvent:e})),P.active&&((ue==null||ue===-1)&&(ue=ze,Se=We),ie({sortable:this,name:"end",toEl:Z,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){le("nulling",this),Y=x=Z=R=Pe=X=dt=Te=Ae=ge=je=ue=Se=ze=We=Ne=Ze=ne=ot=P.dragged=P.ghost=P.clone=P.active=null,bt.forEach(function(e){e.checked=!0}),bt.length=Tt=$t=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":x&&(this._onDragOver(e),zo(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,o=this.el.children,a=0,s=o.length,i=this.options;a<s;a++)t=o[a],ve(t,i.draggable,this.el,!1)&&e.push(t.getAttribute(i.dataIdAttr)||Vo(t));return e},sort:function(e,t){var o={},a=this.el;this.toArray().forEach(function(s,i){var d=a.children[i];ve(d,this.options.draggable,a,!1)&&(o[s]=d)},this),t&&this.captureAnimationState(),e.forEach(function(s){o[s]&&(a.removeChild(o[s]),a.appendChild(o[s]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return ve(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var o=this.options;if(t===void 0)return o[e];var a=Qe.modifyOption(this,e,t);typeof a<"u"?o[e]=a:o[e]=t,e==="group"&&Sn(o)},destroy:function(){le("destroy",this);var e=this.el;e[ce]=null,z(e,"mousedown",this._onTapStart),z(e,"touchstart",this._onTapStart),z(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(z(e,"dragover",this),z(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),vt.splice(vt.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Te){if(le("hideClone",this),P.eventCanceled)return;M(X,"display","none"),this.options.removeCloneOnHide&&X.parentNode&&X.parentNode.removeChild(X),Te=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Te){if(le("showClone",this),P.eventCanceled)return;x.parentNode==Y&&!this.options.group.revertClone?Y.insertBefore(X,x):Pe?Y.insertBefore(X,Pe):Y.appendChild(X),this.options.group.revertClone&&this.animate(x,X),M(X,"display",""),Te=!1}}};function zo(n){n.dataTransfer&&(n.dataTransfer.dropEffect="move"),n.cancelable&&n.preventDefault()}function st(n,e,t,o,a,s,i,d){var c,u=n[ce],m=u.options.onMove,w;return window.CustomEvent&&!ke&&!Ke?c=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(c=document.createEvent("Event"),c.initEvent("move",!0,!0)),c.to=e,c.from=n,c.dragged=t,c.draggedRect=o,c.related=a||e,c.relatedRect=s||Q(e),c.willInsertAfter=d,c.originalEvent=i,n.dispatchEvent(c),m&&(w=m.call(u,c,i)),w}function Et(n){n.draggable=!1}function Lo(){Rt=!1}function Uo(n,e,t){var o=Q(Ue(t.el,0,t.options,!0)),a=10;return e?n.clientX<o.left-a||n.clientY<o.top&&n.clientX<o.right:n.clientY<o.top-a||n.clientY<o.bottom&&n.clientX<o.left}function Ho(n,e,t){var o=Q(Vt(t.el,t.options.draggable)),a=10;return e?n.clientX>o.right+a||n.clientX<=o.right&&n.clientY>o.bottom&&n.clientX>=o.left:n.clientX>o.right&&n.clientY>o.top||n.clientX<=o.right&&n.clientY>o.bottom+a}function jo(n,e,t,o,a,s,i,d){var c=o?n.clientY:n.clientX,u=o?t.height:t.width,m=o?t.top:t.left,w=o?t.bottom:t.right,E=!1;if(!i){if(d&&ut<u*a){if(!Xe&&(Ze===1?c>m+u*s/2:c<w-u*s/2)&&(Xe=!0),Xe)E=!0;else if(Ze===1?c<m+ut:c>w-ut)return-Ze}else if(c>m+u*(1-a)/2&&c<w-u*(1-a)/2)return Bo(e)}return E=E||i,E&&(c<m+u*s/2||c>w-u*s/2)?c>m+u/2?1:-1:0}function Bo(n){return he(x)<he(n)?1:-1}function Vo(n){for(var e=n.tagName+n.className+n.src+n.href+n.textContent,t=e.length,o=0;t--;)o+=e.charCodeAt(t);return o.toString(36)}function Fo(n){bt.length=0;for(var e=n.getElementsByTagName("input"),t=e.length;t--;){var o=e[t];o.checked&&bt.push(o)}}function ct(n){return setTimeout(n,0)}function Gt(n){return clearTimeout(n)}_t&&U(document,"touchmove",function(n){(P.active||Ge)&&n.cancelable&&n.preventDefault()});P.utils={on:U,off:z,css:M,find:wn,is:function(e,t){return!!ve(e,t,e,!1)},extend:$o,throttle:yn,closest:ve,toggleClass:de,clone:xn,index:he,nextTick:ct,cancelNextTick:Gt,detectDirection:Cn,getChild:Ue};P.get=function(n){return n[ce]};P.mount=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(o){if(!o.prototype||!o.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(o));o.utils&&(P.utils=we(we({},P.utils),o.utils)),Qe.mount(o)})};P.create=function(n,e){return new P(n,e)};P.version=ko;var J=[],Be,zt,Lt=!1,It,At,wt,Ve;function Yo(){function n(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return n.prototype={dragStarted:function(t){var o=t.originalEvent;this.sortable.nativeDraggable?U(document,"dragover",this._handleAutoScroll):this.options.supportPointer?U(document,"pointermove",this._handleFallbackAutoScroll):o.touches?U(document,"touchmove",this._handleFallbackAutoScroll):U(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var o=t.originalEvent;!this.options.dragOverBubble&&!o.rootEl&&this._handleAutoScroll(o)},drop:function(){this.sortable.nativeDraggable?z(document,"dragover",this._handleAutoScroll):(z(document,"pointermove",this._handleFallbackAutoScroll),z(document,"touchmove",this._handleFallbackAutoScroll),z(document,"mousemove",this._handleFallbackAutoScroll)),ln(),ht(),Do()},nulling:function(){wt=zt=Be=Lt=Ve=It=At=null,J.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,o){var a=this,s=(t.touches?t.touches[0]:t).clientX,i=(t.touches?t.touches[0]:t).clientY,d=document.elementFromPoint(s,i);if(wt=t,o||this.options.forceAutoScrollFallback||Ke||ke||Fe){Mt(t,this.options,d,o);var c=$e(d,!0);Lt&&(!Ve||s!==It||i!==At)&&(Ve&&ln(),Ve=setInterval(function(){var u=$e(document.elementFromPoint(s,i),!0);u!==c&&(c=u,ht()),Mt(t,a.options,u,o)},10),It=s,At=i)}else{if(!this.options.bubbleScroll||$e(d,!0)===be()){ht();return}Mt(t,this.options,$e(d,!1),!1)}}},xe(n,{pluginName:"scroll",initializeByDefault:!0})}function ht(){J.forEach(function(n){clearInterval(n.pid)}),J=[]}function ln(){clearInterval(Ve)}var Mt=yn(function(n,e,t,o){if(!!e.scroll){var a=(n.touches?n.touches[0]:n).clientX,s=(n.touches?n.touches[0]:n).clientY,i=e.scrollSensitivity,d=e.scrollSpeed,c=be(),u=!1,m;zt!==t&&(zt=t,ht(),Be=e.scroll,m=e.scrollFn,Be===!0&&(Be=$e(t,!0)));var w=0,E=Be;do{var I=E,D=Q(I),p=D.top,g=D.bottom,_=D.left,v=D.right,b=D.width,$=D.height,k=void 0,A=void 0,G=I.scrollWidth,K=I.scrollHeight,j=M(I),oe=I.scrollLeft,ae=I.scrollTop;I===c?(k=b<G&&(j.overflowX==="auto"||j.overflowX==="scroll"||j.overflowX==="visible"),A=$<K&&(j.overflowY==="auto"||j.overflowY==="scroll"||j.overflowY==="visible")):(k=b<G&&(j.overflowX==="auto"||j.overflowX==="scroll"),A=$<K&&(j.overflowY==="auto"||j.overflowY==="scroll"));var pe=k&&(Math.abs(v-a)<=i&&oe+b<G)-(Math.abs(_-a)<=i&&!!oe),q=A&&(Math.abs(g-s)<=i&&ae+$<K)-(Math.abs(p-s)<=i&&!!ae);if(!J[w])for(var me=0;me<=w;me++)J[me]||(J[me]={});(J[w].vx!=pe||J[w].vy!=q||J[w].el!==I)&&(J[w].el=I,J[w].vx=pe,J[w].vy=q,clearInterval(J[w].pid),(pe!=0||q!=0)&&(u=!0,J[w].pid=setInterval(function(){o&&this.layer===0&&P.active._onTouchMove(wt);var Ie=J[this.layer].vy?J[this.layer].vy*d:0,Ce=J[this.layer].vx?J[this.layer].vx*d:0;typeof m=="function"&&m.call(P.dragged.parentNode[ce],Ce,Ie,n,wt,J[this.layer].el)!=="continue"||_n(J[this.layer].el,Ce,Ie)}.bind({layer:w}),24))),w++}while(e.bubbleScroll&&E!==c&&(E=$e(E,!1)));Lt=u}},30),Dn=function(e){var t=e.originalEvent,o=e.putSortable,a=e.dragEl,s=e.activeSortable,i=e.dispatchSortableEvent,d=e.hideGhostForTarget,c=e.unhideGhostForTarget;if(!!t){var u=o||s;d();var m=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,w=document.elementFromPoint(m.clientX,m.clientY);c(),u&&!u.el.contains(w)&&(i("spill"),this.onSpill({dragEl:a,putSortable:o}))}};function Ft(){}Ft.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,o=e.putSortable;this.sortable.captureAnimationState(),o&&o.captureAnimationState();var a=Ue(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(t,a):this.sortable.el.appendChild(t),this.sortable.animateAll(),o&&o.animateAll()},drop:Dn};xe(Ft,{pluginName:"revertOnSpill"});function Yt(){}Yt.prototype={onSpill:function(e){var t=e.dragEl,o=e.putSortable,a=o||this.sortable;a.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),a.animateAll()},drop:Dn};xe(Yt,{pluginName:"removeOnSpill"});P.mount(new Yo);P.mount(Yt,Ft);function Wo(){return typeof window<"u"?window.console:global.console}const Zo=Wo();function Xo(n){const e=Object.create(null);return function(o){return e[o]||(e[o]=n(o))}}const qo=/-(\w)/g,dn=Xo(n=>n.replace(qo,(e,t)=>t?t.toUpperCase():""));function Pt(n){n.parentElement!==null&&n.parentElement.removeChild(n)}function un(n,e,t){const o=t===0?n.children[0]:n.children[t-1].nextSibling;n.insertBefore(e,o)}function Jo(n,e){return Object.values(n).indexOf(e)}function Ko(n,e,t,o){if(!n)return[];const a=Object.values(n),s=e.length-o;return[...e].map((d,c)=>c>=s?a.length:a.indexOf(d))}function En(n,e){this.$nextTick(()=>this.$emit(n.toLowerCase(),e))}function Qo(n){return e=>{this.realList!==null&&this["onDrag"+n](e),En.call(this,n,e)}}function ea(n){return["transition-group","TransitionGroup"].includes(n)}function ta(n){if(!n||n.length!==1)return!1;const[{type:e}]=n;return e?ea(e.name):!1}function na(n,e){return e?{...e.props,...e.attrs}:n}const Ut=["Start","Add","Remove","Update","End"],Ht=["Choose","Unchoose","Sort","Filter","Clone"],oa=["Move",...Ut,...Ht].map(n=>"on"+n);let Ot=null;const aa={options:Object,list:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:n=>n},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null},component:{type:String,default:null},modelValue:{type:Array,required:!1,default:null}},ra=se({name:"VueDraggableNext",inheritAttrs:!1,emits:["update:modelValue","move","change",...Ut.map(n=>n.toLowerCase()),...Ht.map(n=>n.toLowerCase())],props:aa,data(){return{transitionMode:!1,noneFunctionalComponentMode:!1,headerOffset:0,footerOffset:0,_sortable:{},visibleIndexes:[],context:{}}},render(){const n=this.$slots.default?this.$slots.default():null,e=na(this.$attrs,this.componentData);return n?(this.transitionMode=ta(n),Xt(this.getTag(),e,n)):Xt(this.getTag(),e,[])},created(){this.list!==null&&this.modelValue!==null&&Zo.error("list props are mutually exclusive! Please set one.")},mounted(){const n={};Ut.forEach(a=>{n["on"+a]=Qo.call(this,a)}),Ht.forEach(a=>{n["on"+a]=En.bind(this,a)});const e=Object.keys(this.$attrs).reduce((a,s)=>(a[dn(s)]=this.$attrs[s],a),{}),t=Object.assign({},e,n,{onMove:(a,s)=>this.onDragMove(a,s)});!("draggable"in t)&&(t.draggable=">*");const o=this.$el.nodeType===1?this.$el:this.$el.parentElement;this._sortable=new P(o,t),o.__draggable_component__=this,this.computeIndexes()},beforeUnmount(){try{this._sortable!==void 0&&this._sortable.destroy()}catch{}},computed:{realList(){return this.list?this.list:this.modelValue}},watch:{$attrs:{handler(n){this.updateOptions(n)},deep:!0},realList(){this.computeIndexes()}},methods:{getTag(){return this.component?qe(this.component):this.tag},updateOptions(n){for(var e in n){const t=dn(e);oa.indexOf(t)===-1&&this._sortable.option(t,n[e])}},getChildrenNodes(){return this.$el.children},computeIndexes(){this.$nextTick(()=>{this.visibleIndexes=Ko(this.getChildrenNodes(),this.$el.children,this.transitionMode,this.footerOffset)})},getUnderlyingVm(n){const e=Jo(this.getChildrenNodes()||[],n);if(e===-1)return null;const t=this.realList[e];return{index:e,element:t}},emitChanges(n){this.$nextTick(()=>{this.$emit("change",n)})},alterList(n){if(this.list){n(this.list);return}const e=[...this.modelValue];n(e),this.$emit("update:modelValue",e)},spliceList(){const n=e=>e.splice(...arguments);this.alterList(n)},updatePosition(n,e){const t=o=>o.splice(e,0,o.splice(n,1)[0]);this.alterList(t)},getVmIndex(n){const e=this.visibleIndexes,t=e.length;return n>t-1?t:e[n]},getComponent(){return this.$slots.default?this.$slots.default()[0].componentInstance:null},resetTransitionData(n){if(!this.noTransitionOnDrag||!this.transitionMode)return;var e=this.getChildrenNodes();e[n].data=null;const t=this.getComponent();t.children=[],t.kept=void 0},onDragStart(n){this.context=this.getUnderlyingVm(n.item),this.context&&(n.item._underlying_vm_=this.clone(this.context.element),Ot=n.item)},onDragAdd(n){const e=n.item._underlying_vm_;if(e===void 0)return;Pt(n.item);const t=this.getVmIndex(n.newIndex);this.spliceList(t,0,e),this.computeIndexes();const o={element:e,newIndex:t};this.emitChanges({added:o})},onDragRemove(n){if(un(this.$el,n.item,n.oldIndex),n.pullMode==="clone"){Pt(n.clone);return}if(!this.context)return;const e=this.context.index;this.spliceList(e,1);const t={element:this.context.element,oldIndex:e};this.resetTransitionData(e),this.emitChanges({removed:t})},onDragUpdate(n){Pt(n.item),un(n.from,n.item,n.oldIndex);const e=this.context.index,t=this.getVmIndex(n.newIndex);this.updatePosition(e,t);const o={element:this.context.element,oldIndex:e,newIndex:t};this.emitChanges({moved:o})},updateProperty(n,e){n.hasOwnProperty(e)&&(n[e]+=this.headerOffset)},onDragMove(n,e){const t=this.move;if(!t||!this.realList)return!0;const o=this.getRelatedContextFromMoveEvent(n),a=this.context,s=this.computeFutureIndex(o,n);Object.assign(a,{futureIndex:s});const i=Object.assign({},n,{relatedContext:o,draggedContext:a});return t(i,e)},onDragEnd(){this.computeIndexes(),Ot=null},getTrargetedComponent(n){return n.__draggable_component__},getRelatedContextFromMoveEvent({to:n,related:e}){const t=this.getTrargetedComponent(n);if(!t)return{component:t};const o=t.realList,a={list:o,component:t};if(n!==e&&o&&t.getUnderlyingVm){const s=t.getUnderlyingVm(e);if(s)return Object.assign(s,a)}return a},computeFutureIndex(n,e){const t=[...e.to.children].filter(i=>i.style.display!=="none");if(t.length===0)return 0;const o=t.indexOf(e.related),a=n.component.getVmIndex(o);return t.indexOf(Ot)!==-1||!e.willInsertAfter?a:a+1}}});var De=(n=>(n.POINTS="points",n.TITLE="title",n))(De||{});const it=cn(),Wt=hn("RankStore",{state:()=>({tableHeaders:["Round"],rankPoints:[],tableUsers:[],tableId:167,room:"",form:{newPoints:[{points:0,row:5,table_user:127,type:De.POINTS}],header:{title:"New Title",row:5,type:De.TITLE},showStoreForm:!1},testTableUsers:[3124,3125,3126,3127],editRow:null}),getters:{nextRow:n=>n.rankPoints.length},actions:{_fetchRankPoints(){te.emit("getRankTable",{table_id:this.$state.tableId},n=>{this.$state.rankPoints=n})},_store(){const n=[this.$state.form.header,...this.$state.form.newPoints];te.emit("storeRankRow",{data:n,room:this.$state.room,table_id:this.$state.tableId,row:this.nextRow},e=>{e.status===200?this.$state.form.showStoreForm=!1:it.error("Something went wrong")})},_update(n){const e=this.$state.rankPoints.findIndex(o=>o.some(a=>a.row===n)),t=this.$state.rankPoints[e];te.emit("updateRankRow",{data:t,room:this.$state.room,table_id:this.$state.tableId,row:n},o=>{o.status===200?this.$state.editRow=null:it.error("Something went wrong")})},_delete(n){const t=this.$state.rankPoints[n][0].row;te.emit("deleteRankRow",{room:this.$state.room,table_id:this.$state.tableId,row:t},o=>{o.status===200?it.success("Row deleted successfully"):it.error("Something went wrong")})},addNewPoints(){this.$state.form.newPoints=[];const n=this.nextRow;this.$state.tableId&&(this.$state.form.header={title:"Round "+n.toString(),row:n,type:De.TITLE},this.$state.tableUsers.forEach(e=>{this.$state.form.newPoints.push({points:0,row:n,table_user:e.id,type:De.POINTS})})),this.$state.form.showStoreForm=!0},addTableUsers(n){this.$state.tableUsers=n.sort((e,t)=>e.id-t.id),this.$state.tableHeaders=["Round"],this.$state.tableUsers.forEach(e=>{e.user.username&&this.$state.tableHeaders.push(e.user.username)}),this._fetchRankPoints()}}}),sa={key:0},ia=l("div",{class:"text-2xl underline underline-offset-4 w-full"}," Rank Table ",-1),la={key:0},da={key:1},ua=["onClick"],ca=["onClick"],ha=["onClick"],fa={key:1},pa=l("div",{class:"text-2xl underline underline-offset-4 w-full"}," Rank Table ",-1),ma=l("div",{class:"bg-red-500 p-4 my-4 rounded italic"}," The rank table is available when the game start ",-1),ga=[pa,ma],va=se({__name:"RankTable",setup(n){const e=Wt();return(t,o)=>r(e).tableHeaders.length>1?(f(),T("div",sa,[y(C,{justify:"between"},{default:h(()=>[ia,y(Kt,{title:"Add Points",onClick:o[0]||(o[0]=a=>r(e).addNewPoints()),disable:r(e).form.showStoreForm},null,8,["disable"])]),_:1}),r(e).rankPoints?(f(),O(gn,{key:0,"table-headers":r(e).tableHeaders,class:"border border-gray-700 rounded-lg overflow-y-auto",actions:!0},{default:h(()=>[(f(!0),T(B,null,W(r(e).rankPoints,(a,s)=>(f(),O(Nt,{key:`rankRow-${a}`},{default:h(()=>[(f(!0),T(B,null,W(a,i=>(f(),O(Re,{key:i.id},{default:h(()=>{var d;return[s===r(e).editRow?(f(),T("div",la,[i.title&&i.type===r(De).TITLE?(f(),O(nt,{key:0,input:i.title,onChange:c=>i.title=c,"dark-theme":!0},null,8,["input","onChange"])):(f(),O(nt,{key:1,input:(d=i.points)!=null?d:0,type:"number",onChange:c=>i.points=c,"dark-theme":!0},null,8,["input","onChange"]))])):(f(),T("div",da,V(i.type===r(De).TITLE?i.title:i.points),1))]}),_:2},1024))),128)),y(Re,null,{default:h(()=>[s===r(e).editRow?(f(),O(C,{key:0},{default:h(()=>[l("div",{class:"text-blue-500 cursor-pointer",onClick:i=>r(e)._update(s)},"Update",8,ua)]),_:2},1024)):(f(),O(C,{key:1,gap:4},{default:h(()=>[l("div",{class:"text-blue-500 cursor-pointer",onClick:i=>r(e).editRow=s},"Edit",8,ca),l("div",{class:"text-red-500 cursor-pointer",onClick:i=>r(e)._delete(s)},"Delete",8,ha)]),_:2},1024))]),_:2},1024)]),_:2},1024))),128)),r(e).form.showStoreForm?(f(),O(Nt,{key:0,class:"bg-gray-700"},{default:h(()=>[y(Re,null,{default:h(()=>[y(nt,{input:r(e).form.header.title,onChange:o[1]||(o[1]=a=>r(e).form.header.title=a),placeholder:"Row title e.g. Round 1","dark-theme":!0},null,8,["input"])]),_:1}),(f(!0),T(B,null,W(r(e).form.newPoints,a=>(f(),O(Re,{key:`new-item-${a.table_user}`},{default:h(()=>[y(nt,{input:a.points,type:"number","dark-theme":!0,onChange:s=>a.points=s,placeholder:"Points"},null,8,["input","onChange"])]),_:2},1024))),128)),y(Re,{class:"text-red-500 cursor-pointer",onClick:o[2]||(o[2]=a=>r(e).form.showStoreForm=!1)},{default:h(()=>[L("Cancel ")]),_:1})]),_:1})):H("",!0)]),_:1},8,["table-headers"])):H("",!0),y(C,{justify:"center",class:"mt-8",gap:4},{default:h(()=>[y(Kt,{title:"Save Changes",disable:!r(e).form.showStoreForm,onClick:o[3]||(o[3]=a=>r(e)._store())},null,8,["disable"])]),_:1})])):(f(),T("div",fa,ga))}}),ee=n=>(On("data-v-f1c81574"),n=n(),Nn(),n),ba={key:0,class:"bg-dark bg-opacity-90 fixed top-0 left-0 w-full h-full flex justify-center items-center z-[2147483647]"},wa=ee(()=>l("div",{class:"p-4 text-xl text-white"}," Game Master Dashboard ",-1)),ya=["onClick"],_a={class:"container my-10"},xa={key:0},ka=ee(()=>l("div",null," Actions ",-1)),Ca={class:"bg-dark-smooth p-4"},Sa=ee(()=>l("div",{class:"text-2xl text-white mb-4"},"Game Status",-1)),Ta=ee(()=>l("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 mr-3",viewBox:"0 0 16 16"},[l("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"})],-1)),$a=["disable"],Da=ee(()=>l("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 mr-3",viewBox:"0 0 16 16"},[l("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"})],-1)),Ea=ee(()=>l("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 mr-3",viewBox:"0 0 16 16"},[l("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.5 5A1.5 1.5 0 0 0 5 6.5v3A1.5 1.5 0 0 0 6.5 11h3A1.5 1.5 0 0 0 11 9.5v-3A1.5 1.5 0 0 0 9.5 5h-3z"})],-1)),Ia=ee(()=>l("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 mr-3",viewBox:"0 0 16 16"},[l("path",{d:"M1.5 15a.5.5 0 0 0 0 1h13a.5.5 0 0 0 0-1H13V2.5A1.5 1.5 0 0 0 11.5 1H11V.5a.5.5 0 0 0-.57-.495l-7 1A.5.5 0 0 0 3 1.5V15H1.5zM11 2h.5a.5.5 0 0 1 .5.5V15h-1V2zm-2.5 8c-.276 0-.5-.448-.5-1s.224-1 .5-1 .5.448.5 1-.224 1-.5 1z"})],-1)),Aa={class:"bg-dark-smooth p-4 mt-6"},Ma=ee(()=>l("div",{class:"text-2xl text-white mb-4"},"Cards",-1)),Pa=ee(()=>l("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 mr-3",viewBox:"0 0 16 16"},[l("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-4.79-2.907L8.5 7.028V5.5a.5.5 0 0 0-.79-.407L5 7.028V5.5a.5.5 0 0 0-1 0v5a.5.5 0 0 0 1 0V8.972l2.71 1.935a.5.5 0 0 0 .79-.407V8.972l2.71 1.935A.5.5 0 0 0 12 10.5v-5a.5.5 0 0 0-.79-.407z"})],-1)),Oa=ee(()=>l("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 mr-3",viewBox:"0 0 16 16"},[l("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM4.79 5.093A.5.5 0 0 0 4 5.5v5a.5.5 0 0 0 .79.407L7.5 8.972V10.5a.5.5 0 0 0 .79.407L11 8.972V10.5a.5.5 0 0 0 1 0v-5a.5.5 0 0 0-1 0v1.528L8.29 5.093a.5.5 0 0 0-.79.407v1.528L4.79 5.093z"})],-1)),Na=["disable"],Ra=ee(()=>l("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 mr-3",viewBox:"0 0 16 16"},[l("path",{d:"M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5z"})],-1)),Ga=["disable"],za=ee(()=>l("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 mr-3",viewBox:"0 0 16 16"},[l("path",{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16ZM7.729 5.055A.5.5 0 0 1 8 5.5v1.886l3.21-2.293A.5.5 0 0 1 12 5.5v5a.5.5 0 0 1-.79.407L8 8.614V10.5a.5.5 0 0 1-.79.407l-3.5-2.5a.5.5 0 0 1 0-.814l3.5-2.5a.5.5 0 0 1 .519-.038Z"})],-1)),La=["disable"],Ua=ee(()=>l("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 mr-3",viewBox:"0 0 16 16"},[l("path",{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16ZM4.79 5.093 8 7.386V5.5a.5.5 0 0 1 .79-.407l3.5 2.5a.5.5 0 0 1 0 .814l-3.5 2.5A.5.5 0 0 1 8 10.5V8.614l-3.21 2.293A.5.5 0 0 1 4 10.5v-5a.5.5 0 0 1 .79-.407Z"})],-1)),Ha={key:1},ja=ee(()=>l("div",{class:"w-1/6"},"Turn",-1)),Ba=ee(()=>l("div",{class:"w-1/6"},"Name",-1)),Va=ee(()=>l("div",{class:"w-1/6"},"Team",-1)),Fa=ee(()=>l("div",{class:"w-1/6"},"Status",-1)),Ya=ee(()=>l("div",{class:"w-1/6"},"Role",-1)),Wa=ee(()=>l("div",{class:"w-1/6"},"Actions",-1)),Za={class:"w-1/6"},Xa={class:"w-1/6"},qa={class:"w-1/6"},Ja={class:"w-1/6"},Ka={class:"w-1/6"},Qa={class:"w-1/6 text-red-500 cursor-pointer hover:text-red-600 transition duration-300 text-lg"},er=["onClick"],tr={key:2},nr=se({__name:"ModalFullPage",props:{modalOpen:{type:Boolean},tableUsers:{type:Array,required:!0},table:{type:Object},tableStatus:{type:Object},menuTab:{type:Number,default:1}},emits:["closeModal","updateTurnTableUsers","updateRole","updateStatus","updateTeam","stopGame","leaveGame","newGame","updateTableGameStatus","showAllCards","removePlayer","setNextPlayer"],setup(n,{emit:e}){const t=n,o=F(!0),a=F(null),s=F([{id:1,name:"Game"},{id:2,name:"Players"},{id:3,name:"Rank Table"}]),i=F(1),d=c=>{e("updateTurnTableUsers")};return Vn(a,()=>{e("closeModal")}),Je(()=>t.menuTab,()=>{i.value=t.menuTab}),(c,u)=>(f(),O(Pn,{name:"modal"},{default:h(()=>[n.modalOpen?(f(),T("div",ba,[l("div",{class:"bg-dark relative rounded-sm shadow h-full w-full",ref_key:"modal",ref:a},[y(C,{class:"border-b-2 px-8",justify:"between",items:"center"},{default:h(()=>[wa,l("button",{class:"cursor-pointer border h-10 w-10 border-transparent rounded-3xl px-2 transition duration-300 text-lg text-white hover:text-primary hover:bg-white",onClick:u[0]||(u[0]=m=>c.$emit("closeModal"))}," x ")]),_:1}),y(C,{class:"h-full text-white"},{default:h(()=>[y(C,{class:"border-r w-60 p-4",column:!0,gap:2},{default:h(()=>[(f(!0),T(B,null,W(s.value,m=>(f(),T("div",{key:m.id,class:N(["px-4 py-3 hover:bg-primary rounded-lg border-gray-500 border cursor-pointer hover:border-primary transition duration-300 text-lg",i.value===m.id?"bg-primary":"bg-transparent"]),onClick:w=>i.value=m.id},V(m.name),11,ya))),128))]),_:1}),y(C,{class:"w-full overflow-x-auto"},{default:h(()=>[l("div",_a,[i.value===1?(f(),T("div",xa,[y(C,{class:"text-2xl underline underline-offset-4 mb-6 w-full",justify:"between"},{default:h(()=>[ka,l("div",null,[y(Bn,{title:"Close settings on click an action",input:o.value,onChange:u[1]||(u[1]=m=>o.value=m)},null,8,["input"])])]),_:1}),l("div",Ca,[Sa,y(C,{class:"w-full text-center cursor-pointer",gap:8},{default:h(()=>{var m,w,E,I;return[l("button",{onClick:u[2]||(u[2]=D=>{c.$emit("newGame"),o.value&&e("closeModal")}),class:"p-3 w-1/4 transition duration-300 text-lg bg-primary rounded-3xl text-white hover:bg-dark-smooth border border-primary"},[y(C,{justify:"center",items:"center"},{default:h(()=>[Ta,L(" New Game ")]),_:1})]),l("button",{class:N(["p-3 w-1/4 transition duration-300 text-lg bg-primary rounded-3xl text-white hover:bg-dark-smooth border border-primary",((m=n.tableStatus)==null?void 0:m.status)===r(S).WAITING||((w=n.tableStatus)==null?void 0:w.status)===r(S).FINISH?"cursor-not-allowed":""]),disable:((E=n.tableStatus)==null?void 0:E.status)===r(S).WAITING||((I=n.tableStatus)==null?void 0:I.status)===r(S).FINISH,onClick:u[3]||(u[3]=D=>{var p;((p=n.tableStatus)==null?void 0:p.status)===r(S).PLAYING?c.$emit("updateTableGameStatus",r(S).PAUSE):c.$emit("updateTableGameStatus",r(S).PLAYING),o.value&&e("closeModal")})},[y(C,{justify:"center",items:"center"},{default:h(()=>{var D;return[Da,L(" "+V(((D=n.tableStatus)==null?void 0:D.status)===r(S).PAUSE?"Resume Game":"Pause Game"),1)]}),_:1})],10,$a),l("button",{onClick:u[4]||(u[4]=D=>{c.$emit("stopGame"),o.value&&e("closeModal")}),class:"p-3 w-1/4 transition duration-300 text-lg bg-primary rounded-3xl text-white hover:bg-dark-smooth border border-primary"},[y(C,{justify:"center",items:"center"},{default:h(()=>[Ea,L(" End Game ")]),_:1})]),l("button",{class:"p-3 w-1/4 transition duration-300 text-lg bg-primary rounded-3xl text-white hover:bg-dark-smooth border border-primary",onClick:u[5]||(u[5]=D=>c.$emit("leaveGame"))},[y(C,{justify:"center",items:"center"},{default:h(()=>[Ia,L(" Leave Game ")]),_:1})])]}),_:1})]),l("div",Aa,[Ma,y(C,{class:"w-full text-center cursor-pointer",gap:8},{default:h(()=>{var m,w,E,I,D,p;return[l("div",{class:"p-3 transition duration-300 text-lg w-1/3 bg-primary rounded-3xl text-white hover:bg-dark-smooth border border-primary",onClick:u[6]||(u[6]=g=>c.$emit("setNextPlayer",!1))},[y(C,{justify:"center",items:"center"},{default:h(()=>[Pa,L(" Previous Player ")]),_:1})]),l("div",{class:"p-3 transition duration-300 text-lg w-1/3 bg-primary rounded-3xl text-white hover:bg-dark-smooth border border-primary",onClick:u[7]||(u[7]=g=>c.$emit("setNextPlayer",!0))},[y(C,{justify:"center",items:"center"},{default:h(()=>[Oa,L(" Next Player ")]),_:1})]),l("div",{onClick:u[8]||(u[8]=g=>{c.$emit("showAllCards"),o.value&&e("closeModal")}),class:N(["p-3 transition duration-300 text-lg w-1/3 bg-primary rounded-3xl text-white hover:bg-dark-smooth border border-primary",((m=n.tableStatus)==null?void 0:m.status)===r(S).WAITING?"cursor-not-allowed":""]),disable:((w=n.tableStatus)==null?void 0:w.status)===r(S).WAITING},[y(C,{justify:"center",items:"center"},{default:h(()=>[Ra,L(" Show all cards ")]),_:1})],10,Na),l("div",{class:N(["p-3 transition duration-300 text-lg w-1/3 bg-primary rounded-3xl text-white hover:bg-dark-smooth border border-primary",((E=n.tableStatus)==null?void 0:E.status)===r(S).WAITING?"cursor-not-allowed":""]),disable:((I=n.tableStatus)==null?void 0:I.status)===r(S).WAITING},[y(C,{justify:"center",items:"center"},{default:h(()=>[za,L(" Undo ")]),_:1})],10,Ga),l("div",{class:N(["p-3 transition duration-300 text-lg w-1/3 bg-primary rounded-3xl text-white hover:bg-dark-smooth border border-primary",((D=n.tableStatus)==null?void 0:D.status)===r(S).WAITING?"cursor-not-allowed":""]),disable:((p=n.tableStatus)==null?void 0:p.status)===r(S).WAITING},[y(C,{justify:"center",items:"center"},{default:h(()=>[Ua,L(" Redo ")]),_:1})],10,La)]}),_:1})])])):H("",!0),i.value===2?(f(),T("div",Ha,[y(C,{disabled:"",class:"list-group-item bg-dark-smooth m-1 p-3 rounded-md text-center border border-primary mb-6",justify:"center"},{default:h(()=>[ja,Ba,Va,Fa,Ya,Wa]),_:1}),y(C,{class:"w-full"},{default:h(()=>[n.tableUsers?(f(),O(r(ra),{key:0,class:"dragArea list-group w-full",list:n.tableUsers,onChange:d,disabled:!1,group:{name:"people"},"ghost-class":"ghost"},{default:h(()=>[y(Mn,null,{default:h(()=>[(f(!0),T(B,null,W(n.tableUsers,m=>(f(),O(C,{items:"center",gap:8,class:"list-group-item bg-dark-smooth m-1 p-3 rounded-md text-center mb-3",key:m.id},{default:h(()=>{var w,E,I,D,p,g,_,v,b,$,k,A;return[l("div",Za,V(m.turn),1),l("div",Xa,V(m.user.username),1),l("div",qa,[y(kt,{options:(E=(w=n.table)==null?void 0:w.game)==null?void 0:E.teams,dark:!0,input:(I=m.team)!=null&&I.id?{value:(D=m.team)==null?void 0:D.id}:null,onUpdate:G=>c.$emit("updateTeam",G,m)},null,8,["options","input","onUpdate"])]),l("div",Ja,[y(kt,{options:(g=(p=n.table)==null?void 0:p.game)==null?void 0:g.status,dark:!0,input:(_=m.status)!=null&&_.id?{value:(v=m.status)==null?void 0:v.id}:null,onUpdate:G=>c.$emit("updateStatus",G,m)},null,8,["options","input","onUpdate"])]),l("div",Ka,[y(kt,{options:($=(b=n.table)==null?void 0:b.game)==null?void 0:$.roles,dark:!0,input:(k=m.role)!=null&&k.id?{value:(A=m.role)==null?void 0:A.id}:null,onUpdate:G=>c.$emit("updateRole",G,m)},null,8,["options","input","onUpdate"])]),l("div",Qa,[l("button",{onClick:G=>c.$emit("removePlayer",m.user.id)},"Remove User",8,er)])]}),_:2},1024))),128))]),_:1})]),_:1},8,["list"])):H("",!0)]),_:1})])):H("",!0),i.value===3?(f(),T("div",tr,[y(va)])):H("",!0)])]),_:1})]),_:1})],512)])):H("",!0)]),_:1}))}});const or=Rn(nr,[["__scopeId","data-v-f1c81574"]]),ar=se({__name:"GameUserItem",props:{playing:{type:Boolean,default:!1}},setup(n){return(e,t)=>(f(),T("div",{class:N(["px-4 py-3 rounded-lg hover:border-primary transition duration-300",n.playing?"bg-primary":"bg-dark-smooth"])},[Gn(e.$slots,"default")],2))}}),jt="/assets/close-card.89ac7cbb.png",rr=l("div",{class:"text-2xl border-b border-primary pb-2"},"Users",-1),sr={class:"w-3/6"},ir=l("img",{src:Yn,alt:"cards",srcset:""},null,-1),lr=["onClick"],dr=l("path",{d:"M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"},null,-1),ur=[dr],cr={key:1,class:"p-2 mt-2 shadow-2xl rounded-xl border-dashed border"},hr=l("div",{class:"w-2/6"},"Team:",-1),fr=l("div",{class:"w-2/6"},"Role:",-1),pr=l("div",{class:"w-2/6"},"Status:",-1),mr={key:2,class:"mt-4"},gr=["src"],vr=se({__name:"SidebarGame",setup(n){const e=Ee(),t=F([]),o=s=>t.value.indexOf(s)!==-1,a=s=>{t.value.indexOf(s)!==-1?t.value=t.value.filter(i=>i!==s):t.value.push(s)};return Je(()=>e.table,()=>{var s,i,d;((s=e.table)==null?void 0:s.status)!==S.WAITING&&(t.value=[],(d=(i=e.table)==null?void 0:i.table_users)==null||d.forEach(c=>{t.value.push(c.id)}))}),(s,i)=>{const d=qe("RouterLink");return f(),O(C,{class:"border-l w-72 p-4 h-full bg-dark text-white",column:!0,gap:2},{default:h(()=>[y(C,{column:!0,justify:"between",class:"h-[96%]"},{default:h(()=>{var c;return[l("div",null,[rr,(f(!0),T(B,null,W((c=r(e).table)==null?void 0:c.table_users,(u,m)=>(f(),O(ar,{key:m,class:"mt-3 w-2xl bg-primary",playing:u.playing},{default:h(()=>{var w,E,I,D,p,g,_,v;return[y(C,{items:"center",justify:r(e).cards?"center":"between",gap:2},{default:h(()=>{var b,$,k,A;return[l("div",sr,V((b=u.user)==null?void 0:b.username),1),r(e).cards?(f(),O(C,{key:0,gap:2,class:"w-2/6"},{default:h(()=>{var G;return[ir,l("div",null,V((G=r(e).getCards(r(e).getTableDeckIdOfUser(u.user.id)))==null?void 0:G.length),1)]}),_:2},1024)):H("",!0),(($=u.team)==null?void 0:$.name)||((k=u.role)==null?void 0:k.name)||((A=u.status)==null?void 0:A.name)||r(e).cards?(f(),T("div",{key:1,class:"w-1/6 cursor-pointer group",onClick:G=>a(u.id)},[(f(),T("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:N(["group-hover:text-primary duration-300 transition",o(u.id)?"rotate-0":"rotate-180"]),viewBox:"0 0 16 16"},ur,2))],8,lr)):H("",!0)]}),_:2},1032,["justify"]),((E=(w=r(e).table)==null?void 0:w.game_master)==null?void 0:E.id)===u.user.id?(f(),T("div",{key:0,class:N(["italic font-bold",r(e).table.game_master.id===u.user.id&&u.playing?"text-dark":"text-primary"])},"Game Master",2)):H("",!0),o(u.id)&&(((I=u.team)==null?void 0:I.name)||((D=u.role)==null?void 0:D.name)||((p=u.status)==null?void 0:p.name))?(f(),T("div",cr,[(g=u.team)!=null&&g.name?(f(),O(C,{key:0},{default:h(()=>{var b,$;return[hr,l("div",null,V((b=u.team)!=null&&b.name?($=u.team)==null?void 0:$.name:"none"),1)]}),_:2},1024)):H("",!0),(_=u.role)!=null&&_.name?(f(),O(C,{key:1},{default:h(()=>{var b,$;return[fr,l("div",null,V((b=u.role)!=null&&b.name?($=u.role)==null?void 0:$.name:"none"),1)]}),_:2},1024)):H("",!0),(v=u.status)!=null&&v.name?(f(),O(C,{key:2},{default:h(()=>{var b,$;return[pr,l("div",null,V((b=u.status)!=null&&b.name?($=u.status)==null?void 0:$.name:"none"),1)]}),_:2},1024)):H("",!0)])):H("",!0),r(e).cards&&o(u.id)?(f(),T("div",mr,[y(C,{gap:2,class:"flex-wrap",justify:"start"},{default:h(()=>[(f(!0),T(B,null,W(r(e).getCards(r(e).getTableDeckIdOfUser(u.user.id)),(b,$)=>(f(),T("img",{src:b.hidden?r(jt):r(pt)(b.card.image),alt:"",srcset:"",key:`user-card-${$}`,class:"w-10 h-12"},null,8,gr))),128))]),_:2},1024)])):H("",!0)]}),_:2},1032,["playing"]))),128))]),y(C,{justify:"center"},{default:h(()=>[y(d,{to:{name:"lobby"}},{default:h(()=>[y(Wn,{title:"Leave Game"})]),_:1})]),_:1})]}),_:1})]),_:1})}}}),br=["id"],wr={class:"relative w-full h-full"},yr=["src"],_r={key:0,class:"absolute top-[27.5px] left-[13.5px] text-black"},xr=l("svg",{width:"16",height:"16",fill:"currentColor",class:"w-5 h-5",viewBox:"0 0 16 16"},[l("path",{d:"M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0z"}),l("path",{d:"M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8zm8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7z"})],-1),kr=[xr],ft=se({__name:"DraggableCard",props:{card:{type:Object,required:!0},absolute:{type:Boolean,default:!0},hiddenCards:{type:Boolean,default:!1},rotate:{type:Boolean,default:!1},showCards:{type:Boolean,default:!1},playerDeck:{type:Boolean,default:!1}},emits:["onDragStart"],setup(n,{emit:e}){const t=n,o=Ee(),a=F(null),s=d=>{switch(d){case tt.ZERO:return"";case tt.NINETY:return" rotate-90";case tt.ONE_EIGHTY:return" rotate-180";case tt.TWO_SEVENTY:return" -rotate-90";default:return""}},i=d=>t.hiddenCards?jt:t.showCards?pt(d.card.image):d.hidden?jt:pt(d.card.image);return yt(()=>{t.card&&a.value&&(a.value.style.top=`${t.card.position_x}px`,a.value.style.left=`${t.card.position_y}px`,a.value.style.zIndex=`${t.card.z_index}`)}),Je([()=>t.card.position_x,()=>t.card.position_y,()=>t.card.z_index],([d,c],[u,m])=>{a.value&&(a.value.style.top=`${t.card.position_x}px`,a.value.style.left=`${t.card.position_y}px`,a.value.style.zIndex=t.card.z_index.toString())}),(d,c)=>(f(),T("div",{ref_key:"cardRef",ref:a,id:n.card.id.toString(),class:N(["card-box cursor-pointer",[n.absolute?"absolute":"",n.rotate?s(n.card.rotate):""]]),onClick:c[0]||(c[0]=u=>r(o).clickCardId===n.card.id?r(o).clickCardId=null:r(o).clickCardId=n.card.id),onDragstart:c[1]||(c[1]=u=>d.$emit("onDragStart",u,a.value)),draggable:"true"},[l("div",wr,[l("img",{ref_key:"cardRef",ref:a,src:i(n.card),class:N(["card-box",[n.playerDeck?n.card.hidden?"":"opacity-50":"",r(o).clickCardId===n.card.id?"border-2 border-red-500":"hover:border hover:border-dark"]])},null,10,yr),n.playerDeck&&!n.card.hidden?(f(),T("div",_r,kr)):H("",!0)])],42,br))}}),Cr={class:"text-sm"},Sr=se({__name:"TableDecks",props:{deck:{type:Object,required:!0}},emits:["deckCreate","onDrop","onDragLeave","onDragEnter","onDragStart"],setup(n,{emit:e}){const t=F(null);return yt(()=>{t.value&&e("deckCreate",t.value)}),(o,a)=>(f(),O(C,{gap:4,class:"my-2 mx-8"},{default:h(()=>[y(C,{column:!0,items:"center",gap:1},{default:h(()=>{var s;return[l("div",{class:N(["relative card-box dropZone",(s=n.deck.cards)!=null&&s.length?"":"border"]),ref_key:"deckReference",ref:t,onDrop:a[0]||(a[0]=i=>o.$emit("onDrop",i,n.deck.tableDeckId)),onDragover:a[1]||(a[1]=ye(()=>{},["prevent"])),onDragleave:a[2]||(a[2]=i=>o.$emit("onDragLeave",i)),onDragenter:a[3]||(a[3]=ye(i=>o.$emit("onDragEnter",i),["prevent"]))},[(f(!0),T(B,null,W(n.deck.cards,(i,d)=>(f(),O(ft,{card:i,key:d,onOnDragStart:(c,u)=>o.$emit("onDragStart",c,u,i),"hidden-cards":n.deck.deckType===r(Zn).DECK},null,8,["card","onOnDragStart","hidden-cards"]))),128))],34),l("div",Cr,V(n.deck.deckName),1)]}),_:1})]),_:1}))}}),Tr=l("div",{class:"py-3 pr-4 border-r cursor-pointer"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6",viewBox:"0 0 16 16"},[l("path",{"fill-rule":"evenodd",d:"M7.646.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 1.707V5.5a.5.5 0 0 1-1 0V1.707L6.354 2.854a.5.5 0 1 1-.708-.708l2-2zM8 10a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 0 1 .708-.708L7.5 14.293V10.5A.5.5 0 0 1 8 10zM.146 8.354a.5.5 0 0 1 0-.708l2-2a.5.5 0 1 1 .708.708L1.707 7.5H5.5a.5.5 0 0 1 0 1H1.707l1.147 1.146a.5.5 0 0 1-.708.708l-2-2zM10 8a.5.5 0 0 1 .5-.5h3.793l-1.147-1.146a.5.5 0 0 1 .708-.708l2 2a.5.5 0 0 1 0 .708l-2 2a.5.5 0 0 1-.708-.708L14.293 8.5H10.5A.5.5 0 0 1 10 8z"})])],-1),$r={class:"py-1"},Dr=l("path",{d:"m10.79 12.912-1.614-1.615a3.5 3.5 0 0 1-4.474-4.474l-2.06-2.06C.938 6.278 0 8 0 8s3 5.5 8 5.5a7.029 7.029 0 0 0 2.79-.588zM5.21 3.088A7.028 7.028 0 0 1 8 2.5c5 0 8 5.5 8 5.5s-.939 1.721-2.641 3.238l-2.062-2.062a3.5 3.5 0 0 0-4.474-4.474L5.21 3.089z"},null,-1),Er=l("path",{d:"M5.525 7.646a2.5 2.5 0 0 0 2.829 2.829l-2.83-2.829zm4.95.708-2.829-2.83a2.5 2.5 0 0 1 2.829 2.829zm3.171 6-12-12 .708-.708 12 12-.708.708z"},null,-1),Ir=[Dr,Er],Ar=l("path",{d:"M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0z"},null,-1),Mr=l("path",{d:"M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8zm8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7z"},null,-1),Pr=[Ar,Mr],Or={class:"py-1"},Nr=l("path",{"fill-rule":"evenodd",d:"M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"},null,-1),Rr=l("path",{d:"M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"},null,-1),Gr=[Nr,Rr],zr={class:"py-1"},Lr=l("path",{"fill-rule":"evenodd",d:"M8 3a5 5 0 1 1-4.546 2.914.5.5 0 0 0-.908-.417A6 6 0 1 0 8 2v1z"},null,-1),Ur=l("path",{d:"M8 4.466V.534a.25.25 0 0 0-.41-.192L5.23 2.308a.25.25 0 0 0 0 .384l2.36 1.966A.25.25 0 0 0 8 4.466z"},null,-1),Hr=[Lr,Ur],jr={class:"py-1"},Br=l("path",{d:"M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3Zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"},null,-1),Vr=[Br],Fr=l("path",{d:"M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7Zm1.679-4.493-1.335 2.226a.75.75 0 0 1-1.174.144l-.774-.773a.5.5 0 0 1 .708-.708l.547.548 1.17-1.951a.5.5 0 1 1 .858.514ZM11 5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"},null,-1),Yr=l("path",{d:"M2 13c0 1 1 1 1 1h5.256A4.493 4.493 0 0 1 8 12.5a4.49 4.49 0 0 1 1.544-3.393C9.077 9.038 8.564 9 8 9c-5 0-6 3-6 4Z"},null,-1),Wr=[Fr,Yr],Zr={key:0,class:"py-1"},Xr={class:"p-2 rounded-3xl cursor-pointer hover:bg-white group transition duration-300"},qr=l("path",{d:"M11 5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm-9 8c0 1 1 1 1 1h5.256A4.493 4.493 0 0 1 8 12.5a4.49 4.49 0 0 1 1.544-3.393C9.077 9.038 8.564 9 8 9c-5 0-6 3-6 4Zm9.886-3.54c.18-.613 1.048-.613 1.229 0l.043.148a.64.64 0 0 0 .921.382l.136-.074c.561-.306 1.175.308.87.869l-.075.136a.64.64 0 0 0 .382.92l.149.045c.612.18.612 1.048 0 1.229l-.15.043a.64.64 0 0 0-.38.921l.074.136c.305.561-.309 1.175-.87.87l-.136-.075a.64.64 0 0 0-.92.382l-.045.149c-.18.612-1.048.612-1.229 0l-.043-.15a.64.64 0 0 0-.921-.38l-.136.074c-.561.305-1.175-.309-.87-.87l.075-.136a.64.64 0 0 0-.382-.92l-.148-.045c-.613-.18-.613-1.048 0-1.229l.148-.043a.64.64 0 0 0 .382-.921l-.074-.136c-.306-.561.308-1.175.869-.87l.136.075a.64.64 0 0 0 .92-.382l.045-.148ZM14 12.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0Z"},null,-1),Jr=[qr],Kr={class:"cursor-default bg-black py-2 text-white"},Qr=l("div",{class:"border-b p-2"}," Status player ",-1),es=l("div",null," --Empty-- ",-1),ts={key:0},ns=l("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6",viewBox:"0 0 16 16"},[l("path",{d:"M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z"})],-1),os=[ns],as=["onClick"],rs={key:0},ss=l("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6",viewBox:"0 0 16 16"},[l("path",{d:"M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z"})],-1),is=[ss],ls={class:"py-1"},ds=l("path",{d:"M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm15 2h-4v3h4V4zm0 4h-4v3h4V8zm0 4h-4v3h3a1 1 0 0 0 1-1v-2zm-5 3v-3H6v3h4zm-5 0v-3H1v2a1 1 0 0 0 1 1h3zm-4-4h4V8H1v3zm0-4h4V4H1v3zm5-3v3h4V4H6zm4 4H6v3h4V8z"},null,-1),us=[ds],cs={key:0,class:"absolute inline-flex items-center justify-center w-6 h-6 text-xs font-bold text-white bg-red-500 border-2 border-white rounded-full -top-2 -right-2 dark:border-gray-900"},hs={class:"py-1"},fs=l("path",{d:"M8.5 1.75v2.716l.047-.002c.312-.012.742-.016 1.051.046.28.056.543.18.738.288.273.152.456.385.56.642l.132-.012c.312-.024.794-.038 1.158.108.37.148.689.487.88.716.075.09.141.175.195.248h.582a2 2 0 0 1 1.99 2.199l-.272 2.715a3.5 3.5 0 0 1-.444 1.389l-1.395 2.441A1.5 1.5 0 0 1 12.42 16H6.118a1.5 1.5 0 0 1-1.342-.83l-1.215-2.43L1.07 8.589a1.517 1.517 0 0 1 2.373-1.852L5 8.293V1.75a1.75 1.75 0 0 1 3.5 0z"},null,-1),ps=[fs],ms={class:"cursor-default bg-black py-2 text-white"},gs=l("div",{class:"border-b p-2"}," Get all cards from: ",-1),vs=["onClick"],bs={class:"py-1"},ws=l("path",{d:`M57.832,26.926l-8-12c-0.186-0.278-0.498-0.445-0.832-0.445H9c-0.335,0-0.646,0.167-0.832,0.445l-8,12\r
        		c-0.205,0.307-0.224,0.701-0.05,1.026C0.292,28.278,0.631,28.481,1,28.481h6v15.038h2V28.481h5v6h2v-6h27v6h2v-6h5v15.038h2V28.481\r
        		h5c0.369,0,0.708-0.203,0.882-0.528C58.056,27.627,58.037,27.233,57.832,26.926z M2.869,26.481l6.666-10h38.93l6.667,10H2.869z`},null,-1),ys=[ws],_s={class:"cursor-default bg-black py-2 text-white"},xs=l("div",{class:"border-b p-2"}," Move cards from table to: ",-1),ks=["onClick"],Cs={key:1,class:"py-1"},Ss={class:"p-2 rounded-3xl cursor-pointer hover:bg-white group transition duration-300 relative"},Ts=l("path",{d:"M11.5 12.5a3.493 3.493 0 0 1-2.684-1.254 19.92 19.92 0 0 0 1.582 2.907c.231.35-.02.847-.438.847H6.04c-.419 0-.67-.497-.438-.847a19.919 19.919 0 0 0 1.582-2.907 3.5 3.5 0 1 1-2.538-5.743 3.5 3.5 0 1 1 6.708 0A3.5 3.5 0 1 1 11.5 12.5z"},null,-1),$s=[Ts],Ds={class:"cursor-default bg-black py-2 text-white"},Es=l("div",{class:"border-b p-2"}," Give card to player: ",-1),Is=["onClick"],As=se({__name:"PlayerSettings",setup(n){const e=Ee(),t=F(null),o=F(!0),a=F("Please click a card first"),{x:s,y:i,style:d}=Fn(t,{initialValue:{x:window.innerWidth*.5-300,y:window.innerHeight-250}});return(c,u)=>{const m=qe("VTooltip"),w=qe("VMenu");return f(),T("div",{ref_key:"el",ref:t,style:zn([r(d),{position:"fixed"}]),class:N([r(e).clickCardId?"snooze":"","z-[2147483644]"])},[y(C,{class:"bg-dark rounded-2xl px-4 border border-white",gap:2},{default:h(()=>{var E,I,D,p,g;return[Tr,l("div",$r,[y(m,null,{popper:h(()=>[L(V(r(e).clickCardId?"Show / Hide card":a.value),1)]),default:h(()=>[l("div",{class:N(["p-2 rounded-3xl group transition duration-300",[r(e).clickCardId?"hover:bg-white cursor-pointer":"cursor-not-allowed"]]),onClick:u[0]||(u[0]=_=>r(e).clickCardId?r(e).toggleCardVisibility():"")},[r(e).isCardHidden()?(f(),T("svg",{key:0,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:N([[r(e).clickCardId?"group-hover:text-dark":"opacity-50"],"w-6 h-6 transition duration-300"]),viewBox:"0 0 16 16"},Ir,2)):(f(),T("svg",{key:1,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:N([[r(e).clickCardId?"group-hover:text-dark":"opacity-50"],"w-6 h-6 transition duration-300"]),viewBox:"0 0 16 16"},Pr,2))],2)]),_:1})]),l("div",Or,[y(m,null,{popper:h(()=>[L(V(r(e).clickCardId?"Rotate card right 90\xB0":a.value),1)]),default:h(()=>[l("div",{class:N(["p-2 rounded-3xl group transition duration-300",[r(e).clickCardId?"hover:bg-white cursor-pointer hover:rotate-90":"cursor-not-allowed"]]),onClick:u[1]||(u[1]=_=>r(e).clickCardId?r(e).rotateCard(r(Jt).RIGHT):"")},[(f(),T("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:N([[r(e).clickCardId?"group-hover:text-dark":"opacity-50"],"w-6 h-6 transition duration-300"]),viewBox:"0 0 16 16"},Gr,2))],2)]),_:1})]),l("div",zr,[y(m,null,{popper:h(()=>[L(V(r(e).clickCardId?"Rotate card left 90\xB0":a.value),1)]),default:h(()=>[l("div",{class:N(["p-2 rounded-3xl group transition duration-300",[r(e).clickCardId?"hover:bg-white cursor-pointer hover:-rotate-90":"cursor-not-allowed"]]),onClick:u[2]||(u[2]=_=>r(e).clickCardId?r(e).rotateCard(r(Jt).LEFT):"")},[(f(),T("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:N([[r(e).clickCardId?"group-hover:text-dark":"opacity-50"],"w-6 h-6 transition duration-300"]),viewBox:"0 0 16 16"},Hr,2))],2)]),_:1})]),l("div",jr,[y(m,null,{popper:h(()=>[L(' Set status "My turn" ')]),default:h(()=>[l("div",{onClick:u[3]||(u[3]=_=>o.value?r(e).setPlayingPlayer():""),class:"p-2 rounded-3xl cursor-pointer hover:bg-white group transition duration-300"},[r(e).getExistPlayerPlayingStatus?(f(),T("svg",{key:1,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:N([[o.value?"group-hover:text-dark":"opacity-50 cursor-not-allowed"],"w-6 h-6 transition duration-300"]),viewBox:"0 0 16 16"},Wr,2)):(f(),T("svg",{key:0,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:N([[o.value?"group-hover:text-dark":"opacity-50 cursor-not-allowed"],"w-6 h-6 transition duration-300"]),viewBox:"0 0 16 16"},Vr,2))])]),_:1})]),((D=(I=(E=r(e).table)==null?void 0:E.game)==null?void 0:I.status)==null?void 0:D.length)!==0?(f(),T("div",Zr,[y(w,{placement:"top"},{popper:h(()=>{var _,v;return[l("div",Kr,[Qr,l("div",{class:"p-2 mt-2 cursor-pointer hover:bg-white hover:text-black transition duration-300",onClick:u[4]||(u[4]=b=>r(e).addStatusPlayer(null))},[y(C,{justify:"between",items:"center"},{default:h(()=>{var b,$,k;return[es,((k=($=(b=r(e).table)==null?void 0:b.table_users)==null?void 0:$.find(A=>A.id===r(e).getExistTableUserId))==null?void 0:k.status)===null?(f(),T("div",ts,os)):H("",!0)]}),_:1})]),(f(!0),T(B,null,W((v=(_=r(e).table)==null?void 0:_.game)==null?void 0:v.status,b=>(f(),T("div",{class:"p-2 mt-2 cursor-pointer hover:bg-white hover:text-black transition duration-300",key:b.id,onClick:$=>r(e).addStatusPlayer(b)},[y(C,{justify:"between",items:"center"},{default:h(()=>{var $,k,A,G;return[l("div",null,V(b.name),1),((G=(A=(k=($=r(e).table)==null?void 0:$.table_users)==null?void 0:k.find(K=>K.id===r(e).getExistTableUserId))==null?void 0:A.status)==null?void 0:G.id)===b.id?(f(),T("div",rs,is)):H("",!0)]}),_:2},1024)],8,as))),128))])]}),default:h(()=>[l("div",Xr,[(f(),T("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:N([[o.value?"group-hover:text-dark":"opacity-50 cursor-not-allowed"],"w-6 h-6 transition duration-300"]),viewBox:"0 0 16 16"},Jr,2))])]),_:1})])):H("",!0),l("div",ls,[y(m,null,{popper:h(()=>[L(" View Rank ")]),default:h(()=>[l("button",{class:"p-2 rounded-3xl cursor-pointer hover:bg-white group transition duration-300 relative",onClick:u[5]||(u[5]=_=>{r(e).rank.isRankModalOpen=!0,r(e).rank.notification=!1})},[(f(),T("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:N([[o.value?"group-hover:text-dark":"opacity-50 cursor-not-allowed"],"w-6 h-6 transition duration-300"]),viewBox:"0 0 16 16"},us,2)),r(e).rank.notification?(f(),T("div",cs," ! ")):H("",!0)])]),_:1})]),l("div",hs,[y(w,{placement:"top"},{popper:h(()=>{var _,v;return[l("div",ms,[gs,(f(!0),T(B,null,W((v=(_=r(e).table)==null?void 0:_.table_decks)==null?void 0:v.filter(b=>b.type!==r(fe).USER),b=>(f(),T("div",{class:"p-2 mt-2 cursor-pointer hover:bg-white hover:text-black transition duration-300",key:b.id,onClick:$=>{var k,A;return r(e).cardsToDeck(b.id,(A=(k=r(e).table)==null?void 0:k.table_decks)==null?void 0:A.find(G=>G.id===r(e).getExistPlayerTableDeckId))}},[y(C,{justify:"between",items:"center"},{default:h(()=>{var $;return[l("div",null,V(($=b.deck)==null?void 0:$.name),1)]}),_:2},1024)],8,vs))),128))])]}),default:h(()=>[l("button",{class:"p-2 rounded-3xl cursor-pointer hover:bg-white group transition duration-300 relative",onClick:u[6]||(u[6]=_=>{r(e).rank.isRankModalOpen=!0,r(e).rank.notification=!1})},[(f(),T("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:N([[o.value?"group-hover:text-dark":"opacity-50 cursor-not-allowed"],"w-6 h-6 transition duration-300"]),viewBox:"0 0 16 16"},ps,2))])]),_:1})]),l("div",bs,[y(w,{placement:"top"},{popper:h(()=>{var _,v;return[l("div",_s,[xs,(f(!0),T(B,null,W((v=(_=r(e).table)==null?void 0:_.table_decks)==null?void 0:v.filter(b=>b.type===r(fe).JUNK||b.type===r(fe).DECK),b=>{var $;return f(),T("div",{class:"p-2 mt-2 cursor-pointer hover:bg-white hover:text-black transition duration-300",key:b.id,onClick:k=>r(e).cardsToDeck(r(e).getTableDeckId,b)},V(($=b.deck)==null?void 0:$.name),9,ks)}),128))])]}),default:h(()=>[l("button",{class:"p-2 rounded-3xl cursor-pointer hover:bg-white group transition duration-300 relative",onClick:u[7]||(u[7]=_=>{r(e).rank.isRankModalOpen=!0,r(e).rank.notification=!1})},[(f(),T("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:N([[o.value?"group-hover:text-dark":"opacity-50 cursor-not-allowed"],"w-6 h-6 transition duration-300"]),viewBox:"0 0 56 56"},ys,2))])]),_:1})]),(g=(p=r(e).table)==null?void 0:p.game)!=null&&g.status?(f(),T("div",Cs,[y(w,{placement:"top"},{popper:h(()=>{var _,v;return[l("div",Ds,[Es,(f(!0),T(B,null,W((v=(_=r(e).table)==null?void 0:_.table_decks)==null?void 0:v.filter(b=>b.type===r(fe).USER),b=>{var $;return f(),T("div",{class:"p-2 mt-2 cursor-pointer hover:bg-white hover:text-black transition duration-300",key:b.id,onClick:k=>r(e).clickCardId?r(e).cardToPlayer(b.id):""},V(($=b.user)==null?void 0:$.username),9,Is)}),128))])]}),default:h(()=>[l("button",Ss,[(f(),T("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:N([[r(e).clickCardId?"group-hover:text-dark":"opacity-50"],"w-6 h-6 transition duration-300"]),viewBox:"0 0 16 16"},$s,2))])]),_:1})])):H("",!0)]}),_:1})],6)}}});const Ms=l("div",{class:"text-sm"},"Junk Deck",-1),Ps={class:"col-span-1"},Os=l("div",{class:"text-black"}," Rank Table ",-1),Ns={key:1,class:"bg-red-500 p-4 my-4 rounded italic"},Rs=se({__name:"OnlineTable",setup(n){var p,g;const e=Ee(),t=F("600"),o=F("1000"),a=F("600"),s=Wt();(p=e.table)!=null&&p.game&&(a.value=parseFloat((t.value/((g=e.table)==null?void 0:g.game.grid_rows)).toFixed(1)));const i=F(null),d=F(null),c=F(null);yt(()=>{c.value&&(e.deckReferences.junk=c.value,e.dropZones.junk[0].element=c.value),d.value&&(e.deckReferences.table=d.value,e.dropZones.table[0].element=d.value),i.value&&(e.deckReferences.user=i.value,e.dropZones.user[0].element=i.value)});const u=(_,v)=>{_&&(e.dropZones.deck[v].element=_)},m=F(2),w=_=>{},E=_=>{},I=(_,v,b)=>{_.dataTransfer.dropEffect="move",_.dataTransfer.effectAllowed="move",_.dataTransfer.setData("card",JSON.stringify(b)),_.dataTransfer.setData("cardHeight",v.offsetHeight),_.dataTransfer.setData("cardWidth",v.offsetWidth),_.dataTransfer.setData("top",_.y-v.getBoundingClientRect().top),_.dataTransfer.setData("left",_.x-v.getBoundingClientRect().left)},D=(_,v,b)=>{e.onDrop(_,v,b,m.value++)};return Je(()=>{var _,v;return(v=(_=e.table)==null?void 0:_.game)==null?void 0:v.grid_rows},()=>{var _,v;(_=e.table)!=null&&_.game&&(a.value=parseFloat((t.value/((v=e.table)==null?void 0:v.game.grid_rows)).toFixed(1)))}),(_,v)=>(f(),T(B,null,[y(C,{justify:"center"},{default:h(()=>[y(C,{class:N([`w-[${o.value}px] h-[120px]`,"bg-secondary border px-4 divide-x-2 h-full"]),items:"center",justify:"center"},{default:h(()=>[r(e).cards?(f(),O(C,{key:0},{default:h(()=>[(f(!0),T(B,null,W(r(e).dropZones.deck,(b,$)=>{var k,A,G,K,j,oe,ae,pe;return f(),O(Sr,{deck:{tableDeckId:b.tableDeckId,index:$,cards:r(e).getCards(b.tableDeckId),deckName:(K=(G=(A=(k=r(e).table)==null?void 0:k.table_decks)==null?void 0:A.find(q=>q.id===b.tableDeckId))==null?void 0:G.deck)==null?void 0:K.name,deckType:(pe=(ae=(oe=(j=r(e).table)==null?void 0:j.table_decks)==null?void 0:oe.find(q=>q.id===b.tableDeckId))==null?void 0:ae.deck)==null?void 0:pe.type},index:$,key:b.tableDeckId,onDeckCreate:q=>u(q,$),onOnDragStart:v[0]||(v[0]=(q,me,Ie)=>I(q,me,Ie)),onOnDragEnter:v[1]||(v[1]=q=>E()),onOnDragLeave:v[2]||(v[2]=q=>w()),onOnDrop:(q,me)=>D(q,me,"deck")},null,8,["deck","index","onDeckCreate","onOnDrop"])}),128))]),_:1})):H("",!0),r(e).cards?(f(),O(C,{key:1,class:"h-full px-4",column:!0,justify:"center",items:"center",gap:1},{default:h(()=>{var b;return[l("div",{class:N(["card-box cursor-pointer relative dropZone",(b=r(e).getCards(r(e).getJunkTableDeckId))!=null&&b.length?"":"border"]),ref_key:"tableDeckTrashReference",ref:c,id:"junkDeck",onDrop:v[3]||(v[3]=$=>D($,r(e).getJunkTableDeckId,"junk")),onDragover:v[4]||(v[4]=ye(()=>{},["prevent"])),onDragleave:v[5]||(v[5]=$=>w()),onDragenter:v[6]||(v[6]=ye($=>E(),["prevent"]))},[(f(!0),T(B,null,W(r(e).getCards(r(e).getJunkTableDeckId),($,k)=>(f(),O(ft,{card:$,key:k,onOnDragStart:(A,G)=>I(A,G,$)},null,8,["card","onOnDragStart"]))),128))],34),Ms]}),_:1})):H("",!0)]),_:1},8,["class"])]),_:1}),r(e).cards&&r(e).getTableExist?(f(),O(C,{key:0,justify:"center"},{default:h(()=>{var b,$,k,A,G,K;return[l("div",{id:"tableDeck",class:N(["grid bg-dark relative dropZone",`grid-cols-${($=(b=r(e).table)==null?void 0:b.game)==null?void 0:$.grid_cols} grid-rows-${(A=(k=r(e).table)==null?void 0:k.game)==null?void 0:A.grid_rows} h-[${t.value}px] w-[${o.value}px]`]),ref_key:"tableDeckReference",ref:d,onDrop:v[7]||(v[7]=j=>D(j,r(e).getTableDeckId,"table")),onDragover:v[8]||(v[8]=ye(()=>{},["prevent"])),onDragleave:v[9]||(v[9]=j=>w()),onDragenter:v[10]||(v[10]=ye(j=>E(),["prevent"]))},[(f(!0),T(B,null,W((K=(G=r(e).table)==null?void 0:G.game)==null?void 0:K.grid_cols,j=>{var oe,ae;return f(),T("div",Ps,[(f(!0),T(B,null,W((ae=(oe=r(e).table)==null?void 0:oe.game)==null?void 0:ae.grid_rows,pe=>(f(),T("div",{class:N(["row-span-1 bg-primary border w-full",`h-[${a.value}px]`])},null,2))),256))])}),256)),(f(!0),T(B,null,W(r(e).getCards(r(e).getTableDeckId),(j,oe)=>(f(),O(ft,{card:j,key:oe,onOnDragStart:(ae,pe)=>I(ae,pe,j),absolute:!0,rotate:!0},null,8,["card","onOnDragStart"]))),128))],34)]}),_:1})):H("",!0),r(e).cards?(f(),O(C,{key:1,justify:"center"},{default:h(()=>[l("div",{class:N([`w-[${o.value}px] h-[150px]`,"bg-secondary border relative dropZone"]),id:"playerDeck",ref_key:"playerDeckReference",ref:i,onDrop:v[11]||(v[11]=b=>D(b,r(e).getExistPlayerTableDeckId,"user")),onDragover:v[12]||(v[12]=ye(()=>{},["prevent"])),onDragleave:v[13]||(v[13]=b=>w()),onDragenter:v[14]||(v[14]=ye(b=>E(),["prevent"]))},[l("div",null,[y(C,{class:"border w-full h-full"},{default:h(()=>[(f(!0),T(B,null,W(r(e).getCards(r(e).getExistPlayerTableDeckId),(b,$)=>(f(),O(ft,{card:b,key:$,onOnDragStart:(k,A)=>I(k,A,b),absolute:!0,rotate:!0,"show-cards":!0,"player-deck":!0},null,8,["card","onOnDragStart"]))),128))]),_:1})])],34)]),_:1})):H("",!0),y(As),y(mn,{"modal-open":r(e).rank.isRankModalOpen,onCloseModal:v[15]||(v[15]=b=>r(e).rank.isRankModalOpen=!1)},{modal_header:h(()=>[Os]),body:h(()=>[r(s).rankPoints.length>0?(f(),O(gn,{key:0,"table-headers":r(s).tableHeaders,class:"border border-gray-700 rounded-lg overflow-y-auto"},{default:h(()=>[(f(!0),T(B,null,W(r(s).rankPoints,(b,$)=>(f(),O(Nt,{key:`rankRow-${b}`},{default:h(()=>[(f(!0),T(B,null,W(b,k=>(f(),O(Re,{key:k.id},{default:h(()=>[L(V(k.type===r(De).TITLE?k.title:k.points),1)]),_:2},1024))),128))]),_:2},1024))),128))]),_:1},8,["table-headers"])):(f(),T("div",Ns," The rank table is empty "))]),_:1},8,["modal-open"])],64))}}),Gs={class:"max-h-[500px] overflow-y-auto"},zs={class:"border-b border-primary text-black py-2 mb-3"},Ls=["src"],Us=l("div",null,"No cards",-1),Hs=se({__name:"ModalViewAllCards",props:{isModalOpen:{type:Boolean,required:!0},tableDecks:{type:Array,required:!0},cards:{type:Array,required:!0}},emits:["closeModal"],setup(n,{emit:e}){const t=n,o=s=>{var i,d;switch(s.type){case fe.USER:return(i=s.user)==null?void 0:i.username;case fe.DECK:return(d=s.deck)==null?void 0:d.name;case fe.TABLE:return"Table";case fe.JUNK:return"Junk"}},a=s=>{var i;return((i=t.cards)==null?void 0:i.filter(d=>d.table_deck.id===s))||[]};return(s,i)=>n.cards||n.tableDecks?(f(),O(mn,{key:0,modalOpen:n.isModalOpen,onCloseModal:i[1]||(i[1]=d=>s.$emit("closeModal")),class:"z-[2147483645]"},{modal_header:h(()=>[L(" Cards ")]),body:h(()=>[l("div",Gs,[(f(!0),T(B,null,W(n.tableDecks,d=>{var c;return f(),T("div",{key:d.id,class:"px-4"},[l("div",zs,V(o(d)),1),((c=a(d.id))==null?void 0:c.length)>0?(f(),O(C,{key:0,gap:2,wrap:!0},{default:h(()=>[(f(!0),T(B,null,W(a(d.id),u=>(f(),T("img",{class:"card-box",src:r(pt)(u.card.image),key:u.id},null,8,Ls))),128))]),_:2},1024)):(f(),O(C,{key:1,gap:2},{default:h(()=>[Us]),_:1}))])}),128))])]),modal_footer:h(()=>[l("button",{class:"flex w-full items-center justify-center rounded-md border border-transparent bg-gray-400 px-8 py-3 text-base font-medium text-white hover:bg-secondary hover:text-white md:py-3 md:px-10 md:text-lg ml-2",onClick:i[0]||(i[0]=d=>s.$emit("closeModal"))}," Close ")]),_:1},8,["modalOpen"])):H("",!0)}}),js=se({__name:"TimeAgo",props:{created_at:{type:String,required:!0}},setup(n){const e=n,t=F();yt(()=>{t.value=o(),setInterval(()=>{t.value=o()},6e4)});const o=()=>{const a=new Date,s=new Date(e.created_at),i=Math.floor((a.getTime()-s.getTime())/1e3);if(i<60)return"less a minute ago";if(i<3600){const d=Math.floor(i/60);return`${d} ${d===1?"minute":"minutes"} ago`}else if(i<86400){const d=Math.floor(i/3600);return`${d} ${d===1?"hour":"hours"} ago`}else{const d=Math.floor(i/86400);return`${d} ${d===1?"day":"days"} ago`}};return(a,s)=>V(t.value)}}),Bs={class:"font-bold text-dark"},Vs={class:"text-gray-800 text-sm text-right"},Fs=se({__name:"ChatMessage",props:{isActiveUserMessage:{type:Boolean,default:!1},data:{type:Object,required:!0}},setup(n){return(e,t)=>(f(),O(C,{justify:n.isActiveUserMessage?"start":"end"},{default:h(()=>[y(C,{class:N(["py-2 px-4 rounded-3xl w-96",n.isActiveUserMessage?"bg-primary":"bg-light-blue"]),column:!0},{default:h(()=>{var o,a,s;return[l("span",Bs,V((o=n.data)==null?void 0:o.user.username)+":",1),l("div",null,V((a=n.data)==null?void 0:a.message),1),l("div",Vs,[y(js,{created_at:(s=n.data)==null?void 0:s.created_at.toString()},null,8,["created_at"])])]}),_:1},8,["class"])]),_:1},8,["justify"]))}}),Ys=Bt(),Ws=Ee(),Zs=hn("ChatStore",{state:()=>({message:"",messages:[],unreadMessages:0,room:Ws.room,isChatOpen:!1}),getters:{getMessages:n=>n.messages},actions:{_sendMessage(){if(this.$state.message.length>0){const n={message:this.$state.message,room:this.$state.room,user:Ys.user};te.emit("sendMessage",{data:n},e=>{e.status===200&&(this.$state.message="")})}},toggleChatMessenger(){this.$state.isChatOpen||(this.$state.unreadMessages=0),this.$state.isChatOpen=!this.$state.isChatOpen}}}),Xs=l("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-12 h-12",viewBox:"0 0 16 16"},[l("path",{d:"M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM5 8a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"})],-1),qs={key:0,class:"absolute inline-flex items-center justify-center w-6 h-6 text-xs font-bold text-white bg-red-500 border-2 border-white rounded-full -top-2 -right-2 dark:border-gray-900"},Js={key:1,class:"h-full relative bg-dark-smooth rounded-3xl p-4"},Ks=l("div",{class:"text-2xl px-2 font-bold"}," Table Chat ",-1),Qs=l("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-8 h-8",viewBox:"0 0 16 16"},[l("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"})],-1),ei=[Qs],ti=l("button",{type:"submit",class:"w-8 h-8 mr-8 absolute right-3 cursor-pointer"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-8 h-8 mr-8 cursor-pointer hover:text-primary transition duration-300 hover:scale-110",viewBox:"0 0 16 16"},[l("path",{d:"M15.964.686a.5.5 0 0 0-.65-.65L.767 5.855H.766l-.452.18a.5.5 0 0 0-.082.887l.41.26.001.002 4.995 3.178 3.178 4.995.002.002.26.41a.5.5 0 0 0 .886-.083l6-15Zm-1.833 1.89L6.637 10.07l-.215-.338a.5.5 0 0 0-.154-.154l-.338-.215 7.494-7.494 1.178-.471-.47 1.178Z"})])],-1),ni=se({__name:"RoomChat",setup(n){const e=F(""),t=Zs(),o=Bt(),a=Ee();return fn(()=>{t.room=a.room,te.on("getSendMessage",s=>{s&&(t.messages.unshift(s),t.isChatOpen||t.unreadMessages++)})}),Je(()=>t.message,s=>{e.value=s}),pn(()=>{te.off("getSendMessage"),t.messages=[],t.message="",t.unreadMessages=0}),(s,i)=>(f(),T("div",{class:N(["fixed bottom-10 left-10 transition-height ease duration-1000 z-[2147483640]",r(t).isChatOpen?"w-[500px] h-[600px]":"w-[50px] h-[50px]"])},[r(t).isChatOpen?(f(),T("div",Js,[y(C,{justify:"between",column:!0,class:"h-full",gap:6},{default:h(()=>[y(C,{justify:"between"},{default:h(()=>[Ks,l("div",{class:"cursor-pointer hover:text-primary duration-300 transition hover:scale-110",onClick:i[1]||(i[1]=d=>r(t).toggleChatMessenger())},ei)]),_:1}),r(t).getMessages.length>0?(f(),O(C,{key:0,class:"bottom-5 left-6 bg-dark rounded-3xl w-full p-4 h-full overflow-y-auto scroll-smooth",columnReverse:!0,gap:4},{default:h(()=>[(f(!0),T(B,null,W(r(t).getMessages,d=>(f(),O(Fs,{data:d,key:d.id,isActiveUserMessage:d.user.id===r(o).user.id},null,8,["data","isActiveUserMessage"]))),128))]),_:1})):(f(),O(C,{key:1,justify:"center",items:"center",class:"text-xl bottom-5 left-6 bg-dark rounded-3xl w-full p-4 h-full overflow-y-auto scroll-smooth",columnReverse:!0,gap:4},{default:h(()=>[L(" No messages ")]),_:1})),l("form",{onSubmit:i[4]||(i[4]=ye(d=>r(t)._sendMessage(),["prevent"]))},[y(C,{justify:"center",items:"center",class:"bg-dark bottom-5 rounded-3xl left-6 w-full",gap:4},{default:h(()=>[Ln(l("input",{"onUpdate:modelValue":i[2]||(i[2]=d=>e.value=d),onInput:i[3]||(i[3]=d=>r(t).message=e.value),class:"w-full bg-dark rounded-3xl p-4 focus:outline-none focus:ring-2 transition duration-300 focus:ring-primary focus:ring-opacity-50",placeholder:"Type your message..."},null,544),[[Un,e.value]]),ti]),_:1})],32)]),_:1})])):(f(),O(C,{key:0,justify:"start"},{default:h(()=>[l("div",{class:"cursor-pointer hover:text-primary duration-300 transition hover:scale-110 relative",onClick:i[0]||(i[0]=d=>r(t).toggleChatMessenger())},[Xs,r(t).unreadMessages>0?(f(),T("div",qs,V(r(t).unreadMessages),1)):H("",!0)])]),_:1}))],2))}}),oi={class:"rounded-2xl bg-primary px-12 py-6 text-4xl italic"},ai={class:"mt-6 text-xl"},ri=se({__name:"TableStatusMessage",props:{title:{type:String,required:!0},message:{type:String,required:!0}},setup(n){return(e,t)=>(f(),O(C,{class:"one-page bg-dark",items:"center",justify:"center",column:!0},{default:h(()=>[l("div",oi,V(n.title),1),l("div",ai,V(n.message),1)]),_:1}))}}),si={class:"w-5/6 overflow-auto text-white relative"},yi=se({__name:"RoomView",setup(n){const e=Hn(),t=Ee(),o=Bt(),a=F(!1),s=F(!1),i=F(1),d=cn(),c=Wt(),u=F(!1);t.room=e.params.id.toString(),t.table?t._joinTable(t.room):xt.push({name:"lobby"});const m=F(["getTurnTableUsers","getUpdateTableUser","getStartGameDetails","exitUsersFromTable","getTableGameStatus","getShowAllCards","getUpdateCard","getShuffleDeck","getUpdateRankRow"]),w=()=>{var p,g,_,v,b;c.room=(p=t.room)!=null?p:"",c.tableId=(_=(g=t.table)==null?void 0:g.id)!=null?_:null,c.addTableUsers((b=(v=t.table)==null?void 0:v.table_users)!=null?b:[])};fn(()=>{t.setGameMaster(),te.on("getTableUsers",p=>{var g;p.public_url===t.room&&p.table_users&&(t.table=p,(g=t.table.table_users)!=null&&g.find(v=>v.user.id===o.user.id)||(d.info(`Player ${o.user.username} has remove from Game Master`),xt.push({name:"lobby"})))}),te.on("getTurnTableUsers",p=>{var _,v;t.table&&p&&(t.table.table_users=p);const g=(v=(_=t.table)==null?void 0:_.table_users)==null?void 0:v.find(b=>b.playing===!0);g&&d.info(`Player ${g.user.username} is playing`,{position:jn.TOP_CENTER,timeout:3e3})}),te.on("getUpdateTableUser",p=>{var g,_,v,b,$,k,A;if(p){const G=(_=(g=t.table)==null?void 0:g.table_users)==null?void 0:_.map(K=>K.id).indexOf(p.id);if(t.table&&G!==void 0){if(!((v=t.table.table_users[G])!=null&&v.status)&&(p==null?void 0:p.status)||((b=t.table.table_users[G].status)==null?void 0:b.id)!==(($=p==null?void 0:p.status)==null?void 0:$.id)){const K=(k=p.status)!=null&&k.name?`${p.user.username} update his status to "${(A=p.status)==null?void 0:A.name}"`:`${p.user.username} has remove his status`;d.info(K)}t.table.table_users[G]=p}}}),te.on("getStartGameDetails",(p,g)=>{var _,v;if(p){const b=((_=t.table)==null?void 0:_.status)===S.WAITING;t.table=p,I();const $=((v=t.table)==null?void 0:v.status)===S.PLAYING;$&&b&&(w(),t.refUndoHistory=[],t.refRedoHistory=[]),$&&t.deckReferences.junk&&([t.dropZones.junk[0].element,t.dropZones.user[0].element,t.dropZones.table[0].element]=[t.deckReferences.junk,t.deckReferences.user,t.deckReferences.table])}g&&(t.cards=g)}),te.on("exitUsersFromTable",()=>{t.room=null,t.gameMaster=!1,t.table=null,t.cards=null,u.value=!0,d.info("Game master has remove you from the table"),xt.push({name:"lobby"})}),te.on("getTableGameStatus",p=>{p&&(t.table=p,p.status===S.PAUSE&&d.info("Game has paused"),p.status===S.PLAYING&&d.info("Game has start"),p.status===S.GAME_MASTER_EDIT&&d.info("The game master is preparing the table"),p.status===S.FINISH&&d.info("Game has end"),p.status===S.PLAYER_LEAVE&&d.info("Player has leave the game"),p.status===S.PLAYER_DISCONNECTED&&d.info("Player has lost his connection"))}),te.on("getShowAllCards",p=>{p&&(s.value=p)}),te.on("getUpdateCard",p=>{p&&(t.zIndex=p.z_index+1,E(p))}),te.on("getShuffleDeck",(p,g)=>{var _,v,b,$;if(p){p.forEach(A=>{E(A)});const k=($=(b=(v=(_=t.table)==null?void 0:_.table_decks)==null?void 0:v.find(A=>A.id===g))==null?void 0:b.deck)==null?void 0:$.name;d.info(`Game Master has shuffle the deck "${k}"`)}}),te.on("getUpdateRankRow",(p,g)=>{if(p)if(g===c.nextRow)c.rankPoints.push(p);else{const _=c.rankPoints.findIndex(v=>v.some(b=>b.row===g));c.rankPoints[_]=p}else{const _=c.rankPoints.findIndex(v=>v.some(b=>b.row===g));c.rankPoints=c.rankPoints.filter((v,b)=>b!==_)}t.rank.notification=!0})});const E=p=>{const g=t.replaceCard(p);g&&(t.updateUndoHistory(g),t.removeRedoHistoryMovement())},I=()=>{var p,g;t.resetDropZones(),(g=(p=t.table)==null?void 0:p.table_decks)==null||g.forEach(_=>{switch(_.type){case fe.DECK:t.dropZones.deck.push({tableDeckId:_.id,element:null});break;case fe.JUNK:t.dropZones.junk.push({tableDeckId:_.id,element:null});break;case fe.TABLE:t.dropZones.table.push({tableDeckId:_.id,element:null});break;case fe.USER:_.id===t.getExistPlayerTableDeckId&&t.dropZones.user.push({tableDeckId:_.id,element:null});break}})},D=F([{status:S.WAITING,title:"Game not started yet",message:"...waiting from Game Master to start the game"},{status:S.PAUSE,title:"Game Paused",message:"...waiting from Game Master to resume the game"},{status:S.GAME_MASTER_EDIT,title:"Game edit from Game Master",message:"..waiting from Game Master to finish with the configure of the table"},{status:S.FINISH,title:"Game has ended",message:"...waiting from Game Master to start the game"},{status:S.PLAYER_LEAVE,title:"Player has leave the game",message:"...waiting for player to join or to Game Master to start new game"},{status:S.PLAYER_DISCONNECTED,title:"Player has lost his connection",message:"...waiting for player to join or to Game Master to start new game"}]);return pn(()=>{t.room=null,t.gameMaster=!1,t.cards=null,t.refUndoHistory=[],t.refRedoHistory=[],u.value||(console.log("\x1B[33m%s\x1B[0m","forceQuit"),t._leaveTable()),m.value.forEach(p=>{te.off(p)})}),(p,g)=>{var _,v,b,$;return f(),T(B,null,[y(C,{class:"relative one-page w-full bg-dark"},{default:h(()=>{var k,A;return[l("div",si,[((k=r(t).table)==null?void 0:k.status)===r(S).PLAYING||r(t).gameMaster&&((A=r(t).table)==null?void 0:A.status)===r(S).GAME_MASTER_EDIT?(f(),O(Rs,{key:0})):(f(!0),T(B,{key:1},W(D.value,({status:G,title:K,message:j})=>(f(),O(C,{key:G,items:"center",justify:"center"},{default:h(()=>{var oe;return[((oe=r(t).table)==null?void 0:oe.status)===G?(f(),O(ri,{key:0,title:K,message:j},null,8,["title","message"])):H("",!0)]}),_:2},1024))),128)),y(ni)]),y(vr,{class:"w-1/6 overflow-x-auto"})]}),_:1}),r(t).gameMaster?(f(),O(wo,{key:0,onOpenSettings:g[0]||(g[0]=k=>{i.value=k,a.value=!0}),onStopGame:g[1]||(g[1]=k=>r(t)._stopGame()),onLeaveGame:g[2]||(g[2]=k=>r(t)._leaveGame()),onNewGame:g[3]||(g[3]=k=>r(t)._newGame()),onUpdateTableGameStatus:g[4]||(g[4]=k=>r(t)._updateTableGameStatus(k)),onShowAllCards:g[5]||(g[5]=k=>r(t)._showAllCards()),onSetNextPlayer:g[6]||(g[6]=k=>r(t)._setNextPlayer(k)),onShuffleDeck:g[7]||(g[7]=k=>r(t)._shuffleDeck()),onHistoryMovement:g[8]||(g[8]=k=>r(t).historyMovement(k))})):H("",!0),r(t).gameMaster?(f(),O(or,{key:1,"table-users":(_=r(t).table)==null?void 0:_.table_users,"table-status":{status:(v=r(t).table)==null?void 0:v.status},table:r(t).table||void 0,"modal-open":a.value,onCloseModal:g[9]||(g[9]=k=>a.value=!1),onUpdateTurnTableUsers:g[10]||(g[10]=k=>r(t)._updateTurnTableUsers()),onUpdateRole:g[11]||(g[11]=(k,A)=>r(t)._setRoleTableUser(k,A)),onUpdateStatus:g[12]||(g[12]=(k,A)=>r(t)._setStatusTableUser(k,A)),onUpdateTeam:g[13]||(g[13]=(k,A)=>r(t)._setTeamTableUser(k,A)),onStopGame:g[14]||(g[14]=k=>r(t)._stopGame()),onLeaveGame:g[15]||(g[15]=k=>r(t)._leaveGame()),onNewGame:g[16]||(g[16]=k=>r(t)._newGame()),onUpdateTableGameStatus:g[17]||(g[17]=k=>r(t)._updateTableGameStatus(k)),onShowAllCards:g[18]||(g[18]=k=>r(t)._showAllCards()),"menu-tab":i.value,onRemovePlayer:g[19]||(g[19]=k=>r(t)._removePlayer(k)),onSetNextPlayer:g[20]||(g[20]=k=>r(t)._setNextPlayer(k))},null,8,["table-users","table-status","table","modal-open","menu-tab"])):H("",!0),r(t).cards&&((b=r(t).table)==null?void 0:b.table_decks)?(f(),O(Hs,{key:2,"is-modal-open":s.value,cards:r(t).cards,"table-decks":($=r(t).table)==null?void 0:$.table_decks,onCloseModal:g[21]||(g[21]=k=>s.value=!1)},null,8,["is-modal-open","cards","table-decks"])):H("",!0)],64)}}});export{yi as default};
