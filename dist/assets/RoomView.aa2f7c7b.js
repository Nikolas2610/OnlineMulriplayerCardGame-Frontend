import{b as te}from"./helpers.df839561.js";import{d as se,h as qe,o as f,L as O,l as h,j as w,m as L,i as d,k as r,c as D,G as N,_ as Xt,u as cn,P as hn,H as B,I as W,C as F,D as U,r as V,q as Je,$ as Mn,V as Pn,a0 as On,a1 as Nn,M as Rn,b as yt,w as ye,a2 as Gn,a as Bt,p as fn,Z as pn,E as zn,J as Ln,a3 as Un,e as xt,a4 as jn}from"./index.14bb9b25.js";import{u as Ee,T,H as qt,R as tt,M as Jt,a as ge}from"./PlayerStore.078c6055.js";import{_ as S,a as Kt,b as Hn,c as kt}from"./CheckBoxField.vue_vue_type_script_setup_true_lang.7f0ddb16.js";import{o as Bn,a as Vn,M as mn}from"./Modal.cb2be4ab.js";import{D as Nt,a as Re,_ as gn}from"./DarkTableCell.vue_vue_type_script_setup_true_lang.0996cefb.js";import{_ as nt}from"./InputField.vue_vue_type_script_setup_true_lang.3f8666b4.js";import{_ as Fn}from"./_plugin-vue_export-helper.cdc0426e.js";import{c as Yn}from"./cards.91b306de.js";import{_ as Wn}from"./BackButton.vue_vue_type_script_setup_true_lang.9b4c639f.js";import{l as pt}from"./helpers.2772eae0.js";import{D as Zn}from"./DeckType.enum.90a9c7f8.js";const Xn=d("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 focus:outline-none",viewBox:"0 0 16 16"},[d("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3v-3z"})],-1),qn=["disabled"],Jn={key:0,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 focus:outline-none",viewBox:"0 0 16 16"},Kn=d("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"},null,-1),Qn=[Kn],ea={key:1,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 focus:outline-none",viewBox:"0 0 16 16"},ta=d("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"},null,-1),na=[ta],aa=["disabled"],oa=d("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 focus:outline-none",viewBox:"0 0 16 16"},[d("path",{d:"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"}),d("path",{"fill-rule":"evenodd",d:"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"})],-1),ra=d("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 focus:outline-none",viewBox:"0 0 16 16"},[d("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.5 5A1.5 1.5 0 0 0 5 6.5v3A1.5 1.5 0 0 0 6.5 11h3A1.5 1.5 0 0 0 11 9.5v-3A1.5 1.5 0 0 0 9.5 5h-3z"})],-1),sa=["disabled"],ia=d("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 focus:outline-none",viewBox:"0 0 16 16"},[d("path",{d:"M2.5 15a.5.5 0 1 1 0-1h1v-1a4.5 4.5 0 0 1 2.557-4.06c.29-.139.443-.377.443-.59v-.7c0-.213-.154-.451-.443-.59A4.5 4.5 0 0 1 3.5 3V2h-1a.5.5 0 0 1 0-1h11a.5.5 0 0 1 0 1h-1v1a4.5 4.5 0 0 1-2.557 4.06c-.29.139-.443.377-.443.59v.7c0 .213.154.451.443.59A4.5 4.5 0 0 1 12.5 13v1h1a.5.5 0 0 1 0 1h-11zm2-13v1c0 .537.12 1.045.337 1.5h6.326c.216-.455.337-.963.337-1.5V2h-7zm3 6.35c0 .701-.478 1.236-1.011 1.492A3.5 3.5 0 0 0 4.5 13s.866-1.299 3-1.48V8.35zm1 0v3.17c2.134.181 3 1.48 3 1.48a3.5 3.5 0 0 0-1.989-3.158C8.978 9.586 8.5 9.052 8.5 8.351z"})],-1),la=d("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 focus:outline-none",viewBox:"0 0 16 16"},[d("path",{d:"M1.5 15a.5.5 0 0 0 0 1h13a.5.5 0 0 0 0-1H13V2.5A1.5 1.5 0 0 0 11.5 1H11V.5a.5.5 0 0 0-.57-.495l-7 1A.5.5 0 0 0 3 1.5V15H1.5zM11 2h.5a.5.5 0 0 1 .5.5V15h-1V2zm-2.5 8c-.276 0-.5-.448-.5-1s.224-1 .5-1 .5.448.5 1-.224 1-.5 1z"})],-1),da=d("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 focus:outline-none",viewBox:"0 0 16 16"},[d("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-4.79-2.907L8.5 7.028V5.5a.5.5 0 0 0-.79-.407L5 7.028V5.5a.5.5 0 0 0-1 0v5a.5.5 0 0 0 1 0V8.972l2.71 1.935a.5.5 0 0 0 .79-.407V8.972l2.71 1.935A.5.5 0 0 0 12 10.5v-5a.5.5 0 0 0-.79-.407z"})],-1),ua=d("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 focus:outline-none",viewBox:"0 0 16 16"},[d("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM4.79 5.093A.5.5 0 0 0 4 5.5v5a.5.5 0 0 0 .79.407L7.5 8.972V10.5a.5.5 0 0 0 .79.407L11 8.972V10.5a.5.5 0 0 0 1 0v-5a.5.5 0 0 0-1 0v1.528L8.29 5.093a.5.5 0 0 0-.79.407v1.528L4.79 5.093z"})],-1),ca=d("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 focus:outline-none",viewBox:"0 0 16 16"},[d("path",{d:"M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5z"})],-1),ha=d("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 focus:outline-none",viewBox:"0 0 16 16"},[d("path",{"fill-rule":"evenodd",d:"M0 3.5A.5.5 0 0 1 .5 3H1c2.202 0 3.827 1.24 4.874 2.418.49.552.865 1.102 1.126 1.532.26-.43.636-.98 1.126-1.532C9.173 4.24 10.798 3 13 3v1c-1.798 0-3.173 1.01-4.126 2.082A9.624 9.624 0 0 0 7.556 8a9.624 9.624 0 0 0 1.317 1.918C9.828 10.99 11.204 12 13 12v1c-2.202 0-3.827-1.24-4.874-2.418A10.595 10.595 0 0 1 7 9.05c-.26.43-.636.98-1.126 1.532C4.827 11.76 3.202 13 1 13H.5a.5.5 0 0 1 0-1H1c1.798 0 3.173-1.01 4.126-2.082A9.624 9.624 0 0 0 6.444 8a9.624 9.624 0 0 0-1.317-1.918C4.172 5.01 2.796 4 1 4H.5a.5.5 0 0 1-.5-.5z"}),d("path",{d:"M13 5.466V1.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384l-2.36 1.966a.25.25 0 0 1-.41-.192zm0 9v-3.932a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384l-2.36 1.966a.25.25 0 0 1-.41-.192z"})],-1),fa=d("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 focus:outline-none",viewBox:"0 0 16 16"},[d("path",{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16ZM7.729 5.055A.5.5 0 0 1 8 5.5v1.886l3.21-2.293A.5.5 0 0 1 12 5.5v5a.5.5 0 0 1-.79.407L8 8.614V10.5a.5.5 0 0 1-.79.407l-3.5-2.5a.5.5 0 0 1 0-.814l3.5-2.5a.5.5 0 0 1 .519-.038Z"})],-1),pa=d("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 focus:outline-none",viewBox:"0 0 16 16"},[d("path",{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16ZM4.79 5.093 8 7.386V5.5a.5.5 0 0 1 .79-.407l3.5 2.5a.5.5 0 0 1 0 .814l-3.5 2.5A.5.5 0 0 1 8 10.5V8.614l-3.21 2.293A.5.5 0 0 1 4 10.5v-5a.5.5 0 0 1 .79-.407Z"})],-1),ma=d("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 focus:outline-none",viewBox:"0 0 16 16"},[d("path",{d:"M7 14s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1H7Zm4-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6Zm-5.784 6A2.238 2.238 0 0 1 5 13c0-1.355.68-2.75 1.936-3.72A6.325 6.325 0 0 0 5 9c-4 0-5 3-5 4s1 1 1 1h4.216ZM4.5 8a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z"})],-1),ga=d("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 focus:outline-none",viewBox:"0 0 16 16"},[d("path",{d:"M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm15 2h-4v3h4V4zm0 4h-4v3h4V8zm0 4h-4v3h3a1 1 0 0 0 1-1v-2zm-5 3v-3H6v3h4zm-5 0v-3H1v2a1 1 0 0 0 1 1h3zm-4-4h4V8H1v3zm0-4h4V4H1v3zm5-3v3h4V4H6zm4 4H6v3h4V8z"})],-1),va=d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"#fff",viewBox:"0 0 16 16",class:"hover:fill-primary transition duration-300 group-hover:animate-spin h-8 w-8 focus:outline-none"},[d("path",{d:"M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492zM5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0z"}),d("path",{d:"M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52l-.094-.319zm-2.633.283c.246-.835 1.428-.835 1.674 0l.094.319a1.873 1.873 0 0 0 2.693 1.115l.291-.16c.764-.415 1.6.42 1.184 1.185l-.159.292a1.873 1.873 0 0 0 1.116 2.692l.318.094c.835.246.835 1.428 0 1.674l-.319.094a1.873 1.873 0 0 0-1.115 2.693l.16.291c.415.764-.42 1.6-1.185 1.184l-.291-.159a1.873 1.873 0 0 0-2.693 1.116l-.094.318c-.246.835-1.428.835-1.674 0l-.094-.319a1.873 1.873 0 0 0-2.692-1.115l-.292.16c-.764.415-1.6-.42-1.184-1.185l.159-.291A1.873 1.873 0 0 0 1.945 8.93l-.319-.094c-.835-.246-.835-1.428 0-1.674l.319-.094A1.873 1.873 0 0 0 3.06 4.377l-.16-.292c-.415-.764.42-1.6 1.185-1.184l.292.159a1.873 1.873 0 0 0 2.692-1.115l.094-.319z"})],-1),ba=se({__name:"GameMasterMenu",emits:["openSettings","stopGame","leaveGame","newGame","updateTableGameStatus","showAllCards","setNextPlayer","shuffleDeck","historyMovement"],setup(n,{emit:e}){const t=Ee(),a=()=>{var s,i,l;if(!t.clickCardId)return!0;const o=(i=(s=t.cards)==null?void 0:s.find(c=>c.id===t.clickCardId))==null?void 0:i.table_deck.id;return!o||((l=t.table)==null?void 0:l.status)!==T.PLAYING?!0:o===t.getJunkTableDeckId?!1:!t.dropZones.deck.some(c=>c.tableDeckId===o)};return(o,s)=>{const i=qe("VTooltip");return f(),O(S,{class:"border text-white fixed bottom-32 rounded-3xl h-14 bg-dark py-0 transition duration-1000 group cursor-pointer -translate-x-[685px] hover:-translate-x-[20px] z-[2147483639]",items:"center",justify:"center"},{default:h(()=>[w(S,{class:"border-r h-full px-6 pl-10",items:"center",gap:4},{default:h(()=>{var l,c;return[w(S,{justify:"center",items:"center",class:"hover:text-primary duration-300 transition",onClick:s[0]||(s[0]=u=>o.$emit("newGame"))},{default:h(()=>[w(i,{distance:"22"},{popper:h(()=>[L(" New Game ")]),default:h(()=>[Xn]),_:1})]),_:1}),w(S,{justify:"center",items:"center",class:"hover:text-primary duration-300 transition"},{default:h(()=>{var u,m,b,E;return[d("button",{onClick:s[1]||(s[1]=I=>{var $,p;return(($=r(t).table)==null?void 0:$.status)===r(T).PLAYING||((p=r(t).table)==null?void 0:p.status)===r(T).GAME_MASTER_EDIT?o.$emit("updateTableGameStatus",r(T).PAUSE):o.$emit("updateTableGameStatus",r(T).PLAYING)}),disabled:((u=r(t).table)==null?void 0:u.status)===r(T).FINISH||((m=r(t).table)==null?void 0:m.status)===r(T).WAITING,class:N(((b=r(t).table)==null?void 0:b.status)===r(T).FINISH||((E=r(t).table)==null?void 0:E.status)===r(T).WAITING?"cursor-not-allowed opacity-50":"")},[w(i,{distance:"22"},{popper:h(()=>[L(" Pause / Resume Game ")]),default:h(()=>{var I;return[((I=r(t).table)==null?void 0:I.status)!==r(T).PAUSE?(f(),D("svg",Jn,Qn)):(f(),D("svg",ea,na))]}),_:1})],10,qn)]}),_:1}),w(S,{justify:"center",items:"center",class:"hover:text-primary duration-300 transition"},{default:h(()=>{var u,m,b,E;return[d("button",{onClick:s[2]||(s[2]=I=>{var $,p;return(($=r(t).table)==null?void 0:$.status)===r(T).PLAYING||((p=r(t).table)==null?void 0:p.status)===r(T).PAUSE?o.$emit("updateTableGameStatus",r(T).GAME_MASTER_EDIT):o.$emit("updateTableGameStatus",r(T).PLAYING)}),disabled:((u=r(t).table)==null?void 0:u.status)===r(T).FINISH||((m=r(t).table)==null?void 0:m.status)===r(T).WAITING,class:N(((b=r(t).table)==null?void 0:b.status)===r(T).FINISH||((E=r(t).table)==null?void 0:E.status)===r(T).WAITING?"cursor-not-allowed opacity-50":"")},[w(i,{distance:"22"},{popper:h(()=>[L(" Hide table from other players to edit the table ")]),default:h(()=>[oa]),_:1})],10,aa)]}),_:1}),w(S,{justify:"center",items:"center",class:N(["hover:text-primary duration-300 transition",((l=r(t).table)==null?void 0:l.status)===r(T).WAITING||((c=r(t).table)==null?void 0:c.status)===r(T).FINISH?"cursor-not-allowed opacity-50":""]),onClick:s[3]||(s[3]=u=>{var m;return((m=r(t).table)==null?void 0:m.status)!==r(T).WAITING?o.$emit("stopGame"):""})},{default:h(()=>[w(i,{distance:"22"},{popper:h(()=>[L(" End Game ")]),default:h(()=>[ra]),_:1})]),_:1},8,["class"]),w(S,{justify:"center",items:"center"},{default:h(()=>{var u,m;return[d("button",{disabled:((u=r(t).table)==null?void 0:u.status)!==r(T).FINISH,onClick:s[4]||(s[4]=b=>o.$emit("updateTableGameStatus",r(T).WAITING)),class:N(["hover:text-primary duration-300 transition",((m=r(t).table)==null?void 0:m.status)!==r(T).FINISH?"cursor-not-allowed opacity-50":""])},[w(i,{distance:"22"},{popper:h(()=>[L(" Wait For New Players ")]),default:h(()=>[ia]),_:1})],10,sa)]}),_:1}),w(S,{justify:"center",items:"center",class:"hover:text-primary duration-300 transition",onClick:s[5]||(s[5]=u=>o.$emit("leaveGame"))},{default:h(()=>[w(i,{distance:"22"},{popper:h(()=>[L(" Leave Game All Players ")]),default:h(()=>[la]),_:1})]),_:1})]}),_:1}),w(S,{class:"border-r h-full px-6",items:"center",gap:4},{default:h(()=>{var l,c,u,m,b,E,I,$;return[w(S,{justify:"center",items:"center",onClick:s[6]||(s[6]=p=>{var g;return((g=r(t).table)==null?void 0:g.status)===r(T).PLAYING?o.$emit("setNextPlayer",!1):""}),class:N([((l=r(t).table)==null?void 0:l.status)===r(T).PLAYING?"":"cursor-not-allowed opacity-50","hover:text-primary duration-300 transition"])},{default:h(()=>[w(i,{distance:"22"},{popper:h(()=>[L(" Previous Player ")]),default:h(()=>[da]),_:1})]),_:1},8,["class"]),w(S,{justify:"center",items:"center",onClick:s[7]||(s[7]=p=>{var g;return((g=r(t).table)==null?void 0:g.status)===r(T).PLAYING?o.$emit("setNextPlayer",!0):""}),class:N(["hover:text-primary duration-300 transition",((c=r(t).table)==null?void 0:c.status)===r(T).PLAYING?"":"cursor-not-allowed opacity-50"])},{default:h(()=>[w(i,{distance:"22"},{popper:h(()=>[L(" Next Player ")]),default:h(()=>[ua]),_:1})]),_:1},8,["class"]),w(S,{justify:"center",items:"center",class:N(["hover:text-primary duration-300 transition",((u=r(t).table)==null?void 0:u.status)===r(T).PLAYING||((m=r(t).table)==null?void 0:m.status)===r(T).PAUSE?"":"cursor-not-allowed opacity-50"]),onClick:s[8]||(s[8]=p=>{var g,x;return((g=r(t).table)==null?void 0:g.status)===r(T).PLAYING||((x=r(t).table)==null?void 0:x.status)===r(T).PAUSE?o.$emit("showAllCards"):""})},{default:h(()=>[w(i,{distance:"22"},{popper:h(()=>[L(" Show all cards to players ")]),default:h(()=>[ca]),_:1})]),_:1},8,["class"]),w(S,{justify:"center",items:"center",class:N(["hover:text-primary duration-300 transition",a()?"cursor-not-allowed opacity-50":""]),onClick:s[9]||(s[9]=p=>a()?"":o.$emit("shuffleDeck"))},{default:h(()=>[w(i,{distance:"22"},{popper:h(()=>[L(" Shuffle selected deck ")]),default:h(()=>[ha]),_:1})]),_:1},8,["class"]),w(S,{justify:"center",items:"center",class:N(["hover:text-primary duration-300 transition",(((b=r(t).table)==null?void 0:b.status)===r(T).PLAYING||((E=r(t).table)==null?void 0:E.status)===r(T).GAME_MASTER_EDIT)&&r(t).refUndoHistory.length>0?"":"cursor-not-allowed opacity-50"]),onClick:s[10]||(s[10]=p=>{var g,x;return(((g=r(t).table)==null?void 0:g.status)===r(T).PLAYING||((x=r(t).table)==null?void 0:x.status)===r(T).GAME_MASTER_EDIT)&&r(t).refUndoHistory.length>0?o.$emit("historyMovement",r(qt).UNDO):""})},{default:h(()=>[w(i,{distance:"22"},{popper:h(()=>[L(" Undo Card Movement ")]),default:h(()=>[fa]),_:1})]),_:1},8,["class"]),w(S,{justify:"center",items:"center",class:N(["hover:text-primary duration-300 transition",(((I=r(t).table)==null?void 0:I.status)===r(T).PLAYING||(($=r(t).table)==null?void 0:$.status)===r(T).GAME_MASTER_EDIT)&&r(t).refRedoHistory.length>0?"":"cursor-not-allowed opacity-50"]),onClick:s[11]||(s[11]=p=>{var g,x;return(((g=r(t).table)==null?void 0:g.status)===r(T).PLAYING||((x=r(t).table)==null?void 0:x.status)===r(T).GAME_MASTER_EDIT)&&r(t).refRedoHistory.length>0?o.$emit("historyMovement",r(qt).REDO):""})},{default:h(()=>[w(i,{distance:"22"},{popper:h(()=>[L(" Redo Card Movement ")]),default:h(()=>[pa]),_:1})]),_:1},8,["class"])]}),_:1}),w(S,{class:"border-r h-full px-6",items:"center",gap:4},{default:h(()=>{var l,c;return[w(S,{justify:"center",items:"center",onClick:s[12]||(s[12]=u=>o.$emit("openSettings",2)),class:"hover:text-primary duration-300 transition"},{default:h(()=>[w(i,{distance:"22"},{popper:h(()=>[L(" Open User List ")]),default:h(()=>[ma]),_:1})]),_:1}),w(S,{justify:"center",items:"center",onClick:s[13]||(s[13]=u=>{var m,b;return((m=r(t).table)==null?void 0:m.status)===r(T).FINISH||((b=r(t).table)==null?void 0:b.status)===r(T).WAITING?"":o.$emit("openSettings",3)}),class:N([((l=r(t).table)==null?void 0:l.status)===r(T).FINISH||((c=r(t).table)==null?void 0:c.status)===r(T).WAITING?"cursor-not-allowed opacity-50":"","hover:text-primary duration-300 transition"])},{default:h(()=>[w(i,{distance:"22"},{popper:h(()=>[L(" Edit Rank Table ")]),default:h(()=>[ga]),_:1})]),_:1},8,["class"])]}),_:1}),w(S,{justify:"center",items:"center",class:"px-8",onClick:s[14]||(s[14]=l=>o.$emit("openSettings",1))},{default:h(()=>[w(i,{distance:"18"},{popper:h(()=>[L(" Open Game Master Settings ")]),default:h(()=>[va]),_:1})]),_:1})]),_:1})}}});/*!
  * vue-draggable-next v2.1.0
  * (c) 2021 Anish George
  * @license MIT
  *//**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Qt(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);e&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,a)}return t}function we(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Qt(Object(t),!0).forEach(function(a){wa(n,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Qt(Object(t)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(t,a))})}return n}function lt(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?lt=function(e){return typeof e}:lt=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lt(n)}function wa(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function xe(){return xe=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a])}return n},xe.apply(this,arguments)}function ya(n,e){if(n==null)return{};var t={},a=Object.keys(n),o,s;for(s=0;s<a.length;s++)o=a[s],!(e.indexOf(o)>=0)&&(t[o]=n[o]);return t}function _a(n,e){if(n==null)return{};var t=ya(n,e),a,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(o=0;o<s.length;o++)a=s[o],!(e.indexOf(a)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,a)||(t[a]=n[a]))}return t}var xa="1.14.0";function _e(n){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(n)}var ke=_e(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Ke=_e(/Edge/i),en=_e(/firefox/i),Fe=_e(/safari/i)&&!_e(/chrome/i)&&!_e(/android/i),vn=_e(/iP(ad|od|hone)/i),ka=_e(/chrome/i)&&_e(/android/i),bn={capture:!1,passive:!1};function j(n,e,t){n.addEventListener(e,t,!ke&&bn)}function z(n,e,t){n.removeEventListener(e,t,!ke&&bn)}function mt(n,e){if(!!e){if(e[0]===">"&&(e=e.substring(1)),n)try{if(n.matches)return n.matches(e);if(n.msMatchesSelector)return n.msMatchesSelector(e);if(n.webkitMatchesSelector)return n.webkitMatchesSelector(e)}catch{return!1}return!1}}function Ca(n){return n.host&&n!==document&&n.host.nodeType?n.host:n.parentNode}function ve(n,e,t,a){if(n){t=t||document;do{if(e!=null&&(e[0]===">"?n.parentNode===t&&mt(n,e):mt(n,e))||a&&n===t)return n;if(n===t)break}while(n=Ca(n))}return null}var tn=/\s+/g;function de(n,e,t){if(n&&e)if(n.classList)n.classList[t?"add":"remove"](e);else{var a=(" "+n.className+" ").replace(tn," ").replace(" "+e+" "," ");n.className=(a+(t?" "+e:"")).replace(tn," ")}}function M(n,e,t){var a=n&&n.style;if(a){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(n,""):n.currentStyle&&(t=n.currentStyle),e===void 0?t:t[e];!(e in a)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),a[e]=t+(typeof t=="string"?"":"px")}}function Le(n,e){var t="";if(typeof n=="string")t=n;else do{var a=M(n,"transform");a&&a!=="none"&&(t=a+" "+t)}while(!e&&(n=n.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(t)}function wn(n,e,t){if(n){var a=n.getElementsByTagName(e),o=0,s=a.length;if(t)for(;o<s;o++)t(a[o],o);return a}return[]}function be(){var n=document.scrollingElement;return n||document.documentElement}function Q(n,e,t,a,o){if(!(!n.getBoundingClientRect&&n!==window)){var s,i,l,c,u,m,b;if(n!==window&&n.parentNode&&n!==be()?(s=n.getBoundingClientRect(),i=s.top,l=s.left,c=s.bottom,u=s.right,m=s.height,b=s.width):(i=0,l=0,c=window.innerHeight,u=window.innerWidth,m=window.innerHeight,b=window.innerWidth),(e||t)&&n!==window&&(o=o||n.parentNode,!ke))do if(o&&o.getBoundingClientRect&&(M(o,"transform")!=="none"||t&&M(o,"position")!=="static")){var E=o.getBoundingClientRect();i-=E.top+parseInt(M(o,"border-top-width")),l-=E.left+parseInt(M(o,"border-left-width")),c=i+s.height,u=l+s.width;break}while(o=o.parentNode);if(a&&n!==window){var I=Le(o||n),$=I&&I.a,p=I&&I.d;I&&(i/=p,l/=$,b/=$,m/=p,c=i+m,u=l+b)}return{top:i,left:l,bottom:c,right:u,width:b,height:m}}}function nn(n,e,t){for(var a=De(n,!0),o=Q(n)[e];a;){var s=Q(a)[t],i=void 0;if(t==="top"||t==="left"?i=o>=s:i=o<=s,!i)return a;if(a===be())break;a=De(a,!1)}return!1}function Ue(n,e,t,a){for(var o=0,s=0,i=n.children;s<i.length;){if(i[s].style.display!=="none"&&i[s]!==P.ghost&&(a||i[s]!==P.dragged)&&ve(i[s],t.draggable,n,!1)){if(o===e)return i[s];o++}s++}return null}function Vt(n,e){for(var t=n.lastElementChild;t&&(t===P.ghost||M(t,"display")==="none"||e&&!mt(t,e));)t=t.previousElementSibling;return t||null}function he(n,e){var t=0;if(!n||!n.parentNode)return-1;for(;n=n.previousElementSibling;)n.nodeName.toUpperCase()!=="TEMPLATE"&&n!==P.clone&&(!e||mt(n,e))&&t++;return t}function an(n){var e=0,t=0,a=be();if(n)do{var o=Le(n),s=o.a,i=o.d;e+=n.scrollLeft*s,t+=n.scrollTop*i}while(n!==a&&(n=n.parentNode));return[e,t]}function Sa(n,e){for(var t in n)if(!!n.hasOwnProperty(t)){for(var a in e)if(e.hasOwnProperty(a)&&e[a]===n[t][a])return Number(t)}return-1}function De(n,e){if(!n||!n.getBoundingClientRect)return be();var t=n,a=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var o=M(t);if(t.clientWidth<t.scrollWidth&&(o.overflowX=="auto"||o.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(o.overflowY=="auto"||o.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return be();if(a||e)return t;a=!0}}while(t=t.parentNode);return be()}function Ta(n,e){if(n&&e)for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function Ct(n,e){return Math.round(n.top)===Math.round(e.top)&&Math.round(n.left)===Math.round(e.left)&&Math.round(n.height)===Math.round(e.height)&&Math.round(n.width)===Math.round(e.width)}var Ye;function yn(n,e){return function(){if(!Ye){var t=arguments,a=this;t.length===1?n.call(a,t[0]):n.apply(a,t),Ye=setTimeout(function(){Ye=void 0},e)}}}function Da(){clearTimeout(Ye),Ye=void 0}function _n(n,e,t){n.scrollLeft+=e,n.scrollTop+=t}function xn(n){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(n).cloneNode(!0):t?t(n).clone(!0)[0]:n.cloneNode(!0)}var ce="Sortable"+new Date().getTime();function $a(){var n=[],e;return{captureAnimationState:function(){if(n=[],!!this.options.animation){var a=[].slice.call(this.el.children);a.forEach(function(o){if(!(M(o,"display")==="none"||o===P.ghost)){n.push({target:o,rect:Q(o)});var s=we({},n[n.length-1].rect);if(o.thisAnimationDuration){var i=Le(o,!0);i&&(s.top-=i.f,s.left-=i.e)}o.fromRect=s}})}},addAnimationState:function(a){n.push(a)},removeAnimationState:function(a){n.splice(Sa(n,{target:a}),1)},animateAll:function(a){var o=this;if(!this.options.animation){clearTimeout(e),typeof a=="function"&&a();return}var s=!1,i=0;n.forEach(function(l){var c=0,u=l.target,m=u.fromRect,b=Q(u),E=u.prevFromRect,I=u.prevToRect,$=l.rect,p=Le(u,!0);p&&(b.top-=p.f,b.left-=p.e),u.toRect=b,u.thisAnimationDuration&&Ct(E,b)&&!Ct(m,b)&&($.top-b.top)/($.left-b.left)===(m.top-b.top)/(m.left-b.left)&&(c=Ia($,E,I,o.options)),Ct(b,m)||(u.prevFromRect=m,u.prevToRect=b,c||(c=o.options.animation),o.animate(u,$,b,c)),c&&(s=!0,i=Math.max(i,c),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},c),u.thisAnimationDuration=c)}),clearTimeout(e),s?e=setTimeout(function(){typeof a=="function"&&a()},i):typeof a=="function"&&a(),n=[]},animate:function(a,o,s,i){if(i){M(a,"transition",""),M(a,"transform","");var l=Le(this.el),c=l&&l.a,u=l&&l.d,m=(o.left-s.left)/(c||1),b=(o.top-s.top)/(u||1);a.animatingX=!!m,a.animatingY=!!b,M(a,"transform","translate3d("+m+"px,"+b+"px,0)"),this.forRepaintDummy=Ea(a),M(a,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),M(a,"transform","translate3d(0,0,0)"),typeof a.animated=="number"&&clearTimeout(a.animated),a.animated=setTimeout(function(){M(a,"transition",""),M(a,"transform",""),a.animated=!1,a.animatingX=!1,a.animatingY=!1},i)}}}}function Ea(n){return n.offsetWidth}function Ia(n,e,t,a){return Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*a.animation}var Oe=[],St={initializeByDefault:!0},Qe={mount:function(e){for(var t in St)St.hasOwnProperty(t)&&!(t in e)&&(e[t]=St[t]);Oe.forEach(function(a){if(a.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Oe.push(e)},pluginEvent:function(e,t,a){var o=this;this.eventCanceled=!1,a.cancel=function(){o.eventCanceled=!0};var s=e+"Global";Oe.forEach(function(i){!t[i.pluginName]||(t[i.pluginName][s]&&t[i.pluginName][s](we({sortable:t},a)),t.options[i.pluginName]&&t[i.pluginName][e]&&t[i.pluginName][e](we({sortable:t},a)))})},initializePlugins:function(e,t,a,o){Oe.forEach(function(l){var c=l.pluginName;if(!(!e.options[c]&&!l.initializeByDefault)){var u=new l(e,t,e.options);u.sortable=e,u.options=e.options,e[c]=u,xe(a,u.defaults)}});for(var s in e.options)if(!!e.options.hasOwnProperty(s)){var i=this.modifyOption(e,s,e.options[s]);typeof i<"u"&&(e.options[s]=i)}},getEventProperties:function(e,t){var a={};return Oe.forEach(function(o){typeof o.eventProperties=="function"&&xe(a,o.eventProperties.call(t[o.pluginName],e))}),a},modifyOption:function(e,t,a){var o;return Oe.forEach(function(s){!e[s.pluginName]||s.optionListeners&&typeof s.optionListeners[t]=="function"&&(o=s.optionListeners[t].call(e[s.pluginName],a))}),o}};function Aa(n){var e=n.sortable,t=n.rootEl,a=n.name,o=n.targetEl,s=n.cloneEl,i=n.toEl,l=n.fromEl,c=n.oldIndex,u=n.newIndex,m=n.oldDraggableIndex,b=n.newDraggableIndex,E=n.originalEvent,I=n.putSortable,$=n.extraEventProperties;if(e=e||t&&t[ce],!!e){var p,g=e.options,x="on"+a.charAt(0).toUpperCase()+a.substr(1);window.CustomEvent&&!ke&&!Ke?p=new CustomEvent(a,{bubbles:!0,cancelable:!0}):(p=document.createEvent("Event"),p.initEvent(a,!0,!0)),p.to=i||t,p.from=l||t,p.item=o||t,p.clone=s,p.oldIndex=c,p.newIndex=u,p.oldDraggableIndex=m,p.newDraggableIndex=b,p.originalEvent=E,p.pullMode=I?I.lastPutMode:void 0;var v=we(we({},$),Qe.getEventProperties(a,e));for(var y in v)p[y]=v[y];t&&t.dispatchEvent(p),g[x]&&g[x].call(e,p)}}var Ma=["evt"],le=function(e,t){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=a.evt,s=_a(a,Ma);Qe.pluginEvent.bind(P)(e,t,we({dragEl:k,parentEl:Z,ghostEl:R,rootEl:Y,nextEl:Pe,lastDownEl:dt,cloneEl:X,cloneHidden:Te,dragStarted:He,putSortable:ne,activeSortable:P.active,originalEvent:o,oldIndex:ze,oldDraggableIndex:We,newIndex:ue,newDraggableIndex:Se,hideGhostForTarget:Tn,unhideGhostForTarget:Dn,cloneNowHidden:function(){Te=!0},cloneNowShown:function(){Te=!1},dispatchSortableEvent:function(l){ie({sortable:t,name:l,originalEvent:o})}},s))};function ie(n){Aa(we({putSortable:ne,cloneEl:X,targetEl:k,rootEl:Y,oldIndex:ze,oldDraggableIndex:We,newIndex:ue,newDraggableIndex:Se},n))}var k,Z,R,Y,Pe,dt,X,Te,ze,ue,We,Se,at,ne,Ge=!1,gt=!1,vt=[],Ae,me,Tt,Dt,on,rn,He,Ne,Ze,Xe=!1,ot=!1,ut,re,$t=[],Rt=!1,bt=[],_t=typeof document<"u",rt=vn,sn=Ke||ke?"cssFloat":"float",Pa=_t&&!ka&&!vn&&"draggable"in document.createElement("div"),kn=function(){if(!!_t){if(ke)return!1;var n=document.createElement("x");return n.style.cssText="pointer-events:auto",n.style.pointerEvents==="auto"}}(),Cn=function(e,t){var a=M(e),o=parseInt(a.width)-parseInt(a.paddingLeft)-parseInt(a.paddingRight)-parseInt(a.borderLeftWidth)-parseInt(a.borderRightWidth),s=Ue(e,0,t),i=Ue(e,1,t),l=s&&M(s),c=i&&M(i),u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Q(s).width,m=c&&parseInt(c.marginLeft)+parseInt(c.marginRight)+Q(i).width;if(a.display==="flex")return a.flexDirection==="column"||a.flexDirection==="column-reverse"?"vertical":"horizontal";if(a.display==="grid")return a.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&l.float&&l.float!=="none"){var b=l.float==="left"?"left":"right";return i&&(c.clear==="both"||c.clear===b)?"vertical":"horizontal"}return s&&(l.display==="block"||l.display==="flex"||l.display==="table"||l.display==="grid"||u>=o&&a[sn]==="none"||i&&a[sn]==="none"&&u+m>o)?"vertical":"horizontal"},Oa=function(e,t,a){var o=a?e.left:e.top,s=a?e.right:e.bottom,i=a?e.width:e.height,l=a?t.left:t.top,c=a?t.right:t.bottom,u=a?t.width:t.height;return o===l||s===c||o+i/2===l+u/2},Na=function(e,t){var a;return vt.some(function(o){var s=o[ce].options.emptyInsertThreshold;if(!(!s||Vt(o))){var i=Q(o),l=e>=i.left-s&&e<=i.right+s,c=t>=i.top-s&&t<=i.bottom+s;if(l&&c)return a=o}}),a},Sn=function(e){function t(s,i){return function(l,c,u,m){var b=l.options.group.name&&c.options.group.name&&l.options.group.name===c.options.group.name;if(s==null&&(i||b))return!0;if(s==null||s===!1)return!1;if(i&&s==="clone")return s;if(typeof s=="function")return t(s(l,c,u,m),i)(l,c,u,m);var E=(i?l:c).options.group.name;return s===!0||typeof s=="string"&&s===E||s.join&&s.indexOf(E)>-1}}var a={},o=e.group;(!o||lt(o)!="object")&&(o={name:o}),a.name=o.name,a.checkPull=t(o.pull,!0),a.checkPut=t(o.put),a.revertClone=o.revertClone,e.group=a},Tn=function(){!kn&&R&&M(R,"display","none")},Dn=function(){!kn&&R&&M(R,"display","")};_t&&document.addEventListener("click",function(n){if(gt)return n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.stopImmediatePropagation&&n.stopImmediatePropagation(),gt=!1,!1},!0);var Me=function(e){if(k){e=e.touches?e.touches[0]:e;var t=Na(e.clientX,e.clientY);if(t){var a={};for(var o in e)e.hasOwnProperty(o)&&(a[o]=e[o]);a.target=a.rootEl=t,a.preventDefault=void 0,a.stopPropagation=void 0,t[ce]._onDragOver(a)}}},Ra=function(e){k&&k.parentNode[ce]._isOutsideThisEl(e.target)};function P(n,e){if(!(n&&n.nodeType&&n.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(n));this.el=n,this.options=e=xe({},e),n[ce]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(n.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Cn(n,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(i,l){i.setData("Text",l.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:P.supportPointer!==!1&&"PointerEvent"in window&&!Fe,emptyInsertThreshold:5};Qe.initializePlugins(this,n,t);for(var a in t)!(a in e)&&(e[a]=t[a]);Sn(e);for(var o in this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this));this.nativeDraggable=e.forceFallback?!1:Pa,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?j(n,"pointerdown",this._onTapStart):(j(n,"mousedown",this._onTapStart),j(n,"touchstart",this._onTapStart)),this.nativeDraggable&&(j(n,"dragover",this),j(n,"dragenter",this)),vt.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),xe(this,$a())}P.prototype={constructor:P,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Ne=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,k):this.options.direction},_onTapStart:function(e){if(!!e.cancelable){var t=this,a=this.el,o=this.options,s=o.preventOnFilter,i=e.type,l=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,c=(l||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||c,m=o.filter;if(Va(a),!k&&!(/mousedown|pointerdown/.test(i)&&e.button!==0||o.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&Fe&&c&&c.tagName.toUpperCase()==="SELECT")&&(c=ve(c,o.draggable,a,!1),!(c&&c.animated)&&dt!==c)){if(ze=he(c),We=he(c,o.draggable),typeof m=="function"){if(m.call(this,e,c,this)){ie({sortable:t,rootEl:u,name:"filter",targetEl:c,toEl:a,fromEl:a}),le("filter",t,{evt:e}),s&&e.cancelable&&e.preventDefault();return}}else if(m&&(m=m.split(",").some(function(b){if(b=ve(u,b.trim(),a,!1),b)return ie({sortable:t,rootEl:b,name:"filter",targetEl:c,fromEl:a,toEl:a}),le("filter",t,{evt:e}),!0}),m)){s&&e.cancelable&&e.preventDefault();return}o.handle&&!ve(u,o.handle,a,!1)||this._prepareDragStart(e,l,c)}}},_prepareDragStart:function(e,t,a){var o=this,s=o.el,i=o.options,l=s.ownerDocument,c;if(a&&!k&&a.parentNode===s){var u=Q(a);if(Y=s,k=a,Z=k.parentNode,Pe=k.nextSibling,dt=a,at=i.group,P.dragged=k,Ae={target:k,clientX:(t||e).clientX,clientY:(t||e).clientY},on=Ae.clientX-u.left,rn=Ae.clientY-u.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,k.style["will-change"]="all",c=function(){if(le("delayEnded",o,{evt:e}),P.eventCanceled){o._onDrop();return}o._disableDelayedDragEvents(),!en&&o.nativeDraggable&&(k.draggable=!0),o._triggerDragStart(e,t),ie({sortable:o,name:"choose",originalEvent:e}),de(k,i.chosenClass,!0)},i.ignore.split(",").forEach(function(m){wn(k,m.trim(),Et)}),j(l,"dragover",Me),j(l,"mousemove",Me),j(l,"touchmove",Me),j(l,"mouseup",o._onDrop),j(l,"touchend",o._onDrop),j(l,"touchcancel",o._onDrop),en&&this.nativeDraggable&&(this.options.touchStartThreshold=4,k.draggable=!0),le("delayStart",this,{evt:e}),i.delay&&(!i.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(Ke||ke))){if(P.eventCanceled){this._onDrop();return}j(l,"mouseup",o._disableDelayedDrag),j(l,"touchend",o._disableDelayedDrag),j(l,"touchcancel",o._disableDelayedDrag),j(l,"mousemove",o._delayedDragTouchMoveHandler),j(l,"touchmove",o._delayedDragTouchMoveHandler),i.supportPointer&&j(l,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(c,i.delay)}else c()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){k&&Et(k),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;z(e,"mouseup",this._disableDelayedDrag),z(e,"touchend",this._disableDelayedDrag),z(e,"touchcancel",this._disableDelayedDrag),z(e,"mousemove",this._delayedDragTouchMoveHandler),z(e,"touchmove",this._delayedDragTouchMoveHandler),z(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?j(document,"pointermove",this._onTouchMove):t?j(document,"touchmove",this._onTouchMove):j(document,"mousemove",this._onTouchMove):(j(k,"dragend",this),j(Y,"dragstart",this._onDragStart));try{document.selection?ct(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(Ge=!1,Y&&k){le("dragStarted",this,{evt:t}),this.nativeDraggable&&j(document,"dragover",Ra);var a=this.options;!e&&de(k,a.dragClass,!1),de(k,a.ghostClass,!0),P.active=this,e&&this._appendGhost(),ie({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(me){this._lastX=me.clientX,this._lastY=me.clientY,Tn();for(var e=document.elementFromPoint(me.clientX,me.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(me.clientX,me.clientY),e!==t);)t=e;if(k.parentNode[ce]._isOutsideThisEl(e),t)do{if(t[ce]){var a=void 0;if(a=t[ce]._onDragOver({clientX:me.clientX,clientY:me.clientY,target:e,rootEl:t}),a&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);Dn()}},_onTouchMove:function(e){if(Ae){var t=this.options,a=t.fallbackTolerance,o=t.fallbackOffset,s=e.touches?e.touches[0]:e,i=R&&Le(R,!0),l=R&&i&&i.a,c=R&&i&&i.d,u=rt&&re&&an(re),m=(s.clientX-Ae.clientX+o.x)/(l||1)+(u?u[0]-$t[0]:0)/(l||1),b=(s.clientY-Ae.clientY+o.y)/(c||1)+(u?u[1]-$t[1]:0)/(c||1);if(!P.active&&!Ge){if(a&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<a)return;this._onDragStart(e,!0)}if(R){i?(i.e+=m-(Tt||0),i.f+=b-(Dt||0)):i={a:1,b:0,c:0,d:1,e:m,f:b};var E="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");M(R,"webkitTransform",E),M(R,"mozTransform",E),M(R,"msTransform",E),M(R,"transform",E),Tt=m,Dt=b,me=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!R){var e=this.options.fallbackOnBody?document.body:Y,t=Q(k,!0,rt,!0,e),a=this.options;if(rt){for(re=e;M(re,"position")==="static"&&M(re,"transform")==="none"&&re!==document;)re=re.parentNode;re!==document.body&&re!==document.documentElement?(re===document&&(re=be()),t.top+=re.scrollTop,t.left+=re.scrollLeft):re=be(),$t=an(re)}R=k.cloneNode(!0),de(R,a.ghostClass,!1),de(R,a.fallbackClass,!0),de(R,a.dragClass,!0),M(R,"transition",""),M(R,"transform",""),M(R,"box-sizing","border-box"),M(R,"margin",0),M(R,"top",t.top),M(R,"left",t.left),M(R,"width",t.width),M(R,"height",t.height),M(R,"opacity","0.8"),M(R,"position",rt?"absolute":"fixed"),M(R,"zIndex","100000"),M(R,"pointerEvents","none"),P.ghost=R,e.appendChild(R),M(R,"transform-origin",on/parseInt(R.style.width)*100+"% "+rn/parseInt(R.style.height)*100+"%")}},_onDragStart:function(e,t){var a=this,o=e.dataTransfer,s=a.options;if(le("dragStart",this,{evt:e}),P.eventCanceled){this._onDrop();return}le("setupClone",this),P.eventCanceled||(X=xn(k),X.draggable=!1,X.style["will-change"]="",this._hideClone(),de(X,this.options.chosenClass,!1),P.clone=X),a.cloneId=ct(function(){le("clone",a),!P.eventCanceled&&(a.options.removeCloneOnHide||Y.insertBefore(X,k),a._hideClone(),ie({sortable:a,name:"clone"}))}),!t&&de(k,s.dragClass,!0),t?(gt=!0,a._loopId=setInterval(a._emulateDragOver,50)):(z(document,"mouseup",a._onDrop),z(document,"touchend",a._onDrop),z(document,"touchcancel",a._onDrop),o&&(o.effectAllowed="move",s.setData&&s.setData.call(a,o,k)),j(document,"drop",a),M(k,"transform","translateZ(0)")),Ge=!0,a._dragStartId=ct(a._dragStarted.bind(a,t,e)),j(document,"selectstart",a),He=!0,Fe&&M(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,a=e.target,o,s,i,l=this.options,c=l.group,u=P.active,m=at===c,b=l.sort,E=ne||u,I,$=this,p=!1;if(Rt)return;function g(je,In){le(je,$,we({evt:e,isOwner:m,axis:I?"vertical":"horizontal",revert:i,dragRect:o,targetRect:s,canSort:b,fromSortable:E,target:a,completed:v,onMove:function(Zt,An){return st(Y,t,k,o,Zt,Q(Zt),e,An)},changed:y},In))}function x(){g("dragOverAnimationCapture"),$.captureAnimationState(),$!==E&&E.captureAnimationState()}function v(je){return g("dragOverCompleted",{insertion:je}),je&&(m?u._hideClone():u._showClone($),$!==E&&(de(k,ne?ne.options.ghostClass:u.options.ghostClass,!1),de(k,l.ghostClass,!0)),ne!==$&&$!==P.active?ne=$:$===P.active&&ne&&(ne=null),E===$&&($._ignoreWhileAnimating=a),$.animateAll(function(){g("dragOverAnimationComplete"),$._ignoreWhileAnimating=null}),$!==E&&(E.animateAll(),E._ignoreWhileAnimating=null)),(a===k&&!k.animated||a===t&&!a.animated)&&(Ne=null),!l.dragoverBubble&&!e.rootEl&&a!==document&&(k.parentNode[ce]._isOutsideThisEl(e.target),!je&&Me(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),p=!0}function y(){ue=he(k),Se=he(k,l.draggable),ie({sortable:$,name:"change",toEl:t,newIndex:ue,newDraggableIndex:Se,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),a=ve(a,l.draggable,t,!0),g("dragOver"),P.eventCanceled)return p;if(k.contains(e.target)||a.animated&&a.animatingX&&a.animatingY||$._ignoreWhileAnimating===a)return v(!1);if(gt=!1,u&&!l.disabled&&(m?b||(i=Z!==Y):ne===this||(this.lastPutMode=at.checkPull(this,u,k,e))&&c.checkPut(this,u,k,e))){if(I=this._getDirection(e,a)==="vertical",o=Q(k),g("dragOverValid"),P.eventCanceled)return p;if(i)return Z=Y,x(),this._hideClone(),g("revert"),P.eventCanceled||(Pe?Y.insertBefore(k,Pe):Y.appendChild(k)),v(!0);var C=Vt(t,l.draggable);if(!C||Ua(e,I,this)&&!C.animated){if(C===k)return v(!1);if(C&&t===e.target&&(a=C),a&&(s=Q(a)),st(Y,t,k,o,a,s,e,!!a)!==!1)return x(),t.appendChild(k),Z=t,y(),v(!0)}else if(C&&La(e,I,this)){var _=Ue(t,0,l,!0);if(_===k)return v(!1);if(a=_,s=Q(a),st(Y,t,k,o,a,s,e,!1)!==!1)return x(),t.insertBefore(k,_),Z=t,y(),v(!0)}else if(a.parentNode===t){s=Q(a);var A=0,G,q=k.parentNode!==t,H=!Oa(k.animated&&k.toRect||o,a.animated&&a.toRect||s,I),ae=I?"top":"left",oe=nn(a,"top","top")||nn(k,"top","top"),fe=oe?oe.scrollTop:void 0;Ne!==a&&(G=s[ae],Xe=!1,ot=!H&&l.invertSwap||q),A=ja(e,a,s,I,H?1:l.swapThreshold,l.invertedSwapThreshold==null?l.swapThreshold:l.invertedSwapThreshold,ot,Ne===a);var J;if(A!==0){var pe=he(k);do pe-=A,J=Z.children[pe];while(J&&(M(J,"display")==="none"||J===R))}if(A===0||J===a)return v(!1);Ne=a,Ze=A;var Ie=a.nextElementSibling,Ce=!1;Ce=A===1;var et=st(Y,t,k,o,a,s,e,Ce);if(et!==!1)return(et===1||et===-1)&&(Ce=et===1),Rt=!0,setTimeout(za,30),x(),Ce&&!Ie?t.appendChild(k):a.parentNode.insertBefore(k,Ce?Ie:a),oe&&_n(oe,0,fe-oe.scrollTop),Z=k.parentNode,G!==void 0&&!ot&&(ut=Math.abs(G-Q(a)[ae])),y(),v(!0)}if(t.contains(k))return v(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){z(document,"mousemove",this._onTouchMove),z(document,"touchmove",this._onTouchMove),z(document,"pointermove",this._onTouchMove),z(document,"dragover",Me),z(document,"mousemove",Me),z(document,"touchmove",Me)},_offUpEvents:function(){var e=this.el.ownerDocument;z(e,"mouseup",this._onDrop),z(e,"touchend",this._onDrop),z(e,"pointerup",this._onDrop),z(e,"touchcancel",this._onDrop),z(document,"selectstart",this)},_onDrop:function(e){var t=this.el,a=this.options;if(ue=he(k),Se=he(k,a.draggable),le("drop",this,{evt:e}),Z=k&&k.parentNode,ue=he(k),Se=he(k,a.draggable),P.eventCanceled){this._nulling();return}Ge=!1,ot=!1,Xe=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Gt(this.cloneId),Gt(this._dragStartId),this.nativeDraggable&&(z(document,"drop",this),z(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Fe&&M(document.body,"user-select",""),M(k,"transform",""),e&&(He&&(e.cancelable&&e.preventDefault(),!a.dropBubble&&e.stopPropagation()),R&&R.parentNode&&R.parentNode.removeChild(R),(Y===Z||ne&&ne.lastPutMode!=="clone")&&X&&X.parentNode&&X.parentNode.removeChild(X),k&&(this.nativeDraggable&&z(k,"dragend",this),Et(k),k.style["will-change"]="",He&&!Ge&&de(k,ne?ne.options.ghostClass:this.options.ghostClass,!1),de(k,this.options.chosenClass,!1),ie({sortable:this,name:"unchoose",toEl:Z,newIndex:null,newDraggableIndex:null,originalEvent:e}),Y!==Z?(ue>=0&&(ie({rootEl:Z,name:"add",toEl:Z,fromEl:Y,originalEvent:e}),ie({sortable:this,name:"remove",toEl:Z,originalEvent:e}),ie({rootEl:Z,name:"sort",toEl:Z,fromEl:Y,originalEvent:e}),ie({sortable:this,name:"sort",toEl:Z,originalEvent:e})),ne&&ne.save()):ue!==ze&&ue>=0&&(ie({sortable:this,name:"update",toEl:Z,originalEvent:e}),ie({sortable:this,name:"sort",toEl:Z,originalEvent:e})),P.active&&((ue==null||ue===-1)&&(ue=ze,Se=We),ie({sortable:this,name:"end",toEl:Z,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){le("nulling",this),Y=k=Z=R=Pe=X=dt=Te=Ae=me=He=ue=Se=ze=We=Ne=Ze=ne=at=P.dragged=P.ghost=P.clone=P.active=null,bt.forEach(function(e){e.checked=!0}),bt.length=Tt=Dt=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":k&&(this._onDragOver(e),Ga(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,a=this.el.children,o=0,s=a.length,i=this.options;o<s;o++)t=a[o],ve(t,i.draggable,this.el,!1)&&e.push(t.getAttribute(i.dataIdAttr)||Ba(t));return e},sort:function(e,t){var a={},o=this.el;this.toArray().forEach(function(s,i){var l=o.children[i];ve(l,this.options.draggable,o,!1)&&(a[s]=l)},this),t&&this.captureAnimationState(),e.forEach(function(s){a[s]&&(o.removeChild(a[s]),o.appendChild(a[s]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return ve(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var a=this.options;if(t===void 0)return a[e];var o=Qe.modifyOption(this,e,t);typeof o<"u"?a[e]=o:a[e]=t,e==="group"&&Sn(a)},destroy:function(){le("destroy",this);var e=this.el;e[ce]=null,z(e,"mousedown",this._onTapStart),z(e,"touchstart",this._onTapStart),z(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(z(e,"dragover",this),z(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),vt.splice(vt.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Te){if(le("hideClone",this),P.eventCanceled)return;M(X,"display","none"),this.options.removeCloneOnHide&&X.parentNode&&X.parentNode.removeChild(X),Te=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Te){if(le("showClone",this),P.eventCanceled)return;k.parentNode==Y&&!this.options.group.revertClone?Y.insertBefore(X,k):Pe?Y.insertBefore(X,Pe):Y.appendChild(X),this.options.group.revertClone&&this.animate(k,X),M(X,"display",""),Te=!1}}};function Ga(n){n.dataTransfer&&(n.dataTransfer.dropEffect="move"),n.cancelable&&n.preventDefault()}function st(n,e,t,a,o,s,i,l){var c,u=n[ce],m=u.options.onMove,b;return window.CustomEvent&&!ke&&!Ke?c=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(c=document.createEvent("Event"),c.initEvent("move",!0,!0)),c.to=e,c.from=n,c.dragged=t,c.draggedRect=a,c.related=o||e,c.relatedRect=s||Q(e),c.willInsertAfter=l,c.originalEvent=i,n.dispatchEvent(c),m&&(b=m.call(u,c,i)),b}function Et(n){n.draggable=!1}function za(){Rt=!1}function La(n,e,t){var a=Q(Ue(t.el,0,t.options,!0)),o=10;return e?n.clientX<a.left-o||n.clientY<a.top&&n.clientX<a.right:n.clientY<a.top-o||n.clientY<a.bottom&&n.clientX<a.left}function Ua(n,e,t){var a=Q(Vt(t.el,t.options.draggable)),o=10;return e?n.clientX>a.right+o||n.clientX<=a.right&&n.clientY>a.bottom&&n.clientX>=a.left:n.clientX>a.right&&n.clientY>a.top||n.clientX<=a.right&&n.clientY>a.bottom+o}function ja(n,e,t,a,o,s,i,l){var c=a?n.clientY:n.clientX,u=a?t.height:t.width,m=a?t.top:t.left,b=a?t.bottom:t.right,E=!1;if(!i){if(l&&ut<u*o){if(!Xe&&(Ze===1?c>m+u*s/2:c<b-u*s/2)&&(Xe=!0),Xe)E=!0;else if(Ze===1?c<m+ut:c>b-ut)return-Ze}else if(c>m+u*(1-o)/2&&c<b-u*(1-o)/2)return Ha(e)}return E=E||i,E&&(c<m+u*s/2||c>b-u*s/2)?c>m+u/2?1:-1:0}function Ha(n){return he(k)<he(n)?1:-1}function Ba(n){for(var e=n.tagName+n.className+n.src+n.href+n.textContent,t=e.length,a=0;t--;)a+=e.charCodeAt(t);return a.toString(36)}function Va(n){bt.length=0;for(var e=n.getElementsByTagName("input"),t=e.length;t--;){var a=e[t];a.checked&&bt.push(a)}}function ct(n){return setTimeout(n,0)}function Gt(n){return clearTimeout(n)}_t&&j(document,"touchmove",function(n){(P.active||Ge)&&n.cancelable&&n.preventDefault()});P.utils={on:j,off:z,css:M,find:wn,is:function(e,t){return!!ve(e,t,e,!1)},extend:Ta,throttle:yn,closest:ve,toggleClass:de,clone:xn,index:he,nextTick:ct,cancelNextTick:Gt,detectDirection:Cn,getChild:Ue};P.get=function(n){return n[ce]};P.mount=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(a){if(!a.prototype||!a.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(a));a.utils&&(P.utils=we(we({},P.utils),a.utils)),Qe.mount(a)})};P.create=function(n,e){return new P(n,e)};P.version=xa;var K=[],Be,zt,Lt=!1,It,At,wt,Ve;function Fa(){function n(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return n.prototype={dragStarted:function(t){var a=t.originalEvent;this.sortable.nativeDraggable?j(document,"dragover",this._handleAutoScroll):this.options.supportPointer?j(document,"pointermove",this._handleFallbackAutoScroll):a.touches?j(document,"touchmove",this._handleFallbackAutoScroll):j(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var a=t.originalEvent;!this.options.dragOverBubble&&!a.rootEl&&this._handleAutoScroll(a)},drop:function(){this.sortable.nativeDraggable?z(document,"dragover",this._handleAutoScroll):(z(document,"pointermove",this._handleFallbackAutoScroll),z(document,"touchmove",this._handleFallbackAutoScroll),z(document,"mousemove",this._handleFallbackAutoScroll)),ln(),ht(),Da()},nulling:function(){wt=zt=Be=Lt=Ve=It=At=null,K.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,a){var o=this,s=(t.touches?t.touches[0]:t).clientX,i=(t.touches?t.touches[0]:t).clientY,l=document.elementFromPoint(s,i);if(wt=t,a||this.options.forceAutoScrollFallback||Ke||ke||Fe){Mt(t,this.options,l,a);var c=De(l,!0);Lt&&(!Ve||s!==It||i!==At)&&(Ve&&ln(),Ve=setInterval(function(){var u=De(document.elementFromPoint(s,i),!0);u!==c&&(c=u,ht()),Mt(t,o.options,u,a)},10),It=s,At=i)}else{if(!this.options.bubbleScroll||De(l,!0)===be()){ht();return}Mt(t,this.options,De(l,!1),!1)}}},xe(n,{pluginName:"scroll",initializeByDefault:!0})}function ht(){K.forEach(function(n){clearInterval(n.pid)}),K=[]}function ln(){clearInterval(Ve)}var Mt=yn(function(n,e,t,a){if(!!e.scroll){var o=(n.touches?n.touches[0]:n).clientX,s=(n.touches?n.touches[0]:n).clientY,i=e.scrollSensitivity,l=e.scrollSpeed,c=be(),u=!1,m;zt!==t&&(zt=t,ht(),Be=e.scroll,m=e.scrollFn,Be===!0&&(Be=De(t,!0)));var b=0,E=Be;do{var I=E,$=Q(I),p=$.top,g=$.bottom,x=$.left,v=$.right,y=$.width,C=$.height,_=void 0,A=void 0,G=I.scrollWidth,q=I.scrollHeight,H=M(I),ae=I.scrollLeft,oe=I.scrollTop;I===c?(_=y<G&&(H.overflowX==="auto"||H.overflowX==="scroll"||H.overflowX==="visible"),A=C<q&&(H.overflowY==="auto"||H.overflowY==="scroll"||H.overflowY==="visible")):(_=y<G&&(H.overflowX==="auto"||H.overflowX==="scroll"),A=C<q&&(H.overflowY==="auto"||H.overflowY==="scroll"));var fe=_&&(Math.abs(v-o)<=i&&ae+y<G)-(Math.abs(x-o)<=i&&!!ae),J=A&&(Math.abs(g-s)<=i&&oe+C<q)-(Math.abs(p-s)<=i&&!!oe);if(!K[b])for(var pe=0;pe<=b;pe++)K[pe]||(K[pe]={});(K[b].vx!=fe||K[b].vy!=J||K[b].el!==I)&&(K[b].el=I,K[b].vx=fe,K[b].vy=J,clearInterval(K[b].pid),(fe!=0||J!=0)&&(u=!0,K[b].pid=setInterval(function(){a&&this.layer===0&&P.active._onTouchMove(wt);var Ie=K[this.layer].vy?K[this.layer].vy*l:0,Ce=K[this.layer].vx?K[this.layer].vx*l:0;typeof m=="function"&&m.call(P.dragged.parentNode[ce],Ce,Ie,n,wt,K[this.layer].el)!=="continue"||_n(K[this.layer].el,Ce,Ie)}.bind({layer:b}),24))),b++}while(e.bubbleScroll&&E!==c&&(E=De(E,!1)));Lt=u}},30),$n=function(e){var t=e.originalEvent,a=e.putSortable,o=e.dragEl,s=e.activeSortable,i=e.dispatchSortableEvent,l=e.hideGhostForTarget,c=e.unhideGhostForTarget;if(!!t){var u=a||s;l();var m=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,b=document.elementFromPoint(m.clientX,m.clientY);c(),u&&!u.el.contains(b)&&(i("spill"),this.onSpill({dragEl:o,putSortable:a}))}};function Ft(){}Ft.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,a=e.putSortable;this.sortable.captureAnimationState(),a&&a.captureAnimationState();var o=Ue(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(t,o):this.sortable.el.appendChild(t),this.sortable.animateAll(),a&&a.animateAll()},drop:$n};xe(Ft,{pluginName:"revertOnSpill"});function Yt(){}Yt.prototype={onSpill:function(e){var t=e.dragEl,a=e.putSortable,o=a||this.sortable;o.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),o.animateAll()},drop:$n};xe(Yt,{pluginName:"removeOnSpill"});P.mount(new Fa);P.mount(Yt,Ft);function Ya(){return typeof window<"u"?window.console:global.console}const Wa=Ya();function Za(n){const e=Object.create(null);return function(a){return e[a]||(e[a]=n(a))}}const Xa=/-(\w)/g,dn=Za(n=>n.replace(Xa,(e,t)=>t?t.toUpperCase():""));function Pt(n){n.parentElement!==null&&n.parentElement.removeChild(n)}function un(n,e,t){const a=t===0?n.children[0]:n.children[t-1].nextSibling;n.insertBefore(e,a)}function qa(n,e){return Object.values(n).indexOf(e)}function Ja(n,e,t,a){if(!n)return[];const o=Object.values(n),s=e.length-a;return[...e].map((l,c)=>c>=s?o.length:o.indexOf(l))}function En(n,e){this.$nextTick(()=>this.$emit(n.toLowerCase(),e))}function Ka(n){return e=>{this.realList!==null&&this["onDrag"+n](e),En.call(this,n,e)}}function Qa(n){return["transition-group","TransitionGroup"].includes(n)}function eo(n){if(!n||n.length!==1)return!1;const[{type:e}]=n;return e?Qa(e.name):!1}function to(n,e){return e?{...e.props,...e.attrs}:n}const Ut=["Start","Add","Remove","Update","End"],jt=["Choose","Unchoose","Sort","Filter","Clone"],no=["Move",...Ut,...jt].map(n=>"on"+n);let Ot=null;const ao={options:Object,list:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:n=>n},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null},component:{type:String,default:null},modelValue:{type:Array,required:!1,default:null}},oo=se({name:"VueDraggableNext",inheritAttrs:!1,emits:["update:modelValue","move","change",...Ut.map(n=>n.toLowerCase()),...jt.map(n=>n.toLowerCase())],props:ao,data(){return{transitionMode:!1,noneFunctionalComponentMode:!1,headerOffset:0,footerOffset:0,_sortable:{},visibleIndexes:[],context:{}}},render(){const n=this.$slots.default?this.$slots.default():null,e=to(this.$attrs,this.componentData);return n?(this.transitionMode=eo(n),Xt(this.getTag(),e,n)):Xt(this.getTag(),e,[])},created(){this.list!==null&&this.modelValue!==null&&Wa.error("list props are mutually exclusive! Please set one.")},mounted(){const n={};Ut.forEach(o=>{n["on"+o]=Ka.call(this,o)}),jt.forEach(o=>{n["on"+o]=En.bind(this,o)});const e=Object.keys(this.$attrs).reduce((o,s)=>(o[dn(s)]=this.$attrs[s],o),{}),t=Object.assign({},e,n,{onMove:(o,s)=>this.onDragMove(o,s)});!("draggable"in t)&&(t.draggable=">*");const a=this.$el.nodeType===1?this.$el:this.$el.parentElement;this._sortable=new P(a,t),a.__draggable_component__=this,this.computeIndexes()},beforeUnmount(){try{this._sortable!==void 0&&this._sortable.destroy()}catch{}},computed:{realList(){return this.list?this.list:this.modelValue}},watch:{$attrs:{handler(n){this.updateOptions(n)},deep:!0},realList(){this.computeIndexes()}},methods:{getTag(){return this.component?qe(this.component):this.tag},updateOptions(n){for(var e in n){const t=dn(e);no.indexOf(t)===-1&&this._sortable.option(t,n[e])}},getChildrenNodes(){return this.$el.children},computeIndexes(){this.$nextTick(()=>{this.visibleIndexes=Ja(this.getChildrenNodes(),this.$el.children,this.transitionMode,this.footerOffset)})},getUnderlyingVm(n){const e=qa(this.getChildrenNodes()||[],n);if(e===-1)return null;const t=this.realList[e];return{index:e,element:t}},emitChanges(n){this.$nextTick(()=>{this.$emit("change",n)})},alterList(n){if(this.list){n(this.list);return}const e=[...this.modelValue];n(e),this.$emit("update:modelValue",e)},spliceList(){const n=e=>e.splice(...arguments);this.alterList(n)},updatePosition(n,e){const t=a=>a.splice(e,0,a.splice(n,1)[0]);this.alterList(t)},getVmIndex(n){const e=this.visibleIndexes,t=e.length;return n>t-1?t:e[n]},getComponent(){return this.$slots.default?this.$slots.default()[0].componentInstance:null},resetTransitionData(n){if(!this.noTransitionOnDrag||!this.transitionMode)return;var e=this.getChildrenNodes();e[n].data=null;const t=this.getComponent();t.children=[],t.kept=void 0},onDragStart(n){this.context=this.getUnderlyingVm(n.item),this.context&&(n.item._underlying_vm_=this.clone(this.context.element),Ot=n.item)},onDragAdd(n){const e=n.item._underlying_vm_;if(e===void 0)return;Pt(n.item);const t=this.getVmIndex(n.newIndex);this.spliceList(t,0,e),this.computeIndexes();const a={element:e,newIndex:t};this.emitChanges({added:a})},onDragRemove(n){if(un(this.$el,n.item,n.oldIndex),n.pullMode==="clone"){Pt(n.clone);return}if(!this.context)return;const e=this.context.index;this.spliceList(e,1);const t={element:this.context.element,oldIndex:e};this.resetTransitionData(e),this.emitChanges({removed:t})},onDragUpdate(n){Pt(n.item),un(n.from,n.item,n.oldIndex);const e=this.context.index,t=this.getVmIndex(n.newIndex);this.updatePosition(e,t);const a={element:this.context.element,oldIndex:e,newIndex:t};this.emitChanges({moved:a})},updateProperty(n,e){n.hasOwnProperty(e)&&(n[e]+=this.headerOffset)},onDragMove(n,e){const t=this.move;if(!t||!this.realList)return!0;const a=this.getRelatedContextFromMoveEvent(n),o=this.context,s=this.computeFutureIndex(a,n);Object.assign(o,{futureIndex:s});const i=Object.assign({},n,{relatedContext:a,draggedContext:o});return t(i,e)},onDragEnd(){this.computeIndexes(),Ot=null},getTrargetedComponent(n){return n.__draggable_component__},getRelatedContextFromMoveEvent({to:n,related:e}){const t=this.getTrargetedComponent(n);if(!t)return{component:t};const a=t.realList,o={list:a,component:t};if(n!==e&&a&&t.getUnderlyingVm){const s=t.getUnderlyingVm(e);if(s)return Object.assign(s,o)}return o},computeFutureIndex(n,e){const t=[...e.to.children].filter(i=>i.style.display!=="none");if(t.length===0)return 0;const a=t.indexOf(e.related),o=n.component.getVmIndex(a);return t.indexOf(Ot)!==-1||!e.willInsertAfter?o:o+1}}});var $e=(n=>(n.POINTS="points",n.TITLE="title",n))($e||{});const it=cn(),Wt=hn("RankStore",{state:()=>({tableHeaders:["Round"],rankPoints:[],tableUsers:[],tableId:167,room:"",form:{newPoints:[{points:0,row:5,table_user:127,type:$e.POINTS}],header:{title:"New Title",row:5,type:$e.TITLE},showStoreForm:!1},testTableUsers:[3124,3125,3126,3127],editRow:null}),getters:{nextRow:n=>n.rankPoints.length},actions:{_fetchRankPoints(){te.emit("getRankTable",{table_id:this.$state.tableId},n=>{this.$state.rankPoints=n})},_store(){const n=[this.$state.form.header,...this.$state.form.newPoints];te.emit("storeRankRow",{data:n,room:this.$state.room,table_id:this.$state.tableId,row:this.nextRow},e=>{e.status===200?this.$state.form.showStoreForm=!1:it.error("Something went wrong")})},_update(n){const e=this.$state.rankPoints.findIndex(a=>a.some(o=>o.row===n)),t=this.$state.rankPoints[e];te.emit("updateRankRow",{data:t,room:this.$state.room,table_id:this.$state.tableId,row:n},a=>{a.status===200?this.$state.editRow=null:it.error("Something went wrong")})},_delete(n){const t=this.$state.rankPoints[n][0].row;te.emit("deleteRankRow",{room:this.$state.room,table_id:this.$state.tableId,row:t},a=>{a.status===200?it.success("Row deleted successfully"):it.error("Something went wrong")})},addNewPoints(){this.$state.form.newPoints=[];const n=this.nextRow;this.$state.tableId&&(this.$state.form.header={title:"Round "+n.toString(),row:n,type:$e.TITLE},this.$state.tableUsers.forEach(e=>{this.$state.form.newPoints.push({points:0,row:n,table_user:e.id,type:$e.POINTS})})),this.$state.form.showStoreForm=!0},addTableUsers(n){this.$state.tableUsers=n.sort((e,t)=>e.id-t.id),this.$state.tableHeaders=["Round"],this.$state.tableUsers.forEach(e=>{e.user.username&&this.$state.tableHeaders.push(e.user.username)}),this._fetchRankPoints()}}}),ro={key:0},so=d("div",{class:"text-2xl underline underline-offset-4 w-full"}," Rank Table ",-1),io={key:0},lo={key:1},uo=["onClick"],co=["onClick"],ho=["onClick"],fo={key:1},po=d("div",{class:"text-2xl underline underline-offset-4 w-full"}," Rank Table ",-1),mo=d("div",{class:"bg-red-500 p-4 my-4 rounded italic"}," The rank table is available when the game start ",-1),go=[po,mo],vo=se({__name:"RankTable",setup(n){const e=Wt();return(t,a)=>r(e).tableHeaders.length>1?(f(),D("div",ro,[w(S,{justify:"between"},{default:h(()=>[so,w(Kt,{title:"Add Points",onClick:a[0]||(a[0]=o=>r(e).addNewPoints()),disable:r(e).form.showStoreForm},null,8,["disable"])]),_:1}),r(e).rankPoints?(f(),O(gn,{key:0,"table-headers":r(e).tableHeaders,class:"border border-gray-700 rounded-lg overflow-y-auto",actions:!0},{default:h(()=>[(f(!0),D(B,null,W(r(e).rankPoints,(o,s)=>(f(),O(Nt,{key:`rankRow-${o}`},{default:h(()=>[(f(!0),D(B,null,W(o,i=>(f(),O(Re,{key:i.id},{default:h(()=>{var l;return[s===r(e).editRow?(f(),D("div",io,[i.title&&i.type===r($e).TITLE?(f(),O(nt,{key:0,input:i.title,onChange:c=>i.title=c,"dark-theme":!0},null,8,["input","onChange"])):(f(),O(nt,{key:1,input:(l=i.points)!=null?l:0,type:"number",onChange:c=>i.points=c,"dark-theme":!0},null,8,["input","onChange"]))])):(f(),D("div",lo,F(i.type===r($e).TITLE?i.title:i.points),1))]}),_:2},1024))),128)),w(Re,null,{default:h(()=>[s===r(e).editRow?(f(),O(S,{key:0},{default:h(()=>[d("div",{class:"text-blue-500 cursor-pointer",onClick:i=>r(e)._update(s)},"Update",8,uo)]),_:2},1024)):(f(),O(S,{key:1,gap:4},{default:h(()=>[d("div",{class:"text-blue-500 cursor-pointer",onClick:i=>r(e).editRow=s},"Edit",8,co),d("div",{class:"text-red-500 cursor-pointer",onClick:i=>r(e)._delete(s)},"Delete",8,ho)]),_:2},1024))]),_:2},1024)]),_:2},1024))),128)),r(e).form.showStoreForm?(f(),O(Nt,{key:0,class:"bg-gray-700"},{default:h(()=>[w(Re,null,{default:h(()=>[w(nt,{input:r(e).form.header.title,onChange:a[1]||(a[1]=o=>r(e).form.header.title=o),placeholder:"Row title e.g. Round 1","dark-theme":!0},null,8,["input"])]),_:1}),(f(!0),D(B,null,W(r(e).form.newPoints,o=>(f(),O(Re,{key:`new-item-${o.table_user}`},{default:h(()=>[w(nt,{input:o.points,type:"number","dark-theme":!0,onChange:s=>o.points=s,placeholder:"Points"},null,8,["input","onChange"])]),_:2},1024))),128)),w(Re,{class:"text-red-500 cursor-pointer",onClick:a[2]||(a[2]=o=>r(e).form.showStoreForm=!1)},{default:h(()=>[L("Cancel ")]),_:1})]),_:1})):U("",!0)]),_:1},8,["table-headers"])):U("",!0),w(S,{justify:"center",class:"mt-8",gap:4},{default:h(()=>[w(Kt,{title:"Save Changes",disable:!r(e).form.showStoreForm,onClick:a[3]||(a[3]=o=>r(e)._store())},null,8,["disable"])]),_:1})])):(f(),D("div",fo,go))}}),ee=n=>(On("data-v-f1c81574"),n=n(),Nn(),n),bo={key:0,class:"bg-dark bg-opacity-90 fixed top-0 left-0 w-full h-full flex justify-center items-center z-[2147483647]"},wo=ee(()=>d("div",{class:"p-4 text-xl text-white"}," Game Master Dashboard ",-1)),yo=["onClick"],_o={class:"container my-10"},xo={key:0},ko=ee(()=>d("div",null," Actions ",-1)),Co={class:"bg-dark-smooth p-4"},So=ee(()=>d("div",{class:"text-2xl text-white mb-4"},"Game Status",-1)),To=ee(()=>d("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 mr-3",viewBox:"0 0 16 16"},[d("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"})],-1)),Do=["disable"],$o=ee(()=>d("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 mr-3",viewBox:"0 0 16 16"},[d("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"})],-1)),Eo=ee(()=>d("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 mr-3",viewBox:"0 0 16 16"},[d("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.5 5A1.5 1.5 0 0 0 5 6.5v3A1.5 1.5 0 0 0 6.5 11h3A1.5 1.5 0 0 0 11 9.5v-3A1.5 1.5 0 0 0 9.5 5h-3z"})],-1)),Io=ee(()=>d("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 mr-3",viewBox:"0 0 16 16"},[d("path",{d:"M1.5 15a.5.5 0 0 0 0 1h13a.5.5 0 0 0 0-1H13V2.5A1.5 1.5 0 0 0 11.5 1H11V.5a.5.5 0 0 0-.57-.495l-7 1A.5.5 0 0 0 3 1.5V15H1.5zM11 2h.5a.5.5 0 0 1 .5.5V15h-1V2zm-2.5 8c-.276 0-.5-.448-.5-1s.224-1 .5-1 .5.448.5 1-.224 1-.5 1z"})],-1)),Ao={class:"bg-dark-smooth p-4 mt-6"},Mo=ee(()=>d("div",{class:"text-2xl text-white mb-4"},"Cards",-1)),Po=ee(()=>d("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 mr-3",viewBox:"0 0 16 16"},[d("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-4.79-2.907L8.5 7.028V5.5a.5.5 0 0 0-.79-.407L5 7.028V5.5a.5.5 0 0 0-1 0v5a.5.5 0 0 0 1 0V8.972l2.71 1.935a.5.5 0 0 0 .79-.407V8.972l2.71 1.935A.5.5 0 0 0 12 10.5v-5a.5.5 0 0 0-.79-.407z"})],-1)),Oo=ee(()=>d("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 mr-3",viewBox:"0 0 16 16"},[d("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM4.79 5.093A.5.5 0 0 0 4 5.5v5a.5.5 0 0 0 .79.407L7.5 8.972V10.5a.5.5 0 0 0 .79.407L11 8.972V10.5a.5.5 0 0 0 1 0v-5a.5.5 0 0 0-1 0v1.528L8.29 5.093a.5.5 0 0 0-.79.407v1.528L4.79 5.093z"})],-1)),No=["disable"],Ro=ee(()=>d("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 mr-3",viewBox:"0 0 16 16"},[d("path",{d:"M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5z"})],-1)),Go=["disable"],zo=ee(()=>d("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 mr-3",viewBox:"0 0 16 16"},[d("path",{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16ZM7.729 5.055A.5.5 0 0 1 8 5.5v1.886l3.21-2.293A.5.5 0 0 1 12 5.5v5a.5.5 0 0 1-.79.407L8 8.614V10.5a.5.5 0 0 1-.79.407l-3.5-2.5a.5.5 0 0 1 0-.814l3.5-2.5a.5.5 0 0 1 .519-.038Z"})],-1)),Lo=["disable"],Uo=ee(()=>d("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6 mr-3",viewBox:"0 0 16 16"},[d("path",{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16ZM4.79 5.093 8 7.386V5.5a.5.5 0 0 1 .79-.407l3.5 2.5a.5.5 0 0 1 0 .814l-3.5 2.5A.5.5 0 0 1 8 10.5V8.614l-3.21 2.293A.5.5 0 0 1 4 10.5v-5a.5.5 0 0 1 .79-.407Z"})],-1)),jo={key:1},Ho=ee(()=>d("div",{class:"w-1/6"},"Turn",-1)),Bo=ee(()=>d("div",{class:"w-1/6"},"Name",-1)),Vo=ee(()=>d("div",{class:"w-1/6"},"Team",-1)),Fo=ee(()=>d("div",{class:"w-1/6"},"Status",-1)),Yo=ee(()=>d("div",{class:"w-1/6"},"Role",-1)),Wo=ee(()=>d("div",{class:"w-1/6"},"Actions",-1)),Zo={class:"w-1/6"},Xo={class:"w-1/6"},qo={class:"w-1/6"},Jo={class:"w-1/6"},Ko={class:"w-1/6"},Qo={class:"w-1/6 text-red-500 cursor-pointer hover:text-red-600 transition duration-300 text-lg"},er=["onClick"],tr={key:2},nr=se({__name:"ModalFullPage",props:{modalOpen:{type:Boolean},tableUsers:{type:Array,required:!0},table:{type:Object},tableStatus:{type:Object},menuTab:{type:Number,default:1}},emits:["closeModal","updateTurnTableUsers","updateRole","updateStatus","updateTeam","stopGame","leaveGame","newGame","updateTableGameStatus","showAllCards","removePlayer","setNextPlayer"],setup(n,{emit:e}){const t=n,a=V(!0),o=V(null),s=V([{id:1,name:"Game"},{id:2,name:"Players"},{id:3,name:"Rank Table"}]),i=V(1),l=c=>{e("updateTurnTableUsers")};return Bn(o,()=>{e("closeModal")}),Je(()=>t.menuTab,()=>{i.value=t.menuTab}),(c,u)=>(f(),O(Pn,{name:"modal"},{default:h(()=>[n.modalOpen?(f(),D("div",bo,[d("div",{class:"bg-dark relative rounded-sm shadow h-full w-full",ref_key:"modal",ref:o},[w(S,{class:"border-b-2 px-8",justify:"between",items:"center"},{default:h(()=>[wo,d("button",{class:"cursor-pointer border h-10 w-10 border-transparent rounded-3xl px-2 transition duration-300 text-lg text-white hover:text-primary hover:bg-white",onClick:u[0]||(u[0]=m=>c.$emit("closeModal"))}," x ")]),_:1}),w(S,{class:"h-full text-white"},{default:h(()=>[w(S,{class:"border-r w-60 p-4",column:!0,gap:2},{default:h(()=>[(f(!0),D(B,null,W(s.value,m=>(f(),D("div",{key:m.id,class:N(["px-4 py-3 hover:bg-primary rounded-lg border-gray-500 border cursor-pointer hover:border-primary transition duration-300 text-lg",i.value===m.id?"bg-primary":"bg-transparent"]),onClick:b=>i.value=m.id},F(m.name),11,yo))),128))]),_:1}),w(S,{class:"w-full overflow-x-auto"},{default:h(()=>[d("div",_o,[i.value===1?(f(),D("div",xo,[w(S,{class:"text-2xl underline underline-offset-4 mb-6 w-full",justify:"between"},{default:h(()=>[ko,d("div",null,[w(Hn,{title:"Close settings on click an action",input:a.value,onChange:u[1]||(u[1]=m=>a.value=m)},null,8,["input"])])]),_:1}),d("div",Co,[So,w(S,{class:"w-full text-center cursor-pointer",gap:8},{default:h(()=>{var m,b,E,I;return[d("button",{onClick:u[2]||(u[2]=$=>{c.$emit("newGame"),a.value&&e("closeModal")}),class:"p-3 w-1/4 transition duration-300 text-lg bg-primary rounded-3xl text-white hover:bg-dark-smooth border border-primary"},[w(S,{justify:"center",items:"center"},{default:h(()=>[To,L(" New Game ")]),_:1})]),d("button",{class:N(["p-3 w-1/4 transition duration-300 text-lg bg-primary rounded-3xl text-white hover:bg-dark-smooth border border-primary",((m=n.tableStatus)==null?void 0:m.status)===r(T).WAITING||((b=n.tableStatus)==null?void 0:b.status)===r(T).FINISH?"cursor-not-allowed":""]),disable:((E=n.tableStatus)==null?void 0:E.status)===r(T).WAITING||((I=n.tableStatus)==null?void 0:I.status)===r(T).FINISH,onClick:u[3]||(u[3]=$=>{var p;((p=n.tableStatus)==null?void 0:p.status)===r(T).PLAYING?c.$emit("updateTableGameStatus",r(T).PAUSE):c.$emit("updateTableGameStatus",r(T).PLAYING),a.value&&e("closeModal")})},[w(S,{justify:"center",items:"center"},{default:h(()=>{var $;return[$o,L(" "+F((($=n.tableStatus)==null?void 0:$.status)===r(T).PAUSE?"Resume Game":"Pause Game"),1)]}),_:1})],10,Do),d("button",{onClick:u[4]||(u[4]=$=>{c.$emit("stopGame"),a.value&&e("closeModal")}),class:"p-3 w-1/4 transition duration-300 text-lg bg-primary rounded-3xl text-white hover:bg-dark-smooth border border-primary"},[w(S,{justify:"center",items:"center"},{default:h(()=>[Eo,L(" End Game ")]),_:1})]),d("button",{class:"p-3 w-1/4 transition duration-300 text-lg bg-primary rounded-3xl text-white hover:bg-dark-smooth border border-primary",onClick:u[5]||(u[5]=$=>c.$emit("leaveGame"))},[w(S,{justify:"center",items:"center"},{default:h(()=>[Io,L(" Leave Game ")]),_:1})])]}),_:1})]),d("div",Ao,[Mo,w(S,{class:"w-full text-center cursor-pointer",gap:8},{default:h(()=>{var m,b,E,I,$,p;return[d("div",{class:"p-3 transition duration-300 text-lg w-1/3 bg-primary rounded-3xl text-white hover:bg-dark-smooth border border-primary",onClick:u[6]||(u[6]=g=>c.$emit("setNextPlayer",!1))},[w(S,{justify:"center",items:"center"},{default:h(()=>[Po,L(" Previous Player ")]),_:1})]),d("div",{class:"p-3 transition duration-300 text-lg w-1/3 bg-primary rounded-3xl text-white hover:bg-dark-smooth border border-primary",onClick:u[7]||(u[7]=g=>c.$emit("setNextPlayer",!0))},[w(S,{justify:"center",items:"center"},{default:h(()=>[Oo,L(" Next Player ")]),_:1})]),d("div",{onClick:u[8]||(u[8]=g=>{c.$emit("showAllCards"),a.value&&e("closeModal")}),class:N(["p-3 transition duration-300 text-lg w-1/3 bg-primary rounded-3xl text-white hover:bg-dark-smooth border border-primary",((m=n.tableStatus)==null?void 0:m.status)===r(T).WAITING?"cursor-not-allowed":""]),disable:((b=n.tableStatus)==null?void 0:b.status)===r(T).WAITING},[w(S,{justify:"center",items:"center"},{default:h(()=>[Ro,L(" Show all cards ")]),_:1})],10,No),d("div",{class:N(["p-3 transition duration-300 text-lg w-1/3 bg-primary rounded-3xl text-white hover:bg-dark-smooth border border-primary",((E=n.tableStatus)==null?void 0:E.status)===r(T).WAITING?"cursor-not-allowed":""]),disable:((I=n.tableStatus)==null?void 0:I.status)===r(T).WAITING},[w(S,{justify:"center",items:"center"},{default:h(()=>[zo,L(" Undo ")]),_:1})],10,Go),d("div",{class:N(["p-3 transition duration-300 text-lg w-1/3 bg-primary rounded-3xl text-white hover:bg-dark-smooth border border-primary",(($=n.tableStatus)==null?void 0:$.status)===r(T).WAITING?"cursor-not-allowed":""]),disable:((p=n.tableStatus)==null?void 0:p.status)===r(T).WAITING},[w(S,{justify:"center",items:"center"},{default:h(()=>[Uo,L(" Redo ")]),_:1})],10,Lo)]}),_:1})])])):U("",!0),i.value===2?(f(),D("div",jo,[w(S,{disabled:"",class:"list-group-item bg-dark-smooth m-1 p-3 rounded-md text-center border border-primary mb-6",justify:"center"},{default:h(()=>[Ho,Bo,Vo,Fo,Yo,Wo]),_:1}),w(S,{class:"w-full"},{default:h(()=>[n.tableUsers?(f(),O(r(oo),{key:0,class:"dragArea list-group w-full",list:n.tableUsers,onChange:l,disabled:!1,group:{name:"people"},"ghost-class":"ghost"},{default:h(()=>[w(Mn,null,{default:h(()=>[(f(!0),D(B,null,W(n.tableUsers,m=>(f(),O(S,{items:"center",gap:8,class:"list-group-item bg-dark-smooth m-1 p-3 rounded-md text-center mb-3",key:m.id},{default:h(()=>{var b,E,I,$,p,g,x,v,y,C,_,A;return[d("div",Zo,F(m.turn),1),d("div",Xo,F(m.user.username),1),d("div",qo,[w(kt,{options:(E=(b=n.table)==null?void 0:b.game)==null?void 0:E.teams,dark:!0,input:(I=m.team)!=null&&I.id?{value:($=m.team)==null?void 0:$.id}:null,onUpdate:G=>c.$emit("updateTeam",G,m)},null,8,["options","input","onUpdate"])]),d("div",Jo,[w(kt,{options:(g=(p=n.table)==null?void 0:p.game)==null?void 0:g.status,dark:!0,input:(x=m.status)!=null&&x.id?{value:(v=m.status)==null?void 0:v.id}:null,onUpdate:G=>c.$emit("updateStatus",G,m)},null,8,["options","input","onUpdate"])]),d("div",Ko,[w(kt,{options:(C=(y=n.table)==null?void 0:y.game)==null?void 0:C.roles,dark:!0,input:(_=m.role)!=null&&_.id?{value:(A=m.role)==null?void 0:A.id}:null,onUpdate:G=>c.$emit("updateRole",G,m)},null,8,["options","input","onUpdate"])]),d("div",Qo,[d("button",{onClick:G=>c.$emit("removePlayer",m.user.id)},"Remove User",8,er)])]}),_:2},1024))),128))]),_:1})]),_:1},8,["list"])):U("",!0)]),_:1})])):U("",!0),i.value===3?(f(),D("div",tr,[w(vo)])):U("",!0)])]),_:1})]),_:1})],512)])):U("",!0)]),_:1}))}});const ar=Fn(nr,[["__scopeId","data-v-f1c81574"]]),or=se({__name:"GameUserItem",props:{playing:{type:Boolean,default:!1}},setup(n){return(e,t)=>(f(),D("div",{class:N(["px-4 py-3 rounded-lg hover:border-primary transition duration-300",n.playing?"bg-primary":"bg-dark-smooth"])},[Rn(e.$slots,"default")],2))}}),Ht="/assets/close-card.89ac7cbb.png",rr=d("div",{class:"text-2xl border-b border-primary pb-2"},"Users",-1),sr={class:"w-3/6"},ir=d("img",{src:Yn,alt:"cards",srcset:""},null,-1),lr=["onClick"],dr=d("path",{d:"M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"},null,-1),ur=[dr],cr={key:1,class:"p-2 mt-2 shadow-2xl rounded-xl border-dashed border"},hr=d("div",{class:"w-2/6"},"Team:",-1),fr=d("div",{class:"w-2/6"},"Role:",-1),pr=d("div",{class:"w-2/6"},"Status:",-1),mr={key:2,class:"mt-4"},gr=["src"],vr=se({__name:"SidebarGame",setup(n){const e=Ee(),t=V([]),a=s=>t.value.indexOf(s)!==-1,o=s=>{t.value.indexOf(s)!==-1?t.value=t.value.filter(i=>i!==s):t.value.push(s)};return Je(()=>e.table,()=>{var s,i,l;((s=e.table)==null?void 0:s.status)!==T.WAITING&&(t.value=[],(l=(i=e.table)==null?void 0:i.table_users)==null||l.forEach(c=>{t.value.push(c.id)}))}),(s,i)=>{const l=qe("RouterLink");return f(),O(S,{class:"border-l w-72 p-4 h-full bg-dark text-white",column:!0,gap:2},{default:h(()=>[w(S,{column:!0,justify:"between",class:"h-[96%]"},{default:h(()=>{var c;return[d("div",null,[rr,(f(!0),D(B,null,W((c=r(e).table)==null?void 0:c.table_users,(u,m)=>(f(),O(or,{key:m,class:"mt-3 w-2xl bg-primary",playing:u.playing},{default:h(()=>{var b,E,I,$,p,g,x,v;return[w(S,{items:"center",justify:r(e).cards?"center":"between",gap:2},{default:h(()=>{var y,C,_,A;return[d("div",sr,F((y=u.user)==null?void 0:y.username),1),r(e).cards?(f(),O(S,{key:0,gap:2,class:"w-2/6"},{default:h(()=>{var G;return[ir,d("div",null,F((G=r(e).getCards(r(e).getTableDeckIdOfUser(u.user.id)))==null?void 0:G.length),1)]}),_:2},1024)):U("",!0),((C=u.team)==null?void 0:C.name)||((_=u.role)==null?void 0:_.name)||((A=u.status)==null?void 0:A.name)||r(e).cards?(f(),D("div",{key:1,class:"w-1/6 cursor-pointer group",onClick:G=>o(u.id)},[(f(),D("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:N(["group-hover:text-primary duration-300 transition",a(u.id)?"rotate-0":"rotate-180"]),viewBox:"0 0 16 16"},ur,2))],8,lr)):U("",!0)]}),_:2},1032,["justify"]),((E=(b=r(e).table)==null?void 0:b.game_master)==null?void 0:E.id)===u.user.id?(f(),D("div",{key:0,class:N(["italic font-bold",r(e).table.game_master.id===u.user.id&&u.playing?"text-dark":"text-primary"])},"Game Master",2)):U("",!0),a(u.id)&&(((I=u.team)==null?void 0:I.name)||(($=u.role)==null?void 0:$.name)||((p=u.status)==null?void 0:p.name))?(f(),D("div",cr,[(g=u.team)!=null&&g.name?(f(),O(S,{key:0},{default:h(()=>{var y,C;return[hr,d("div",null,F((y=u.team)!=null&&y.name?(C=u.team)==null?void 0:C.name:"none"),1)]}),_:2},1024)):U("",!0),(x=u.role)!=null&&x.name?(f(),O(S,{key:1},{default:h(()=>{var y,C;return[fr,d("div",null,F((y=u.role)!=null&&y.name?(C=u.role)==null?void 0:C.name:"none"),1)]}),_:2},1024)):U("",!0),(v=u.status)!=null&&v.name?(f(),O(S,{key:2},{default:h(()=>{var y,C;return[pr,d("div",null,F((y=u.status)!=null&&y.name?(C=u.status)==null?void 0:C.name:"none"),1)]}),_:2},1024)):U("",!0)])):U("",!0),r(e).cards&&a(u.id)?(f(),D("div",mr,[w(S,{gap:2,class:"flex-wrap",justify:"start"},{default:h(()=>[(f(!0),D(B,null,W(r(e).getCards(r(e).getTableDeckIdOfUser(u.user.id)),(y,C)=>(f(),D("img",{src:y.hidden?r(Ht):r(pt)(y.card.image),alt:"",srcset:"",key:`user-card-${C}`,class:"w-10 h-12"},null,8,gr))),128))]),_:2},1024)])):U("",!0)]}),_:2},1032,["playing"]))),128))]),w(S,{justify:"center"},{default:h(()=>[w(l,{to:{name:"lobby"}},{default:h(()=>[w(Wn,{title:"Leave Game"})]),_:1})]),_:1})]}),_:1})]),_:1})}}}),br=["id"],wr={class:"relative w-full h-full"},yr=["src"],_r={key:0,class:"absolute top-[27.5px] left-[13.5px] text-black"},xr=d("svg",{width:"16",height:"16",fill:"currentColor",class:"w-5 h-5",viewBox:"0 0 16 16"},[d("path",{d:"M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0z"}),d("path",{d:"M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8zm8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7z"})],-1),kr=[xr],ft=se({__name:"DraggableCard",props:{card:{type:Object,required:!0},absolute:{type:Boolean,default:!0},hiddenCards:{type:Boolean,default:!1},rotate:{type:Boolean,default:!1},showCards:{type:Boolean,default:!1},playerDeck:{type:Boolean,default:!1}},emits:["onDragStart"],setup(n,{emit:e}){const t=n,a=Ee(),o=V(null),s=l=>{switch(l){case tt.ZERO:return"";case tt.NINETY:return" rotate-90";case tt.ONE_EIGHTY:return" rotate-180";case tt.TWO_SEVENTY:return" -rotate-90";default:return""}},i=l=>t.hiddenCards?Ht:t.showCards?pt(l.card.image):l.hidden?Ht:pt(l.card.image);return yt(()=>{t.card&&o.value&&(o.value.style.top=`${t.card.position_x}px`,o.value.style.left=`${t.card.position_y}px`,o.value.style.zIndex=`${t.card.z_index}`)}),Je([()=>t.card.position_x,()=>t.card.position_y,()=>t.card.z_index],([l,c],[u,m])=>{o.value&&(o.value.style.top=`${t.card.position_x}px`,o.value.style.left=`${t.card.position_y}px`,o.value.style.zIndex=t.card.z_index.toString())}),(l,c)=>(f(),D("div",{ref_key:"cardRef",ref:o,id:n.card.id.toString(),class:N(["card-box cursor-pointer",[n.absolute?"absolute":"",n.rotate?s(n.card.rotate):""]]),onClick:c[0]||(c[0]=u=>r(a).clickCardId===n.card.id?r(a).clickCardId=null:r(a).clickCardId=n.card.id),onDragstart:c[1]||(c[1]=u=>l.$emit("onDragStart",u,o.value)),draggable:"true"},[d("div",wr,[d("img",{ref_key:"cardRef",ref:o,src:i(n.card),class:N(["card-box",[n.playerDeck?n.card.hidden?"":"opacity-50":"",r(a).clickCardId===n.card.id?"border-2 border-red-500":"hover:border hover:border-dark"]])},null,10,yr),n.playerDeck&&!n.card.hidden?(f(),D("div",_r,kr)):U("",!0)])],42,br))}}),Cr={class:"text-sm"},Sr=se({__name:"TableDecks",props:{deck:{type:Object,required:!0}},emits:["deckCreate","onDrop","onDragLeave","onDragEnter","onDragStart"],setup(n,{emit:e}){const t=V(null);return yt(()=>{t.value&&e("deckCreate",t.value)}),(a,o)=>(f(),O(S,{gap:4,class:"my-2 mx-8"},{default:h(()=>[w(S,{column:!0,items:"center",gap:1},{default:h(()=>{var s;return[d("div",{class:N(["relative card-box dropZone",(s=n.deck.cards)!=null&&s.length?"":"border"]),ref_key:"deckReference",ref:t,onDrop:o[0]||(o[0]=i=>a.$emit("onDrop",i,n.deck.tableDeckId)),onDragover:o[1]||(o[1]=ye(()=>{},["prevent"])),onDragleave:o[2]||(o[2]=i=>a.$emit("onDragLeave",i)),onDragenter:o[3]||(o[3]=ye(i=>a.$emit("onDragEnter",i),["prevent"]))},[(f(!0),D(B,null,W(n.deck.cards,(i,l)=>(f(),O(ft,{card:i,key:l,onOnDragStart:(c,u)=>a.$emit("onDragStart",c,u,i),"hidden-cards":n.deck.deckType===r(Zn).DECK},null,8,["card","onOnDragStart","hidden-cards"]))),128))],34),d("div",Cr,F(n.deck.deckName),1)]}),_:1})]),_:1}))}}),Tr=d("div",{class:"py-3 pr-4 border-r cursor-pointer"},[d("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6",viewBox:"0 0 16 16"},[d("path",{"fill-rule":"evenodd",d:"M7.646.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 1.707V5.5a.5.5 0 0 1-1 0V1.707L6.354 2.854a.5.5 0 1 1-.708-.708l2-2zM8 10a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 0 1 .708-.708L7.5 14.293V10.5A.5.5 0 0 1 8 10zM.146 8.354a.5.5 0 0 1 0-.708l2-2a.5.5 0 1 1 .708.708L1.707 7.5H5.5a.5.5 0 0 1 0 1H1.707l1.147 1.146a.5.5 0 0 1-.708.708l-2-2zM10 8a.5.5 0 0 1 .5-.5h3.793l-1.147-1.146a.5.5 0 0 1 .708-.708l2 2a.5.5 0 0 1 0 .708l-2 2a.5.5 0 0 1-.708-.708L14.293 8.5H10.5A.5.5 0 0 1 10 8z"})])],-1),Dr={class:"py-1"},$r=d("path",{d:"m10.79 12.912-1.614-1.615a3.5 3.5 0 0 1-4.474-4.474l-2.06-2.06C.938 6.278 0 8 0 8s3 5.5 8 5.5a7.029 7.029 0 0 0 2.79-.588zM5.21 3.088A7.028 7.028 0 0 1 8 2.5c5 0 8 5.5 8 5.5s-.939 1.721-2.641 3.238l-2.062-2.062a3.5 3.5 0 0 0-4.474-4.474L5.21 3.089z"},null,-1),Er=d("path",{d:"M5.525 7.646a2.5 2.5 0 0 0 2.829 2.829l-2.83-2.829zm4.95.708-2.829-2.83a2.5 2.5 0 0 1 2.829 2.829zm3.171 6-12-12 .708-.708 12 12-.708.708z"},null,-1),Ir=[$r,Er],Ar=d("path",{d:"M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0z"},null,-1),Mr=d("path",{d:"M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8zm8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7z"},null,-1),Pr=[Ar,Mr],Or={class:"py-1"},Nr=d("path",{"fill-rule":"evenodd",d:"M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"},null,-1),Rr=d("path",{d:"M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"},null,-1),Gr=[Nr,Rr],zr={class:"py-1"},Lr=d("path",{"fill-rule":"evenodd",d:"M8 3a5 5 0 1 1-4.546 2.914.5.5 0 0 0-.908-.417A6 6 0 1 0 8 2v1z"},null,-1),Ur=d("path",{d:"M8 4.466V.534a.25.25 0 0 0-.41-.192L5.23 2.308a.25.25 0 0 0 0 .384l2.36 1.966A.25.25 0 0 0 8 4.466z"},null,-1),jr=[Lr,Ur],Hr={class:"py-1"},Br=d("path",{d:"M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3Zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"},null,-1),Vr=[Br],Fr=d("path",{d:"M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7Zm1.679-4.493-1.335 2.226a.75.75 0 0 1-1.174.144l-.774-.773a.5.5 0 0 1 .708-.708l.547.548 1.17-1.951a.5.5 0 1 1 .858.514ZM11 5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"},null,-1),Yr=d("path",{d:"M2 13c0 1 1 1 1 1h5.256A4.493 4.493 0 0 1 8 12.5a4.49 4.49 0 0 1 1.544-3.393C9.077 9.038 8.564 9 8 9c-5 0-6 3-6 4Z"},null,-1),Wr=[Fr,Yr],Zr={key:0,class:"py-1"},Xr={class:"p-2 rounded-3xl cursor-pointer hover:bg-white group transition duration-300"},qr=d("path",{d:"M11 5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm-9 8c0 1 1 1 1 1h5.256A4.493 4.493 0 0 1 8 12.5a4.49 4.49 0 0 1 1.544-3.393C9.077 9.038 8.564 9 8 9c-5 0-6 3-6 4Zm9.886-3.54c.18-.613 1.048-.613 1.229 0l.043.148a.64.64 0 0 0 .921.382l.136-.074c.561-.306 1.175.308.87.869l-.075.136a.64.64 0 0 0 .382.92l.149.045c.612.18.612 1.048 0 1.229l-.15.043a.64.64 0 0 0-.38.921l.074.136c.305.561-.309 1.175-.87.87l-.136-.075a.64.64 0 0 0-.92.382l-.045.149c-.18.612-1.048.612-1.229 0l-.043-.15a.64.64 0 0 0-.921-.38l-.136.074c-.561.305-1.175-.309-.87-.87l.075-.136a.64.64 0 0 0-.382-.92l-.148-.045c-.613-.18-.613-1.048 0-1.229l.148-.043a.64.64 0 0 0 .382-.921l-.074-.136c-.306-.561.308-1.175.869-.87l.136.075a.64.64 0 0 0 .92-.382l.045-.148ZM14 12.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0Z"},null,-1),Jr=[qr],Kr={class:"cursor-default bg-black py-2 text-white"},Qr=d("div",{class:"border-b p-2"}," Status player ",-1),es=d("div",null," --Empty-- ",-1),ts={key:0},ns=d("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6",viewBox:"0 0 16 16"},[d("path",{d:"M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z"})],-1),as=[ns],os=["onClick"],rs={key:0},ss=d("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-6 h-6",viewBox:"0 0 16 16"},[d("path",{d:"M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z"})],-1),is=[ss],ls={class:"py-1"},ds=d("path",{d:"M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm15 2h-4v3h4V4zm0 4h-4v3h4V8zm0 4h-4v3h3a1 1 0 0 0 1-1v-2zm-5 3v-3H6v3h4zm-5 0v-3H1v2a1 1 0 0 0 1 1h3zm-4-4h4V8H1v3zm0-4h4V4H1v3zm5-3v3h4V4H6zm4 4H6v3h4V8z"},null,-1),us=[ds],cs={key:0,class:"absolute inline-flex items-center justify-center w-6 h-6 text-xs font-bold text-white bg-red-500 border-2 border-white rounded-full -top-2 -right-2 dark:border-gray-900"},hs={key:1,class:"py-1"},fs=d("path",{d:"M1.5 2A1.5 1.5 0 0 0 0 3.5v2h6a.5.5 0 0 1 .5.5c0 .253.08.644.306.958.207.288.557.542 1.194.542.637 0 .987-.254 1.194-.542.226-.314.306-.705.306-.958a.5.5 0 0 1 .5-.5h6v-2A1.5 1.5 0 0 0 14.5 2h-13z"},null,-1),ps=d("path",{d:"M16 6.5h-5.551a2.678 2.678 0 0 1-.443 1.042C9.613 8.088 8.963 8.5 8 8.5c-.963 0-1.613-.412-2.006-.958A2.679 2.679 0 0 1 5.551 6.5H0v6A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-6z"},null,-1),ms=[fs,ps],gs={class:"cursor-default bg-black py-2 text-white"},vs=d("div",{class:"border-b p-2"}," Get all cards from: ",-1),bs=["onClick"],ws={key:2,class:"py-1"},ys=d("path",{d:`M57.832,26.926l-8-12c-0.186-0.278-0.498-0.445-0.832-0.445H9c-0.335,0-0.646,0.167-0.832,0.445l-8,12\r
        		c-0.205,0.307-0.224,0.701-0.05,1.026C0.292,28.278,0.631,28.481,1,28.481h6v15.038h2V28.481h5v6h2v-6h27v6h2v-6h5v15.038h2V28.481\r
        		h5c0.369,0,0.708-0.203,0.882-0.528C58.056,27.627,58.037,27.233,57.832,26.926z M2.869,26.481l6.666-10h38.93l6.667,10H2.869z`},null,-1),_s=[ys],xs={class:"cursor-default bg-black py-2 text-white"},ks=d("div",{class:"border-b p-2"}," Move table cards to: ",-1),Cs=["onClick"],Ss=se({__name:"PlayerSettings",setup(n){const e=Ee(),t=V(null),a=V(!0),o=V("Please click a card first"),{x:s,y:i,style:l}=Vn(t,{initialValue:{x:window.innerWidth*.5-300,y:window.innerHeight-250}});return(c,u)=>{const m=qe("VTooltip"),b=qe("VMenu");return f(),D("div",{ref_key:"el",ref:t,style:Gn([r(l),{position:"fixed"}]),class:N([r(e).clickCardId?"snooze":"","z-[2147483644]"])},[w(S,{class:"bg-dark rounded-2xl px-4 border border-white",gap:2},{default:h(()=>{var E,I,$,p,g,x;return[Tr,d("div",Dr,[w(m,null,{popper:h(()=>[L(F(r(e).clickCardId?"Show / Hide card":o.value),1)]),default:h(()=>[d("div",{class:N(["p-2 rounded-3xl group transition duration-300",[r(e).clickCardId?"hover:bg-white cursor-pointer":"cursor-not-allowed"]]),onClick:u[0]||(u[0]=v=>r(e).clickCardId?r(e).toggleCardVisibility():"")},[r(e).isCardHidden()?(f(),D("svg",{key:0,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:N([[r(e).clickCardId?"group-hover:text-dark":"opacity-50"],"w-6 h-6 transition duration-300"]),viewBox:"0 0 16 16"},Ir,2)):(f(),D("svg",{key:1,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:N([[r(e).clickCardId?"group-hover:text-dark":"opacity-50"],"w-6 h-6 transition duration-300"]),viewBox:"0 0 16 16"},Pr,2))],2)]),_:1})]),d("div",Or,[w(m,null,{popper:h(()=>[L(F(r(e).clickCardId?"Rotate card right 90\xB0":o.value),1)]),default:h(()=>[d("div",{class:N(["p-2 rounded-3xl group transition duration-300",[r(e).clickCardId?"hover:bg-white cursor-pointer hover:rotate-90":"cursor-not-allowed"]]),onClick:u[1]||(u[1]=v=>r(e).clickCardId?r(e).rotateCard(r(Jt).RIGHT):"")},[(f(),D("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:N([[r(e).clickCardId?"group-hover:text-dark":"opacity-50"],"w-6 h-6 transition duration-300"]),viewBox:"0 0 16 16"},Gr,2))],2)]),_:1})]),d("div",zr,[w(m,null,{popper:h(()=>[L(F(r(e).clickCardId?"Rotate card left 90\xB0":o.value),1)]),default:h(()=>[d("div",{class:N(["p-2 rounded-3xl group transition duration-300",[r(e).clickCardId?"hover:bg-white cursor-pointer hover:-rotate-90":"cursor-not-allowed"]]),onClick:u[2]||(u[2]=v=>r(e).clickCardId?r(e).rotateCard(r(Jt).LEFT):"")},[(f(),D("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:N([[r(e).clickCardId?"group-hover:text-dark":"opacity-50"],"w-6 h-6 transition duration-300"]),viewBox:"0 0 16 16"},jr,2))],2)]),_:1})]),d("div",Hr,[w(m,null,{popper:h(()=>[L(' Set status "My turn" ')]),default:h(()=>[d("div",{onClick:u[3]||(u[3]=v=>a.value?r(e).setPlayingPlayer():""),class:"p-2 rounded-3xl cursor-pointer hover:bg-white group transition duration-300"},[r(e).getExistPlayerPlayingStatus?(f(),D("svg",{key:1,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:N([[a.value?"group-hover:text-dark":"opacity-50 cursor-not-allowed"],"w-6 h-6 transition duration-300"]),viewBox:"0 0 16 16"},Wr,2)):(f(),D("svg",{key:0,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:N([[a.value?"group-hover:text-dark":"opacity-50 cursor-not-allowed"],"w-6 h-6 transition duration-300"]),viewBox:"0 0 16 16"},Vr,2))])]),_:1})]),(I=(E=r(e).table)==null?void 0:E.game)!=null&&I.status?(f(),D("div",Zr,[w(b,{placement:"top"},{popper:h(()=>{var v,y;return[d("div",Kr,[Qr,d("div",{class:"p-2 mt-2 cursor-pointer hover:bg-white hover:text-black transition duration-300",onClick:u[4]||(u[4]=C=>r(e).addStatusPlayer(null))},[w(S,{justify:"between",items:"center"},{default:h(()=>{var C,_;return[es,((_=(C=r(e).table.table_users)==null?void 0:C.find(A=>A.id===r(e).getExistTableUserId))==null?void 0:_.status)===null?(f(),D("div",ts,as)):U("",!0)]}),_:1})]),(f(!0),D(B,null,W((y=(v=r(e).table)==null?void 0:v.game)==null?void 0:y.status,C=>(f(),D("div",{class:"p-2 mt-2 cursor-pointer hover:bg-white hover:text-black transition duration-300",key:C.id,onClick:_=>r(e).addStatusPlayer(C)},[w(S,{justify:"between",items:"center"},{default:h(()=>{var _,A,G;return[d("div",null,F(C.name),1),((G=(A=(_=r(e).table.table_users)==null?void 0:_.find(q=>q.id===r(e).getExistTableUserId))==null?void 0:A.status)==null?void 0:G.id)===C.id?(f(),D("div",rs,is)):U("",!0)]}),_:2},1024)],8,os))),128))])]}),default:h(()=>[d("div",Xr,[(f(),D("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:N([[a.value?"group-hover:text-dark":"opacity-50 cursor-not-allowed"],"w-6 h-6 transition duration-300"]),viewBox:"0 0 16 16"},Jr,2))])]),_:1})])):U("",!0),d("div",ls,[w(m,null,{popper:h(()=>[L(" View Rank ")]),default:h(()=>[d("button",{class:"p-2 rounded-3xl cursor-pointer hover:bg-white group transition duration-300 relative",onClick:u[5]||(u[5]=v=>{r(e).rank.isRankModalOpen=!0,r(e).rank.notification=!1})},[(f(),D("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:N([[a.value?"group-hover:text-dark":"opacity-50 cursor-not-allowed"],"w-6 h-6 transition duration-300"]),viewBox:"0 0 16 16"},us,2)),r(e).rank.notification?(f(),D("div",cs," ! ")):U("",!0)])]),_:1})]),(p=($=r(e).table)==null?void 0:$.game)!=null&&p.status?(f(),D("div",hs,[w(b,{placement:"top"},{popper:h(()=>{var v,y;return[d("div",gs,[vs,(f(!0),D(B,null,W((y=(v=r(e).table)==null?void 0:v.table_decks)==null?void 0:y.filter(C=>C.type!==r(ge).USER),C=>(f(),D("div",{class:"p-2 mt-2 cursor-pointer hover:bg-white hover:text-black transition duration-300",key:C.id,onClick:_=>{var A,G;return r(e).cardsToDeck(C.id,(G=(A=r(e).table)==null?void 0:A.table_decks)==null?void 0:G.find(q=>q.id===r(e).getExistPlayerTableDeckId))}},[w(S,{justify:"between",items:"center"},{default:h(()=>{var _;return[d("div",null,F((_=C.deck)==null?void 0:_.name),1)]}),_:2},1024)],8,bs))),128))])]}),default:h(()=>[d("button",{class:"p-2 rounded-3xl cursor-pointer hover:bg-white group transition duration-300 relative",onClick:u[6]||(u[6]=v=>{r(e).rank.isRankModalOpen=!0,r(e).rank.notification=!1})},[(f(),D("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:N([[a.value?"group-hover:text-dark":"opacity-50 cursor-not-allowed"],"w-6 h-6 transition duration-300"]),viewBox:"0 0 16 16"},ms,2))])]),_:1})])):U("",!0),(x=(g=r(e).table)==null?void 0:g.game)!=null&&x.status?(f(),D("div",ws,[w(b,{placement:"top"},{popper:h(()=>{var v,y;return[d("div",xs,[ks,(f(!0),D(B,null,W((y=(v=r(e).table)==null?void 0:v.table_decks)==null?void 0:y.filter(C=>C.type===r(ge).JUNK||C.type===r(ge).DECK),C=>{var _;return f(),D("div",{class:"p-2 mt-2 cursor-pointer hover:bg-white hover:text-black transition duration-300",key:C.id,onClick:A=>r(e).cardsToDeck(r(e).getTableDeckId,C)},F((_=C.deck)==null?void 0:_.name),9,Cs)}),128))])]}),default:h(()=>[d("button",{class:"p-2 rounded-3xl cursor-pointer hover:bg-white group transition duration-300 relative",onClick:u[7]||(u[7]=v=>{r(e).rank.isRankModalOpen=!0,r(e).rank.notification=!1})},[(f(),D("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:N([[a.value?"group-hover:text-dark":"opacity-50 cursor-not-allowed"],"w-6 h-6 transition duration-300"]),viewBox:"0 0 56 56"},_s,2))])]),_:1})])):U("",!0)]}),_:1})],6)}}});const Ts=d("div",{class:"text-sm"},"Junk Deck",-1),Ds={class:"col-span-1"},$s=d("div",{class:"text-black"}," Rank Table ",-1),Es={key:1,class:"bg-red-500 p-4 my-4 rounded italic"},Is=se({__name:"OnlineTable",setup(n){var p,g;const e=Ee(),t=V("600"),a=V("1000"),o=V("600"),s=Wt();(p=e.table)!=null&&p.game&&(o.value=parseFloat((t.value/((g=e.table)==null?void 0:g.game.grid_rows)).toFixed(1)));const i=V(null),l=V(null),c=V(null);yt(()=>{c.value&&(e.deckReferences.junk=c.value,e.dropZones.junk[0].element=c.value),l.value&&(e.deckReferences.table=l.value,e.dropZones.table[0].element=l.value),i.value&&(e.deckReferences.user=i.value,e.dropZones.user[0].element=i.value)});const u=(x,v)=>{x&&(e.dropZones.deck[v].element=x)},m=V(2),b=x=>{},E=x=>{},I=(x,v,y)=>{x.dataTransfer.dropEffect="move",x.dataTransfer.effectAllowed="move",x.dataTransfer.setData("card",JSON.stringify(y)),x.dataTransfer.setData("cardHeight",v.offsetHeight),x.dataTransfer.setData("cardWidth",v.offsetWidth),x.dataTransfer.setData("top",x.y-v.getBoundingClientRect().top),x.dataTransfer.setData("left",x.x-v.getBoundingClientRect().left)},$=(x,v,y)=>{e.onDrop(x,v,y,m.value++)};return Je(()=>{var x,v;return(v=(x=e.table)==null?void 0:x.game)==null?void 0:v.grid_rows},()=>{var x,v;(x=e.table)!=null&&x.game&&(o.value=parseFloat((t.value/((v=e.table)==null?void 0:v.game.grid_rows)).toFixed(1)))}),(x,v)=>(f(),D(B,null,[w(S,{justify:"center"},{default:h(()=>[w(S,{class:N([`w-[${a.value}px] h-[120px]`,"bg-secondary border px-4 divide-x-2 h-full"]),items:"center",justify:"center"},{default:h(()=>[r(e).cards?(f(),O(S,{key:0},{default:h(()=>[(f(!0),D(B,null,W(r(e).dropZones.deck,(y,C)=>{var _,A,G,q,H,ae,oe,fe;return f(),O(Sr,{deck:{tableDeckId:y.tableDeckId,index:C,cards:r(e).getCards(y.tableDeckId),deckName:(q=(G=(A=(_=r(e).table)==null?void 0:_.table_decks)==null?void 0:A.find(J=>J.id===y.tableDeckId))==null?void 0:G.deck)==null?void 0:q.name,deckType:(fe=(oe=(ae=(H=r(e).table)==null?void 0:H.table_decks)==null?void 0:ae.find(J=>J.id===y.tableDeckId))==null?void 0:oe.deck)==null?void 0:fe.type},index:C,key:y.tableDeckId,onDeckCreate:J=>u(J,C),onOnDragStart:v[0]||(v[0]=(J,pe,Ie)=>I(J,pe,Ie)),onOnDragEnter:v[1]||(v[1]=J=>E()),onOnDragLeave:v[2]||(v[2]=J=>b()),onOnDrop:(J,pe)=>$(J,pe,"deck")},null,8,["deck","index","onDeckCreate","onOnDrop"])}),128))]),_:1})):U("",!0),r(e).cards?(f(),O(S,{key:1,class:"h-full px-4",column:!0,justify:"center",items:"center",gap:1},{default:h(()=>{var y;return[d("div",{class:N(["card-box cursor-pointer relative dropZone",(y=r(e).getCards(r(e).getJunkTableDeckId))!=null&&y.length?"":"border"]),ref_key:"tableDeckTrashReference",ref:c,id:"junkDeck",onDrop:v[3]||(v[3]=C=>$(C,r(e).getJunkTableDeckId,"junk")),onDragover:v[4]||(v[4]=ye(()=>{},["prevent"])),onDragleave:v[5]||(v[5]=C=>b()),onDragenter:v[6]||(v[6]=ye(C=>E(),["prevent"]))},[(f(!0),D(B,null,W(r(e).getCards(r(e).getJunkTableDeckId),(C,_)=>(f(),O(ft,{card:C,key:_,onOnDragStart:(A,G)=>I(A,G,C)},null,8,["card","onOnDragStart"]))),128))],34),Ts]}),_:1})):U("",!0)]),_:1},8,["class"])]),_:1}),r(e).cards&&r(e).getTableExist?(f(),O(S,{key:0,justify:"center"},{default:h(()=>{var y,C,_,A,G,q;return[d("div",{id:"tableDeck",class:N(["grid bg-dark relative dropZone",`grid-cols-${(C=(y=r(e).table)==null?void 0:y.game)==null?void 0:C.grid_cols} grid-rows-${(A=(_=r(e).table)==null?void 0:_.game)==null?void 0:A.grid_rows} h-[${t.value}px] w-[${a.value}px]`]),ref_key:"tableDeckReference",ref:l,onDrop:v[7]||(v[7]=H=>$(H,r(e).getTableDeckId,"table")),onDragover:v[8]||(v[8]=ye(()=>{},["prevent"])),onDragleave:v[9]||(v[9]=H=>b()),onDragenter:v[10]||(v[10]=ye(H=>E(),["prevent"]))},[(f(!0),D(B,null,W((q=(G=r(e).table)==null?void 0:G.game)==null?void 0:q.grid_cols,H=>{var ae,oe;return f(),D("div",Ds,[(f(!0),D(B,null,W((oe=(ae=r(e).table)==null?void 0:ae.game)==null?void 0:oe.grid_rows,fe=>(f(),D("div",{class:N(["row-span-1 bg-primary border w-full",`h-[${o.value}px]`])},null,2))),256))])}),256)),(f(!0),D(B,null,W(r(e).getCards(r(e).getTableDeckId),(H,ae)=>(f(),O(ft,{card:H,key:ae,onOnDragStart:(oe,fe)=>I(oe,fe,H),absolute:!0,rotate:!0},null,8,["card","onOnDragStart"]))),128))],34)]}),_:1})):U("",!0),r(e).cards?(f(),O(S,{key:1,justify:"center"},{default:h(()=>[d("div",{class:N([`w-[${a.value}px] h-[150px]`,"bg-secondary border relative dropZone"]),id:"playerDeck",ref_key:"playerDeckReference",ref:i,onDrop:v[11]||(v[11]=y=>$(y,r(e).getExistPlayerTableDeckId,"user")),onDragover:v[12]||(v[12]=ye(()=>{},["prevent"])),onDragleave:v[13]||(v[13]=y=>b()),onDragenter:v[14]||(v[14]=ye(y=>E(),["prevent"]))},[d("div",null,[w(S,{class:"border w-full h-full"},{default:h(()=>[(f(!0),D(B,null,W(r(e).getCards(r(e).getExistPlayerTableDeckId),(y,C)=>(f(),O(ft,{card:y,key:C,onOnDragStart:(_,A)=>I(_,A,y),absolute:!0,rotate:!0,"show-cards":!0,"player-deck":!0},null,8,["card","onOnDragStart"]))),128))]),_:1})])],34)]),_:1})):U("",!0),w(Ss),w(mn,{"modal-open":r(e).rank.isRankModalOpen,onCloseModal:v[15]||(v[15]=y=>r(e).rank.isRankModalOpen=!1)},{modal_header:h(()=>[$s]),body:h(()=>[r(s).rankPoints.length>0?(f(),O(gn,{key:0,"table-headers":r(s).tableHeaders,class:"border border-gray-700 rounded-lg overflow-y-auto"},{default:h(()=>[(f(!0),D(B,null,W(r(s).rankPoints,(y,C)=>(f(),O(Nt,{key:`rankRow-${y}`},{default:h(()=>[(f(!0),D(B,null,W(y,_=>(f(),O(Re,{key:_.id},{default:h(()=>[L(F(_.type===r($e).TITLE?_.title:_.points),1)]),_:2},1024))),128))]),_:2},1024))),128))]),_:1},8,["table-headers"])):(f(),D("div",Es," The rank table is empty "))]),_:1},8,["modal-open"])],64))}}),As={class:"max-h-[500px] overflow-y-auto"},Ms={class:"border-b border-primary text-black py-2 mb-3"},Ps=["src"],Os=d("div",null,"No cards",-1),Ns=se({__name:"ModalViewAllCards",props:{isModalOpen:{type:Boolean,required:!0},tableDecks:{type:Array,required:!0},cards:{type:Array,required:!0}},emits:["closeModal"],setup(n,{emit:e}){const t=n,a=s=>{var i,l;switch(s.type){case ge.USER:return(i=s.user)==null?void 0:i.username;case ge.DECK:return(l=s.deck)==null?void 0:l.name;case ge.TABLE:return"Table";case ge.JUNK:return"Junk"}},o=s=>{var i;return((i=t.cards)==null?void 0:i.filter(l=>l.table_deck.id===s))||[]};return(s,i)=>n.cards||n.tableDecks?(f(),O(mn,{key:0,modalOpen:n.isModalOpen,onCloseModal:i[1]||(i[1]=l=>s.$emit("closeModal")),class:"z-[2147483645]"},{modal_header:h(()=>[L(" Cards ")]),body:h(()=>[d("div",As,[(f(!0),D(B,null,W(n.tableDecks,l=>{var c;return f(),D("div",{key:l.id,class:"px-4"},[d("div",Ms,F(a(l)),1),((c=o(l.id))==null?void 0:c.length)>0?(f(),O(S,{key:0,gap:2,wrap:!0},{default:h(()=>[(f(!0),D(B,null,W(o(l.id),u=>(f(),D("img",{class:"card-box",src:r(pt)(u.card.image),key:u.id},null,8,Ps))),128))]),_:2},1024)):(f(),O(S,{key:1,gap:2},{default:h(()=>[Os]),_:1}))])}),128))])]),modal_footer:h(()=>[d("button",{class:"flex w-full items-center justify-center rounded-md border border-transparent bg-gray-400 px-8 py-3 text-base font-medium text-white hover:bg-secondary hover:text-white md:py-3 md:px-10 md:text-lg ml-2",onClick:i[0]||(i[0]=l=>s.$emit("closeModal"))}," Close ")]),_:1},8,["modalOpen"])):U("",!0)}}),Rs=se({__name:"TimeAgo",props:{created_at:{type:String,required:!0}},setup(n){const e=n,t=V();yt(()=>{t.value=a(),setInterval(()=>{t.value=a()},6e4)});const a=()=>{const o=new Date,s=new Date(e.created_at),i=Math.floor((o.getTime()-s.getTime())/1e3);if(i<60)return"less a minute ago";if(i<3600){const l=Math.floor(i/60);return`${l} ${l===1?"minute":"minutes"} ago`}else if(i<86400){const l=Math.floor(i/3600);return`${l} ${l===1?"hour":"hours"} ago`}else{const l=Math.floor(i/86400);return`${l} ${l===1?"day":"days"} ago`}};return(o,s)=>F(t.value)}}),Gs={class:"font-bold text-dark"},zs={class:"text-gray-800 text-sm text-right"},Ls=se({__name:"ChatMessage",props:{isActiveUserMessage:{type:Boolean,default:!1},data:{type:Object,required:!0}},setup(n){return(e,t)=>(f(),O(S,{justify:n.isActiveUserMessage?"start":"end"},{default:h(()=>[w(S,{class:N(["py-2 px-4 rounded-3xl w-96",n.isActiveUserMessage?"bg-primary":"bg-light-blue"]),column:!0},{default:h(()=>{var a,o,s;return[d("span",Gs,F((a=n.data)==null?void 0:a.user.username)+":",1),d("div",null,F((o=n.data)==null?void 0:o.message),1),d("div",zs,[w(Rs,{created_at:(s=n.data)==null?void 0:s.created_at.toString()},null,8,["created_at"])])]}),_:1},8,["class"])]),_:1},8,["justify"]))}}),Us=Bt(),js=Ee(),Hs=hn("ChatStore",{state:()=>({message:"",messages:[],unreadMessages:0,room:js.room,isChatOpen:!1}),getters:{getMessages:n=>n.messages},actions:{_sendMessage(){if(this.$state.message.length>0){const n={message:this.$state.message,room:this.$state.room,user:Us.user};te.emit("sendMessage",{data:n},e=>{e.status===200&&(this.$state.message="")})}},toggleChatMessenger(){this.$state.isChatOpen||(this.$state.unreadMessages=0),this.$state.isChatOpen=!this.$state.isChatOpen}}}),Bs=d("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-12 h-12",viewBox:"0 0 16 16"},[d("path",{d:"M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM5 8a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"})],-1),Vs={key:0,class:"absolute inline-flex items-center justify-center w-6 h-6 text-xs font-bold text-white bg-red-500 border-2 border-white rounded-full -top-2 -right-2 dark:border-gray-900"},Fs={key:1,class:"h-full relative bg-dark-smooth rounded-3xl p-4"},Ys=d("div",{class:"text-2xl px-2 font-bold"}," Table Chat ",-1),Ws=d("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-8 h-8",viewBox:"0 0 16 16"},[d("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"})],-1),Zs=[Ws],Xs=d("button",{type:"submit",class:"w-8 h-8 mr-8 absolute right-3 cursor-pointer"},[d("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"w-8 h-8 mr-8 cursor-pointer hover:text-primary transition duration-300 hover:scale-110",viewBox:"0 0 16 16"},[d("path",{d:"M15.964.686a.5.5 0 0 0-.65-.65L.767 5.855H.766l-.452.18a.5.5 0 0 0-.082.887l.41.26.001.002 4.995 3.178 3.178 4.995.002.002.26.41a.5.5 0 0 0 .886-.083l6-15Zm-1.833 1.89L6.637 10.07l-.215-.338a.5.5 0 0 0-.154-.154l-.338-.215 7.494-7.494 1.178-.471-.47 1.178Z"})])],-1),qs=se({__name:"RoomChat",setup(n){const e=V(""),t=Hs(),a=Bt(),o=Ee();return fn(()=>{t.room=o.room,te.on("getSendMessage",s=>{s&&(t.messages.unshift(s),t.isChatOpen||t.unreadMessages++)})}),Je(()=>t.message,s=>{e.value=s}),pn(()=>{te.off("getSendMessage"),t.messages=[],t.message="",t.unreadMessages=0}),(s,i)=>(f(),D("div",{class:N(["fixed bottom-10 left-10 transition-height ease duration-1000 z-[2147483640]",r(t).isChatOpen?"w-[500px] h-[600px]":"w-[50px] h-[50px]"])},[r(t).isChatOpen?(f(),D("div",Fs,[w(S,{justify:"between",column:!0,class:"h-full",gap:6},{default:h(()=>[w(S,{justify:"between"},{default:h(()=>[Ys,d("div",{class:"cursor-pointer hover:text-primary duration-300 transition hover:scale-110",onClick:i[1]||(i[1]=l=>r(t).toggleChatMessenger())},Zs)]),_:1}),r(t).getMessages.length>0?(f(),O(S,{key:0,class:"bottom-5 left-6 bg-dark rounded-3xl w-full p-4 h-full overflow-y-auto scroll-smooth",columnReverse:!0,gap:4},{default:h(()=>[(f(!0),D(B,null,W(r(t).getMessages,l=>(f(),O(Ls,{data:l,key:l.id,isActiveUserMessage:l.user.id===r(a).user.id},null,8,["data","isActiveUserMessage"]))),128))]),_:1})):(f(),O(S,{key:1,justify:"center",items:"center",class:"text-xl bottom-5 left-6 bg-dark rounded-3xl w-full p-4 h-full overflow-y-auto scroll-smooth",columnReverse:!0,gap:4},{default:h(()=>[L(" No messages ")]),_:1})),d("form",{onSubmit:i[4]||(i[4]=ye(l=>r(t)._sendMessage(),["prevent"]))},[w(S,{justify:"center",items:"center",class:"bg-dark bottom-5 rounded-3xl left-6 w-full",gap:4},{default:h(()=>[zn(d("input",{"onUpdate:modelValue":i[2]||(i[2]=l=>e.value=l),onInput:i[3]||(i[3]=l=>r(t).message=e.value),class:"w-full bg-dark rounded-3xl p-4 focus:outline-none focus:ring-2 transition duration-300 focus:ring-primary focus:ring-opacity-50",placeholder:"Type your message..."},null,544),[[Ln,e.value]]),Xs]),_:1})],32)]),_:1})])):(f(),O(S,{key:0,justify:"start"},{default:h(()=>[d("div",{class:"cursor-pointer hover:text-primary duration-300 transition hover:scale-110 relative",onClick:i[0]||(i[0]=l=>r(t).toggleChatMessenger())},[Bs,r(t).unreadMessages>0?(f(),D("div",Vs,F(r(t).unreadMessages),1)):U("",!0)])]),_:1}))],2))}}),Js={class:"rounded-2xl bg-primary px-12 py-6 text-4xl italic"},Ks={class:"mt-6 text-xl"},Qs=se({__name:"TableStatusMessage",props:{title:{type:String,required:!0},message:{type:String,required:!0}},setup(n){return(e,t)=>(f(),O(S,{class:"one-page bg-dark",items:"center",justify:"center",column:!0},{default:h(()=>[d("div",Js,F(n.title),1),d("div",Ks,F(n.message),1)]),_:1}))}}),ei={class:"w-5/6 overflow-auto text-white relative"},pi=se({__name:"RoomView",setup(n){const e=Un(),t=Ee(),a=Bt(),o=V(!1),s=V(!1),i=V(1),l=cn(),c=Wt(),u=V(!1);t.room=e.params.id.toString(),t.table?t._joinTable(t.room):xt.push({name:"lobby"});const m=V(["getTurnTableUsers","getUpdateTableUser","getStartGameDetails","exitUsersFromTable","getTableGameStatus","getShowAllCards","getUpdateCard","getShuffleDeck","getUpdateRankRow"]),b=()=>{var p,g,x,v,y;c.room=(p=t.room)!=null?p:"",c.tableId=(x=(g=t.table)==null?void 0:g.id)!=null?x:null,c.addTableUsers((y=(v=t.table)==null?void 0:v.table_users)!=null?y:[])};fn(()=>{t.setGameMaster(),te.on("getTableUsers",p=>{var g;p.public_url===t.room&&p.table_users&&(t.table=p,(g=t.table.table_users)!=null&&g.find(v=>v.user.id===a.user.id)||(l.info(`Player ${a.user.username} has remove from Game Master`),xt.push({name:"lobby"})))}),te.on("getTurnTableUsers",p=>{var x,v;t.table&&p&&(t.table.table_users=p);const g=(v=(x=t.table)==null?void 0:x.table_users)==null?void 0:v.find(y=>y.playing===!0);g&&l.info(`Player ${g.user.username} is playing`,{position:jn.TOP_CENTER,timeout:3e3})}),te.on("getUpdateTableUser",p=>{var g,x,v,y,C,_,A;if(p){const G=(x=(g=t.table)==null?void 0:g.table_users)==null?void 0:x.map(q=>q.id).indexOf(p.id);if(t.table&&G!==void 0){if(!((v=t.table.table_users[G])!=null&&v.status)&&(p==null?void 0:p.status)||((y=t.table.table_users[G].status)==null?void 0:y.id)!==((C=p==null?void 0:p.status)==null?void 0:C.id)){const q=(_=p.status)!=null&&_.name?`${p.user.username} update his status to "${(A=p.status)==null?void 0:A.name}"`:`${p.user.username} has remove his status`;l.info(q)}t.table.table_users[G]=p}}}),te.on("getStartGameDetails",(p,g)=>{var x,v;if(p){const y=((x=t.table)==null?void 0:x.status)===T.WAITING;t.table=p,I();const C=((v=t.table)==null?void 0:v.status)===T.PLAYING;C&&y&&(b(),t.refUndoHistory=[],t.refRedoHistory=[]),C&&t.deckReferences.junk&&([t.dropZones.junk[0].element,t.dropZones.user[0].element,t.dropZones.table[0].element]=[t.deckReferences.junk,t.deckReferences.user,t.deckReferences.table])}g&&(t.cards=g)}),te.on("exitUsersFromTable",()=>{t.room=null,t.gameMaster=!1,t.table=null,t.cards=null,u.value=!0,l.info("Game master has remove you from the table"),xt.push({name:"lobby"})}),te.on("getTableGameStatus",p=>{p&&(t.table=p,p.status===T.PAUSE&&l.info("Game has paused"),p.status===T.PLAYING&&l.info("Game has start"),p.status===T.GAME_MASTER_EDIT&&l.info("The game master is preparing the table"),p.status===T.FINISH&&l.info("Game has end"),p.status===T.PLAYER_LEAVE&&l.info("Player has leave the game"),p.status===T.PLAYER_DISCONNECTED&&l.info("Player has lost his connection"))}),te.on("getShowAllCards",p=>{p&&(s.value=p)}),te.on("getUpdateCard",p=>{p&&(t.zIndex=p.z_index+1,E(p))}),te.on("getShuffleDeck",(p,g)=>{var x,v,y,C;if(p){p.forEach(A=>{E(A)});const _=(C=(y=(v=(x=t.table)==null?void 0:x.table_decks)==null?void 0:v.find(A=>A.id===g))==null?void 0:y.deck)==null?void 0:C.name;l.info(`Game Master has shuffle the deck "${_}"`)}}),te.on("getUpdateRankRow",(p,g)=>{if(p)if(g===c.nextRow)c.rankPoints.push(p);else{const x=c.rankPoints.findIndex(v=>v.some(y=>y.row===g));c.rankPoints[x]=p}else{const x=c.rankPoints.findIndex(v=>v.some(y=>y.row===g));c.rankPoints=c.rankPoints.filter((v,y)=>y!==x)}t.rank.notification=!0})});const E=p=>{const g=t.replaceCard(p);g&&(t.updateUndoHistory(g),t.removeRedoHistoryMovement())},I=()=>{var p,g;t.resetDropZones(),(g=(p=t.table)==null?void 0:p.table_decks)==null||g.forEach(x=>{switch(x.type){case ge.DECK:t.dropZones.deck.push({tableDeckId:x.id,element:null});break;case ge.JUNK:t.dropZones.junk.push({tableDeckId:x.id,element:null});break;case ge.TABLE:t.dropZones.table.push({tableDeckId:x.id,element:null});break;case ge.USER:x.id===t.getExistPlayerTableDeckId&&t.dropZones.user.push({tableDeckId:x.id,element:null});break}})},$=V([{status:T.WAITING,title:"Game not started yet",message:"...waiting from Game Master to start the game"},{status:T.PAUSE,title:"Game Paused",message:"...waiting from Game Master to resume the game"},{status:T.GAME_MASTER_EDIT,title:"Game edit from Game Master",message:"..waiting from Game Master to finish with the configure of the table"},{status:T.FINISH,title:"Game has ended",message:"...waiting from Game Master to start the game"},{status:T.PLAYER_LEAVE,title:"Player has leave the game",message:"...waiting for player to join or to Game Master to start new game"},{status:T.PLAYER_DISCONNECTED,title:"Player has lost his connection",message:"...waiting for player to join or to Game Master to start new game"}]);return pn(()=>{t.room=null,t.gameMaster=!1,t.cards=null,t.refUndoHistory=[],t.refRedoHistory=[],u.value||(console.log("\x1B[33m%s\x1B[0m","forceQuit"),t._leaveTable()),m.value.forEach(p=>{te.off(p)})}),(p,g)=>{var x,v,y,C;return f(),D(B,null,[w(S,{class:"relative one-page w-full bg-dark"},{default:h(()=>{var _,A;return[d("div",ei,[((_=r(t).table)==null?void 0:_.status)===r(T).PLAYING||r(t).gameMaster&&((A=r(t).table)==null?void 0:A.status)===r(T).GAME_MASTER_EDIT?(f(),O(Is,{key:0})):(f(!0),D(B,{key:1},W($.value,({status:G,title:q,message:H})=>(f(),O(S,{key:G,items:"center",justify:"center"},{default:h(()=>{var ae;return[((ae=r(t).table)==null?void 0:ae.status)===G?(f(),O(Qs,{key:0,title:q,message:H},null,8,["title","message"])):U("",!0)]}),_:2},1024))),128)),w(qs)]),w(vr,{class:"w-1/6 overflow-x-auto"})]}),_:1}),r(t).gameMaster?(f(),O(ba,{key:0,onOpenSettings:g[0]||(g[0]=_=>{i.value=_,o.value=!0}),onStopGame:g[1]||(g[1]=_=>r(t)._stopGame()),onLeaveGame:g[2]||(g[2]=_=>r(t)._leaveGame()),onNewGame:g[3]||(g[3]=_=>r(t)._newGame()),onUpdateTableGameStatus:g[4]||(g[4]=_=>r(t)._updateTableGameStatus(_)),onShowAllCards:g[5]||(g[5]=_=>r(t)._showAllCards()),onSetNextPlayer:g[6]||(g[6]=_=>r(t)._setNextPlayer(_)),onShuffleDeck:g[7]||(g[7]=_=>r(t)._shuffleDeck()),onHistoryMovement:g[8]||(g[8]=_=>r(t).historyMovement(_))})):U("",!0),r(t).gameMaster?(f(),O(ar,{key:1,"table-users":(x=r(t).table)==null?void 0:x.table_users,"table-status":{status:(v=r(t).table)==null?void 0:v.status},table:r(t).table||void 0,"modal-open":o.value,onCloseModal:g[9]||(g[9]=_=>o.value=!1),onUpdateTurnTableUsers:g[10]||(g[10]=_=>r(t)._updateTurnTableUsers()),onUpdateRole:g[11]||(g[11]=(_,A)=>r(t)._setRoleTableUser(_,A)),onUpdateStatus:g[12]||(g[12]=(_,A)=>r(t)._setStatusTableUser(_,A)),onUpdateTeam:g[13]||(g[13]=(_,A)=>r(t)._setTeamTableUser(_,A)),onStopGame:g[14]||(g[14]=_=>r(t)._stopGame()),onLeaveGame:g[15]||(g[15]=_=>r(t)._leaveGame()),onNewGame:g[16]||(g[16]=_=>r(t)._newGame()),onUpdateTableGameStatus:g[17]||(g[17]=_=>r(t)._updateTableGameStatus(_)),onShowAllCards:g[18]||(g[18]=_=>r(t)._showAllCards()),"menu-tab":i.value,onRemovePlayer:g[19]||(g[19]=_=>r(t)._removePlayer(_)),onSetNextPlayer:g[20]||(g[20]=_=>r(t)._setNextPlayer(_))},null,8,["table-users","table-status","table","modal-open","menu-tab"])):U("",!0),r(t).cards&&((y=r(t).table)==null?void 0:y.table_decks)?(f(),O(Ns,{key:2,"is-modal-open":s.value,cards:r(t).cards,"table-decks":(C=r(t).table)==null?void 0:C.table_decks,onCloseModal:g[21]||(g[21]=_=>s.value=!1)},null,8,["is-modal-open","cards","table-decks"])):U("",!0)],64)}}});export{pi as default};
